"use strict";(()=>{var a={};a.id=476,a.ids=[476,636,3220],a.modules={1563:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{n:()=>h});var e=c(8732),f=c(39621),g=a([f]);function h({isViewing:a,member:b,onClose:c,onEdit:d,onDelete:g}){return a&&b?(0,e.jsx)(f.m,{member:b,isOpen:a,onClose:c,onEdit:d,onDelete:g}):null}f=(g.then?(await g)():g)[0],d()}catch(a){d(a)}})},4720:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{E:()=>i});var e=c(8732);c(82015);var f=c(8938),g=c(87092),h=a([f,g]);[f,g]=h.then?(await h)():h;let j=(0,f.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i({className:a,variant:b,...c}){return(0,e.jsx)("div",{className:(0,g.cn)(j({variant:b}),a),...c})}d()}catch(a){d(a)}})},8732:a=>{a.exports=require("react/jsx-runtime")},8938:a=>{a.exports=import("class-variance-authority")},8958:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{I:()=>i});var e=c(8732),f=c(78059),g=c(40273),h=a([f,g]);function i({member:a,onChange:b}){let{handleNameChange:c,handleRoleChange:d,handleEmailChange:h,handlePhoneChange:i}=b;return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(g.J,{children:"Name *"}),(0,e.jsx)(f.p,{value:a.name,onChange:c})]}),(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(g.J,{children:"Role"}),(0,e.jsx)(f.p,{value:a.role||"",onChange:d})]}),(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(g.J,{children:"Email"}),(0,e.jsx)(f.p,{type:"email",value:a.email||"",onChange:h})]}),(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(g.J,{children:"Phone"}),(0,e.jsx)(f.p,{value:a.phone||"",onChange:i})]})]})}[f,g]=h.then?(await h)():h,d()}catch(a){d(a)}})},9285:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{i:()=>n});var e=c(8732),f=c(38661),g=c(70135),h=c(70651),i=c(96717),j=c(77784),k=c(82015),l=c(81251),m=a([f,g,h,i,l]);function n({open:a,onOpenChange:b,client:c,onClientDeleted:d}){let{showDeleteConfirm:m,setShowDeleteConfirm:n,activeTab:o,setActiveTab:p,deletionError:q,handleDelete:r,handleRestore:s,showPermanentDeleteConfirm:t,setShowPermanentDeleteConfirm:u,permanentDeletionError:v,setPermanentDeletionError:w,isPerformingAction:x,setIsPerformingAction:y,handlePermanentDelete:z}=(0,i.v)(c,b,d),{form:A,isSubmitting:B,setIsSubmitting:C,contacts:D,setContacts:E,members:F,setMembers:G,documents:H,setDocuments:I,documentFiles:J,profilePreview:K,handleProfileChange:L,handleDocumentUpload:M,uploadProfile:N,uploadClientDocument:O,profileFile:P}=(0,g.X)(c),{handleSubmit:Q}=(0,j.d)(),R=(0,k.useMemo)(()=>c?c.is_archived||c.archived?`Archived Client: ${c.name}`:`Edit Client: ${c.name}`:"Add New Client",[c]),S=(0,k.useCallback)(async a=>{try{C(!0);let b=async a=>a&&await N(a)||"",d=async(a,b)=>{let c=new DataTransfer;c.items.add(a);let d=c.files,e=await O(d,b);return Array.isArray(e)&&e.length>0&&e[0].url||""},e={};return Array.isArray(J)&&J.forEach((a,b)=>{e[`file_${b}`]=a}),P&&(a.profile_image_file=P),await Q({client:c,values:a,profileUploadFn:b,documents:H,documentFiles:e,contacts:D,members:F,uploadDocumentFn:d,setIsSubmitting:C,onSuccess:()=>{}})}catch(a){return console.error("Error submitting form:",a),C(!1),!1}},[c,N,H,J,D,F,O,C,Q,P]),T=(0,k.useCallback)(a=>{I(H.filter(b=>b.id!==a))},[H,I]);return(0,e.jsxs)(f.lG,{open:a,onOpenChange:a=>{m||t||B||x||b(a)},children:[(0,e.jsx)(l.H,{client:c,dialogTitle:R,form:A,isSubmitting:B,activeTab:o,setActiveTab:p,contacts:D,setContacts:E,members:F,setMembers:G,documents:H,documentFiles:J,profilePreview:K,handleProfileChange:L,handleDocumentUpload:M,removeDocument:T,onOpenChange:b,onDelete:()=>{n(!0)},onRestore:s,onPermanentDelete:()=>{u(!0)},handleFormSubmit:S,isArchived:!!(c?.archived||c?.is_archived)}),m&&(0,e.jsx)(h.D,{clientName:c?.name,isOpen:m,onOpenChange:n,onConfirm:r,error:q,archiveMode:!0}),t&&(0,e.jsx)(h.D,{clientName:c?.name,isOpen:t,onOpenChange:u,onConfirm:z,error:v,permanentDelete:!0,isSubmitting:x})]})}[f,g,h,i,l]=m.then?(await m)():m,d()}catch(a){d(a)}})},9640:a=>{a.exports=import("@radix-ui/react-slot")},10621:(a,b,c)=>{c.d(b,{A:()=>f,z:()=>e});var d=c(95965);async function e(a,b,c,e){if(!a)return null;let f=a.name.split(".").pop(),g=`${c}-${e}.${f}`;try{let{data:c}=await d.N.storage.listBuckets();c?.some(a=>a.name===b)||await d.N.storage.createBucket(b,{public:!0}),await d.N.storage.from(b).remove([g]).then(({error:a})=>{a&&"Object not found"!==a.message&&console.error("Error removing existing file:",a)});let{data:e,error:f}=await d.N.storage.from(b).upload(g,a,{upsert:!0,contentType:a.type});if(f)throw console.error("Upload error:",f),f;let{data:{publicUrl:h}}=d.N.storage.from(b).getPublicUrl(g);return h}catch(a){throw console.error("File operation error:",a),a}}async function f(a,b){let c="client-documents",e=new Date().toISOString(),f=crypto.randomUUID(),g=a.name.split(".").pop(),h=`${b}/${f}.${g}`;try{let{data:b}=await d.N.storage.listBuckets();b?.some(a=>a.name===c)||await d.N.storage.createBucket(c,{public:!0});let{error:g}=await d.N.storage.from(c).upload(h,a,{contentType:a.type,upsert:!1});if(g)throw g;let{data:{publicUrl:i}}=d.N.storage.from(c).getPublicUrl(h);return{id:f,name:a.name,url:i,uploadedAt:e}}catch(a){throw console.error("Document upload error:",a),a}}},12301:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{I:()=>h});var e=c(8732),f=c(66345),g=a([f]);function h({isEditing:a,onCancel:b,onSave:c}){return(0,e.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,e.jsx)(f.$,{type:"button",variant:"outline",onClick:b,children:"Cancel"}),(0,e.jsx)(f.$,{type:"button",onClick:c,children:a?"Update Member":"Add Member"})]})}f=(g.then?(await g)():g)[0],d()}catch(a){d(a)}})},13020:a=>{a.exports=import("@radix-ui/react-dialog")},15488:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{X:()=>j});var e=c(8732),f=c(66345),g=c(40273),h=c(74952),i=a([f,g]);function j({onAdd:a}){return(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsx)(g.J,{children:"Organization Members"}),(0,e.jsxs)(f.$,{type:"button",variant:"outline",onClick:a,children:[(0,e.jsx)(h.ypN,{className:"mr-2 h-4 w-4"})," Add Member"]})]})}[f,g]=i.then?(await i)():i,d()}catch(a){d(a)}})},15566:(a,b,c)=>{c.d(b,{Y:()=>e});var d=c(82015);function e(a,b){let[c,e]=(0,d.useState)([]);return{contacts:c,setContacts:e}}c(95965)},16235:a=>{a.exports=import("@radix-ui/react-toast")},19640:a=>{a.exports=import("@radix-ui/react-tabs")},20598:a=>{a.exports=import("@radix-ui/react-label")},25665:a=>{a.exports=import("@radix-ui/react-checkbox")},28462:a=>{a.exports=import("@tanstack/react-query")},30912:(a,b,c)=>{c.d(b,{U:()=>f});var d=c(82015),e=c(10621);function f(a=null){let[b,c]=(0,d.useState)(null),[g,h]=(0,d.useState)(a);return{profileFile:b,profilePreview:g,handleProfileChange:a=>{let b=a.target.files?.[0];b&&(c(b),h(URL.createObjectURL(b)))},uploadProfile:async b=>{if(!b)return a;try{let a=crypto.randomUUID();return await (0,e.z)(b,"client-profiles",a,"profile")}catch(a){throw console.error("Profile upload error:",a),a}},resetProfile:(a=null)=>{c(null),h(a)}}}},32205:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{M:()=>i});var e=c(8732),f=c(43287),g=c(66635),h=a([f,g]);function i({client:a,form:b,isSubmitting:c,activeTab:d,setActiveTab:h,contacts:i,setContacts:j,members:k,setMembers:l,documents:m,documentFiles:n,profilePreview:o,handleProfileChange:p,handleDocumentUpload:q,removeDocument:r,onCancel:s,onDelete:t,onRestore:u,onPermanentDelete:v,handleSubmitForm:w,isArchived:x=!1}){let y=b.watch("type");return(0,e.jsxs)("form",{onSubmit:b.handleSubmit(w),children:[(0,e.jsx)(f.S,{activeTab:d,setActiveTab:h,form:b,clientType:y,contacts:i,setContacts:j,members:k,setMembers:l,documents:m,documentFiles:n,profilePreview:o,handleProfileChange:p,handleDocumentUpload:q,removeDocument:r,isEditing:!!a,addContact:()=>{j([...i,{name:"",position:"",email:"",phone:"",is_primary:0===i.length}])},updateContact:(a,b)=>{let c=[...i];c[a]={...c[a],...b},j(c)},removeContact:a=>{j(i.filter((b,c)=>c!==a))},isArchived:x}),(0,e.jsx)(g.n,{isSubmitting:c,onCancel:s,onDelete:t,onRestore:u,onPermanentDelete:v,isEditing:!!a,isArchived:x})]})}[f,g]=h.then?(await h)():h,d()}catch(a){d(a)}})},33487:(a,b,c)=>{c.d(b,{F:()=>f});var d=c(82015),e=c(76569);function f(a,b){let{toast:c}=(0,e.dj)(),[f,g]=(0,d.useState)(null),[h,i]=(0,d.useState)(!1),[j,k]=(0,d.useState)(null),[l,m]=(0,d.useState)(!1),[n,o]=(0,d.useState)({name:"",role:"",email:"",phone:"",notes:"",document_url:"",document_name:""});return{memberFormState:n,setMemberFormState:o,editingMemberIndex:f,isViewingMember:h,viewingMemberIndex:j,isAddingMember:l,addMember:()=>{m(!0),o({id:crypto.randomUUID(),name:"",role:"",email:"",phone:"",notes:"",document_url:"",document_name:"",tempId:crypto.randomUUID()})},editMember:b=>{g(b),o({...a[b],tempId:crypto.randomUUID()}),m(!0)},viewMember:a=>{k(a),i(!0)},handleCloseViewDialog:()=>{i(!1),setTimeout(()=>{k(null)},300)},cancelMemberEdit:()=>{m(!1),g(null),o({name:"",role:"",email:"",phone:"",notes:"",document_url:"",document_name:""})},saveMember:()=>{if(!n.name||n.name.trim().length<2)return void c({title:"Validation Error",description:"Member name must be at least 2 characters long",variant:"destructive"});if(n.email&&!n.email.includes("@"))return void c({title:"Validation Error",description:"Please enter a valid email address",variant:"destructive"});let d=[...a];null!==f?d[f]=n:d.push(n),b(d),m(!1),g(null),o({name:"",role:"",email:"",phone:"",notes:"",document_url:"",document_name:""}),c({title:null!==f?"Member Updated":"Member Added",description:null!==f?"The member has been updated successfully.":"A new member has been added successfully."})},deleteMember:d=>{let e=[...a];e.splice(d,1),b(e),c({title:"Member Removed",description:"The member has been removed successfully."})},handleMemberDocumentUpload:a=>{o({...n,document_url:URL.createObjectURL(a),document_name:a.name,tempFile:a})},clearMemberDocument:()=>{o({...n,document_url:void 0,document_name:void 0,tempFile:void 0})}}}},33873:a=>{a.exports=require("path")},34905:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{O:()=>k});var e=c(8732),f=c(82015),g=c(48383),h=c(95020),i=c(74952),j=a([g,h]);function k({members:a,onEdit:b,onDelete:c,onView:d}){let[j,k]=(0,f.useState)(null);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{className:"rounded-md border",children:(0,e.jsxs)(g.XI,{children:[(0,e.jsx)(g.A0,{children:(0,e.jsxs)(g.Hj,{children:[(0,e.jsx)(g.nd,{children:"Name"}),(0,e.jsx)(g.nd,{children:"Role"}),(0,e.jsx)(g.nd,{children:"Email"}),(0,e.jsx)(g.nd,{children:"Phone"}),(0,e.jsx)(g.nd,{children:"Document"})]})}),(0,e.jsx)(g.BF,{children:0===a.length?(0,e.jsx)(g.Hj,{children:(0,e.jsx)(g.nA,{colSpan:5,className:"text-center py-4 text-muted-foreground",children:"No members added yet"})}):a.map((a,b)=>(0,e.jsxs)(g.Hj,{className:"cursor-pointer hover:bg-muted/60",onClick:()=>{d(b)},children:[(0,e.jsx)(g.nA,{children:a.name}),(0,e.jsx)(g.nA,{children:a.role||"-"}),(0,e.jsx)(g.nA,{children:a.email||"-"}),(0,e.jsx)(g.nA,{children:a.phone||"-"}),(0,e.jsx)(g.nA,{children:a.document_url?(0,e.jsxs)("a",{href:a.document_url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-1 text-blue-600 hover:text-blue-800",onClick:a=>a.stopPropagation(),children:[(0,e.jsx)(i.f5X,{className:"h-4 w-4"}),(0,e.jsx)("span",{className:"text-xs truncate max-w-[100px]",children:a.document_name||"View Document"})]}):"-"})]},b))})]})}),(0,e.jsx)(h.Lt,{open:null!==j,onOpenChange:a=>!a&&k(null),children:(0,e.jsxs)(h.EO,{children:[(0,e.jsxs)(h.wd,{children:[(0,e.jsx)(h.r7,{children:"Are you sure?"}),(0,e.jsx)(h.$v,{children:"This will remove this member from the organization. This action cannot be undone."})]}),(0,e.jsxs)(h.ck,{children:[(0,e.jsx)(h.Zr,{children:"Cancel"}),(0,e.jsx)(h.Rx,{onClick:()=>{null!==j&&(c(j),k(null))},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})})]})}[g,h]=j.then?(await j)():j,d()}catch(a){d(a)}})},38661:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{Cf:()=>o,Es:()=>q,HM:()=>m,L3:()=>r,c7:()=>p,lG:()=>j,rr:()=>s,zM:()=>k});var e=c(8732),f=c(82015),g=c(13020),h=c(87092),i=a([g,h]);[g,h]=i.then?(await i)():i;let j=g.Root,k=g.Trigger,l=g.Portal,m=g.Close,n=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Overlay,{ref:c,className:(0,h.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...b}));n.displayName=g.Overlay.displayName;let o=f.forwardRef(({className:a,children:b,...c},d)=>(0,e.jsxs)(l,{children:[(0,e.jsx)(n,{}),(0,e.jsx)(g.Content,{ref:d,className:(0,h.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c,children:b})]}));o.displayName=g.Content.displayName;let p=({className:a,...b})=>(0,e.jsx)("div",{className:(0,h.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...b});p.displayName="DialogHeader";let q=({className:a,...b})=>(0,e.jsx)("div",{className:(0,h.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...b});q.displayName="DialogFooter";let r=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Title,{ref:c,className:(0,h.cn)("text-lg font-semibold leading-none tracking-tight",a),...b}));r.displayName=g.Title.displayName;let s=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Description,{ref:c,className:(0,h.cn)("text-sm text-muted-foreground",a),...b}));s.displayName=g.Description.displayName,d()}catch(a){d(a)}})},38669:(a,b,c)=>{c.d(b,{P:()=>f});var d=c(82015),e=c(10621);function f(a=[]){let[b,c]=(0,d.useState)(a),[g,h]=(0,d.useState)([]),i=async(a,b)=>{if(!b)return void h(b=>[...b,...Array.from(a)]);try{let d=await Promise.all(Array.from(a).map(a=>(0,e.A)(a,b)));return c(a=>[...a,...d]),d}catch(a){throw console.error("Document upload error:",a),a}};return{documents:b,setDocuments:c,documentFiles:g,setDocumentFiles:h,handleDocumentUpload:i,resetDocuments:(a=[])=>{c(a),h([])}}}},39621:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{m:()=>j});var e=c(8732),f=c(38661),g=c(66345),h=c(74952),i=a([f,g]);function j({member:a,isOpen:b,onClose:c,onEdit:d,onDelete:i}){return(0,e.jsx)(f.lG,{open:b,onOpenChange:a=>!a&&c(),children:(0,e.jsxs)(f.Cf,{className:"sm:max-w-md",children:[(0,e.jsx)(f.c7,{children:(0,e.jsx)(f.L3,{children:"Member Details"})}),(0,e.jsxs)("div",{className:"space-y-4 py-4",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"font-semibold text-lg",children:a.name}),a.role&&(0,e.jsx)("p",{className:"text-muted-foreground",children:a.role})]}),(0,e.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.email&&(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"font-medium",children:"Email"}),(0,e.jsx)("p",{children:a.email})]}),a.phone&&(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"font-medium",children:"Phone"}),(0,e.jsx)("p",{children:a.phone})]})]}),a.document_url&&(0,e.jsxs)("div",{className:"mt-4",children:[(0,e.jsx)("p",{className:"font-medium text-sm",children:"Document"}),(0,e.jsxs)("div",{className:"flex items-center mt-1",children:[(0,e.jsx)(h.iUU,{className:"h-4 w-4 mr-2 text-blue-500"}),(0,e.jsx)("a",{href:a.document_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline text-sm",children:a.document_name||"View Document"})]})]}),a.notes&&(0,e.jsxs)("div",{className:"mt-4",children:[(0,e.jsx)("p",{className:"font-medium text-sm",children:"Notes"}),(0,e.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:a.notes})]})]}),(0,e.jsxs)(f.Es,{className:"flex justify-between sm:justify-between",children:[(0,e.jsxs)("div",{className:"flex gap-2",children:[(0,e.jsxs)(g.$,{variant:"outline",size:"sm",onClick:d,className:"flex items-center gap-1",children:[(0,e.jsx)(h.gHP,{className:"h-4 w-4"}),"Edit"]}),(0,e.jsxs)(g.$,{variant:"destructive",size:"sm",onClick:i,className:"flex items-center gap-1",children:[(0,e.jsx)(h.TBR,{className:"h-4 w-4"}),"Delete"]})]}),(0,e.jsx)(g.$,{variant:"outline",size:"sm",onClick:c,children:"Close"})]})]})})}[f,g]=i.then?(await i)():i,d()}catch(a){d(a)}})},39655:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{BT:()=>l,Wu:()=>m,ZB:()=>k,Zp:()=>i,aR:()=>j,wL:()=>n});var e=c(8732),f=c(82015),g=c(87092),h=a([g]);g=(h.then?(await h)():h)[0];let i=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("div",{ref:c,className:(0,g.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...b}));i.displayName="Card";let j=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("div",{ref:c,className:(0,g.cn)("flex flex-col space-y-1.5 p-6",a),...b}));j.displayName="CardHeader";let k=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("h3",{ref:c,className:(0,g.cn)("text-2xl font-semibold leading-none tracking-tight",a),...b}));k.displayName="CardTitle";let l=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("p",{ref:c,className:(0,g.cn)("text-sm text-muted-foreground",a),...b}));l.displayName="CardDescription";let m=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("div",{ref:c,className:(0,g.cn)("p-6 pt-0",a),...b}));m.displayName="CardContent";let n=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("div",{ref:c,className:(0,g.cn)("flex items-center p-6 pt-0",a),...b}));n.displayName="CardFooter",d()}catch(a){d(a)}})},40191:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{q:()=>m});var e=c(8732),f=c(66345),g=c(78059),h=c(40273),i=c(87967),j=c(74952),k=c(57049),l=a([f,g,h,i,k]);function m({form:a,profilePreview:b,handleProfileChange:c,documents:d,documentFiles:l,handleDocumentUpload:m,removeDocument:n,isEditing:o}){let p=a.watch("type");return(0,e.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,e.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,e.jsx)("div",{className:"relative h-24 w-24 rounded-full border-2 border-dashed border-gray-300 flex items-center justify-center overflow-hidden",children:b?(0,e.jsx)("img",{src:b,alt:"Profile preview",className:"h-full w-full object-cover"}):(0,e.jsx)(j.KJW,{className:"h-8 w-8 text-gray-400"})}),(0,e.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,e.jsx)(g.p,{type:"file",accept:"image/*",onChange:c,className:"hidden",id:"profile-upload"}),(0,e.jsxs)("label",{htmlFor:"profile-upload",className:"flex items-center space-x-2 px-4 py-2 border rounded-md cursor-pointer hover:bg-gray-50",children:[(0,e.jsx)(j._OO,{className:"h-4 w-4"}),(0,e.jsx)("span",{children:"Upload Profile Image"})]})]})]}),(0,e.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(h.J,{htmlFor:"name",children:"Name *"}),(0,e.jsx)(g.p,{id:"name",...a.register("name")}),a.formState.errors.name&&(0,e.jsx)("p",{className:"text-sm text-destructive",children:a.formState.errors.name.message})]}),!o&&(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(h.J,{htmlFor:"type",children:"Type *"}),(0,e.jsxs)(k.l6,{value:a.getValues("type"),onValueChange:b=>{a.setValue("type",b)},children:[(0,e.jsx)(k.bq,{children:(0,e.jsx)(k.yv,{placeholder:"Select client type"})}),(0,e.jsxs)(k.gC,{children:[(0,e.jsx)(k.eb,{value:"organization",children:"Organization"}),(0,e.jsx)(k.eb,{value:"individual",children:"Individual"})]})]})]})]}),(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(h.J,{htmlFor:"description",children:"Description"}),(0,e.jsx)(i.T,{id:"description",...a.register("description")})]}),(0,e.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(h.J,{htmlFor:"website",children:"Website"}),(0,e.jsx)(g.p,{id:"website",...a.register("website")})]}),(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(h.J,{htmlFor:"address",children:"Address"}),(0,e.jsx)(g.p,{id:"address",...a.register("address")})]})]}),"individual"===p?(0,e.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(h.J,{htmlFor:"contact",children:"Contact"}),(0,e.jsx)(g.p,{id:"contact",...a.register("contact")})]}),(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(h.J,{htmlFor:"email",children:"Email"}),(0,e.jsx)(g.p,{id:"email",type:"email",...a.register("email")})]}),(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(h.J,{htmlFor:"phone",children:"Phone"}),(0,e.jsx)(g.p,{id:"phone",...a.register("phone")})]})]}):null,(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsx)(h.J,{children:"Documents"}),(0,e.jsx)(g.p,{type:"file",multiple:!0,className:"hidden",id:"document-upload",onChange:a=>a.target.files&&m(a.target.files)}),(0,e.jsxs)("label",{htmlFor:"document-upload",className:"flex items-center space-x-2 px-4 py-2 border rounded-md cursor-pointer hover:bg-gray-50",children:[(0,e.jsx)(j._OO,{className:"h-4 w-4"}),(0,e.jsx)("span",{children:"Upload Documents"})]})]}),(0,e.jsx)("div",{className:"space-y-2",children:d.length>0?d.map(a=>(0,e.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded-md",children:[(0,e.jsx)("span",{className:"text-sm truncate flex-1",children:a.name}),(0,e.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,e.jsx)("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 hover:bg-gray-100 rounded-md",children:(0,e.jsx)(j.f5X,{className:"h-4 w-4"})}),(0,e.jsx)(f.$,{type:"button",variant:"ghost",size:"icon",onClick:()=>n(a.id),children:(0,e.jsx)(j.TBR,{className:"h-4 w-4"})})]})]},a.id)):l&&l.length>0?l.map((a,b)=>(0,e.jsxs)("div",{className:"flex items-center justify-between p-2 border rounded-md",children:[(0,e.jsx)("span",{className:"text-sm truncate flex-1",children:a.name}),(0,e.jsx)("div",{className:"flex items-center",children:(0,e.jsx)("span",{className:"text-xs text-muted-foreground italic mr-2",children:"Pending upload"})})]},b)):(0,e.jsx)("div",{className:"text-sm text-muted-foreground italic",children:"No documents uploaded"})})]})]})}[f,g,h,i,k]=l.then?(await l)():l,d()}catch(a){d(a)}})},40273:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{J:()=>l});var e=c(8732),f=c(82015),g=c(20598),h=c(8938),i=c(87092),j=a([g,h,i]);[g,h,i]=j.then?(await j)():j;let k=(0,h.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Root,{ref:c,className:(0,i.cn)(k(),a),...b}));l.displayName=g.Root.displayName,d()}catch(a){d(a)}})},40361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},41415:a=>{a.exports=import("sonner")},42971:a=>{a.exports=import("zod")},43287:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{S:()=>k});var e=c(8732),f=c(68953),g=c(40191),h=c(53065),i=c(70336),j=a([f,g,h,i]);function k({activeTab:a,setActiveTab:b,form:c,clientType:d,contacts:j,setContacts:k,members:l,setMembers:m,documents:n,documentFiles:o,profilePreview:p,handleProfileChange:q,handleDocumentUpload:r,removeDocument:s,isEditing:t,addContact:u,updateContact:v,removeContact:w,isArchived:x=!1}){return(0,e.jsxs)(f.tU,{value:a,onValueChange:b,className:"w-full",children:[(0,e.jsxs)(f.j7,{className:"grid w-full grid-cols-3",children:[(0,e.jsx)(f.Xi,{value:"details",children:"Details"}),"organization"===d&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(f.Xi,{value:"contacts",children:"Contacts"}),(0,e.jsx)(f.Xi,{value:"members",children:"Members"})]})]}),(0,e.jsx)(f.av,{value:"details",children:(0,e.jsx)(g.q,{form:c,profilePreview:p,handleProfileChange:q,documents:n,documentFiles:o,handleDocumentUpload:r,removeDocument:s,isEditing:t})}),"organization"===d&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(f.av,{value:"contacts",children:(0,e.jsx)(h.A,{contacts:j,addContact:u,updateContact:v,removeContact:w})}),(0,e.jsx)(f.av,{value:"members",children:(0,e.jsx)(i.H,{members:l,setMembers:m,clientId:c.getValues().id})})]})]})}[f,g,h,i]=j.then?(await j)():j,d()}catch(a){d(a)}})},46060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},46917:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{s:()=>h});var e=c(28462),f=c(95965),g=a([e]);function h(){return(0,e.useQuery)({queryKey:["clients"],queryFn:async()=>{let[a,b]=await Promise.all([f.N.from("clients").select("*").order("name"),f.N.from("contracts").select("client_id, clients:client_id(name)").gte("end_date",new Date().toISOString().split("T")[0]).lte("start_date",new Date().toISOString().split("T")[0])]);if(a.error)throw a.error;b.error&&console.error("Error fetching active contracts:",b.error);let c=new Set(b.data?.map(a=>a.client_id)||[]);return(a.data||[]).map(a=>({...a,has_active_contract:c.has(a.id)}))},staleTime:3e5,gcTime:6e5,refetchOnWindowFocus:!1})}e=(g.then?(await g)():g)[0],d()}catch(a){d(a)}})},47860:a=>{a.exports=import("@radix-ui/react-select")},48303:a=>{a.exports=import("@radix-ui/react-tooltip")},48383:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A0:()=>j,BF:()=>k,Gg:()=>l,Hj:()=>m,XI:()=>i,nA:()=>o,nd:()=>n,r6:()=>p});var e=c(8732),f=c(82015),g=c(87092),h=a([g]);g=(h.then?(await h)():h)[0];let i=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("div",{className:"relative w-full overflow-auto rounded-lg",children:(0,e.jsx)("table",{ref:c,className:(0,g.cn)("w-full caption-bottom text-sm bg-card text-card-foreground",a),...b})}));i.displayName="Table";let j=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("thead",{ref:c,className:(0,g.cn)("[&_tr]:border-b border-border bg-muted/50",a),...b}));j.displayName="TableHeader";let k=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("tbody",{ref:c,className:(0,g.cn)("[&_tr:last-child]:border-0",a),...b}));k.displayName="TableBody";let l=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("tfoot",{ref:c,className:(0,g.cn)("border-t border-border bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...b}));l.displayName="TableFooter";let m=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("tr",{ref:c,className:(0,g.cn)("border-b border-border transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...b}));m.displayName="TableRow";let n=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("th",{ref:c,className:(0,g.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...b}));n.displayName="TableHead";let o=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("td",{ref:c,className:(0,g.cn)("p-4 align-middle text-card-foreground [&:has([role=checkbox])]:pr-0",a),...b}));o.displayName="TableCell";let p=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("caption",{ref:c,className:(0,g.cn)("mt-4 text-sm text-muted-foreground",a),...b}));p.displayName="TableCaption",d()}catch(a){d(a)}})},50339:(a,b,c)=>{c.d(b,{u:()=>e});var d=c(82015);function e(a,b){let[c,e]=(0,d.useState)([]);return{members:c,setMembers:e}}c(95965)},50802:a=>{a.exports=import("clsx")},53065:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A:()=>l});var e=c(8732),f=c(66345),g=c(78059),h=c(40273),i=c(74952),j=c(85072),k=a([f,g,h,j]);function l({contacts:a,addContact:b,updateContact:c,removeContact:d}){return(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsx)(h.J,{children:"Contact Persons"}),(0,e.jsx)(f.$,{type:"button",variant:"outline",onClick:b,children:"Add Contact Person"})]}),0===a.length?(0,e.jsxs)("div",{className:"text-center py-6 border rounded-md",children:[(0,e.jsx)(i.KJW,{className:"w-8 h-8 mx-auto text-muted-foreground mb-2"}),(0,e.jsx)("p",{className:"text-muted-foreground",children:"No contacts added yet"}),(0,e.jsx)(f.$,{variant:"outline",size:"sm",className:"mt-2",onClick:b,children:"Add Contact Person"})]}):a.map((b,k)=>(0,e.jsxs)("div",{className:"grid grid-cols-2 gap-4 p-4 border rounded-md relative",children:[(0,e.jsx)(f.$,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-2",onClick:()=>d(k),children:(0,e.jsx)(i.X,{className:"h-4 w-4"})}),(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(h.J,{children:"Name *"}),(0,e.jsx)(g.p,{value:b.name,onChange:a=>c(k,{name:a.target.value})})]}),(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(h.J,{children:"Position"}),(0,e.jsx)(g.p,{value:b.position||"",onChange:a=>c(k,{position:a.target.value})})]}),(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(h.J,{children:"Email"}),(0,e.jsx)(g.p,{type:"email",value:b.email||"",onChange:a=>c(k,{email:a.target.value})})]}),(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(h.J,{children:"Phone"}),(0,e.jsx)(g.p,{value:b.phone||"",onChange:a=>c(k,{phone:a.target.value})})]}),(0,e.jsx)("div",{className:"col-span-2",children:(0,e.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,e.jsx)(j.S,{id:`primary-contact-${k}`,checked:b.is_primary||!1,onCheckedChange:b=>{b&&a.forEach((a,b)=>{b!==k&&a.is_primary&&c(b,{is_primary:!1})}),c(k,{is_primary:!!b})}}),(0,e.jsx)("label",{htmlFor:`primary-contact-${k}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:"Primary Contact"})]})})]},k))]})}[f,g,h,j]=k.then?(await k)():k,d()}catch(a){d(a)}})},53172:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{Q:()=>h,U:()=>i});var e=c(28462),f=c(95965),g=a([e]);function h(){return(0,e.useQuery)({queryKey:["client_contacts_count"],queryFn:async()=>{let{data:a,error:b}=await f.N.from("client_contacts").select("client_id").not("client_id","is",null);if(b)throw b;let c={};return(a||[]).forEach(a=>{let b=a.client_id;c[b]=(c[b]||0)+1}),c},staleTime:3e5,gcTime:6e5,refetchOnWindowFocus:!1})}function i(){return(0,e.useQuery)({queryKey:["client_members_count"],queryFn:async()=>{try{try{await f.N.from("client_members").select("id").limit(1)}catch(a){return console.error("Error checking client_members table:",a),{}}let{data:a,error:b}=await f.N.from("client_members").select("client_id").not("client_id","is",null);if(b)return console.error("Error fetching member counts:",b),{};let c={};return(a||[]).forEach(a=>{let b=a.client_id;c[b]=(c[b]||0)+1}),c}catch(a){return console.error("Error fetching member counts:",a),{}}},staleTime:3e5,gcTime:6e5,refetchOnWindowFocus:!1})}e=(g.then?(await g)():g)[0],d()}catch(a){d(a)}})},54322:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{R:()=>l});var e=c(8732),f=c(78059),g=c(74952),h=c(57049),i=c(66345),j=c(4720),k=a([f,h,i,j]);function l({searchTerm:a,setSearchTerm:b,typeFilter:c,setTypeFilter:d,withContractsOnly:k,setWithContractsOnly:l,viewMode:m,setViewMode:n}){let o=a&&""!==a.trim()||c&&"all"!==c||k;return(0,e.jsxs)("div",{className:"space-y-4",children:[(0,e.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,e.jsxs)("div",{className:"flex-1 relative group",children:[(0,e.jsx)(g.vji,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground group-focus-within:text-primary transition-colors"}),(0,e.jsx)(f.p,{placeholder:"Search clients by name, email, phone, or address...",value:a,onChange:a=>b(a.target.value),className:"pl-9 h-11 border-border/50 focus:border-primary/50 transition-all duration-200"}),a&&(0,e.jsx)(i.$,{variant:"ghost",size:"sm",className:"absolute right-1 top-1 h-7 w-7 p-0 hover:bg-muted/50",onClick:()=>b(""),"aria-label":"Clear search",children:(0,e.jsx)(g.X,{className:"h-3 w-3"})})]}),(0,e.jsxs)("div",{className:"flex items-center gap-3",children:[(0,e.jsxs)(h.l6,{value:c,onValueChange:d,children:[(0,e.jsxs)(h.bq,{className:"w-[160px] h-11 border-border/50 focus:border-primary/50",children:[(0,e.jsx)(g.dJT,{className:"mr-2 h-4 w-4"}),(0,e.jsx)(h.yv,{placeholder:"Client Type"})]}),(0,e.jsxs)(h.gC,{children:[(0,e.jsx)(h.eb,{value:"all",children:"All Types"}),(0,e.jsx)(h.eb,{value:"organization",children:"Organizations"}),(0,e.jsx)(h.eb,{value:"individual",children:"Individuals"})]})]}),(0,e.jsxs)(i.$,{variant:k?"default":"outline",size:"sm",onClick:()=>l(!k),className:"h-11",children:[(0,e.jsx)(g.rAV,{className:"h-4 w-4 mr-2"})," With Contracts"]}),(0,e.jsxs)("div",{className:"hidden sm:flex items-center gap-1 p-1 bg-muted/30 rounded-lg border border-border/50 ml-1",children:[(0,e.jsxs)(i.$,{variant:"ghost",size:"sm",className:`h-8 px-3 rounded-md ${"list"===m?"bg-background text-foreground shadow-sm border border-border/50":"text-muted-foreground hover:text-foreground"}`,onClick:()=>n("list"),"aria-label":"List view",children:[(0,e.jsx)(g.B8B,{className:"h-4 w-4 mr-1"})," List"]}),(0,e.jsxs)(i.$,{variant:"ghost",size:"sm",className:`h-8 px-3 rounded-md ${"grid"===m?"bg-background text-foreground shadow-sm border border-border/50":"text-muted-foreground hover:text-foreground"}`,onClick:()=>n("grid"),"aria-label":"Grid view",children:[(0,e.jsx)(g.xA9,{className:"h-4 w-4 mr-1"})," Grid"]})]})]})]}),o&&(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{className:"flex flex-wrap gap-2",children:[a&&""!==a.trim()&&(0,e.jsxs)(j.E,{variant:"secondary",className:"gap-1",children:[(0,e.jsx)(g.vji,{className:"h-3 w-3"}),'Search: "',a,'"',(0,e.jsx)(i.$,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 ml-1 hover:bg-transparent",onClick:()=>b(""),children:(0,e.jsx)(g.X,{className:"h-3 w-3"})})]}),c&&"all"!==c&&(0,e.jsxs)(j.E,{variant:"secondary",className:"gap-1",children:["organization"===c?(0,e.jsx)(g.tIP,{className:"h-3 w-3"}):(0,e.jsx)(g.zWC,{className:"h-3 w-3"}),"Type:"," ","organization"===c?"Organizations":"Individuals",(0,e.jsx)(i.$,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 ml-1 hover:bg-transparent",onClick:()=>d("all"),children:(0,e.jsx)(g.X,{className:"h-3 w-3"})})]}),k&&(0,e.jsxs)(j.E,{variant:"secondary",className:"gap-1",children:[(0,e.jsx)(g.rAV,{className:"h-3 w-3"})," With Contracts",(0,e.jsx)(i.$,{variant:"ghost",size:"sm",className:"h-4 w-4 p-0 ml-1 hover:bg-transparent",onClick:()=>l(!1),children:(0,e.jsx)(g.X,{className:"h-3 w-3"})})]})]}),(0,e.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>{b(""),d("all"),l(!1)},className:"shrink-0 text-muted-foreground hover:text-foreground",children:[(0,e.jsx)(g.X,{className:"mr-2 h-4 w-4"}),"Clear All"]})]})]})}[f,h,i,j]=k.then?(await k)():k,d()}catch(a){d(a)}})},55229:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{config:()=>r,default:()=>n,getServerSideProps:()=>q,getStaticPaths:()=>p,getStaticProps:()=>o,handler:()=>z,reportWebVitals:()=>s,routeModule:()=>y,unstable_getServerProps:()=>w,unstable_getServerSideProps:()=>x,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>u,unstable_getStaticProps:()=>t});var e=c(63885),f=c(80237),g=c(81413),h=c(65611),i=c.n(h),j=c(74780),k=c(87360),l=c(12289),m=a([j,k]);[j,k]=m.then?(await m)():m;let n=(0,g.M)(k,"default"),o=(0,g.M)(k,"getStaticProps"),p=(0,g.M)(k,"getStaticPaths"),q=(0,g.M)(k,"getServerSideProps"),r=(0,g.M)(k,"config"),s=(0,g.M)(k,"reportWebVitals"),t=(0,g.M)(k,"unstable_getStaticProps"),u=(0,g.M)(k,"unstable_getStaticPaths"),v=(0,g.M)(k,"unstable_getStaticParams"),w=(0,g.M)(k,"unstable_getServerProps"),x=(0,g.M)(k,"unstable_getServerSideProps"),y=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/Clients",pathname:"/Clients",bundlePath:"",filename:""},distDir:".next-fleet",relativeProjectDir:"",components:{App:j.default,Document:i()},userland:k}),z=(0,l.U)({srcPage:"/Clients",config:r,userland:k,routeModule:y,getStaticPaths:p,getStaticProps:o,getServerSideProps:q});d()}catch(a){d(a)}})},56884:a=>{a.exports=import("react-hook-form")},57049:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{bq:()=>m,eb:()=>q,gC:()=>p,l6:()=>k,yv:()=>l});var e=c(8732),f=c(82015),g=c(47860),h=c(74952),i=c(87092),j=a([g,i]);[g,i]=j.then?(await j)():j;let k=g.Root;g.Group;let l=g.Value,m=f.forwardRef(({className:a,children:b,...c},d)=>(0,e.jsxs)(g.Trigger,{ref:d,className:(0,i.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-0 focus-visible:ring-0 focus:ring-offset-0 focus-visible:ring-offset-0 focus:border-ring focus-visible:border-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 transition-colors",a),...c,children:[b,(0,e.jsx)(g.Icon,{asChild:!0,children:(0,e.jsx)(h.yQN,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=g.Trigger.displayName;let n=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.ScrollUpButton,{ref:c,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...b,children:(0,e.jsx)(h.rXn,{className:"h-4 w-4"})}));n.displayName=g.ScrollUpButton.displayName;let o=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.ScrollDownButton,{ref:c,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...b,children:(0,e.jsx)(h.yQN,{className:"h-4 w-4"})}));o.displayName=g.ScrollDownButton.displayName;let p=f.forwardRef(({className:a,children:b,position:c="popper",...d},f)=>(0,e.jsx)(g.Portal,{children:(0,e.jsxs)(g.Content,{ref:f,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===c&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:c,...d,children:[(0,e.jsx)(n,{}),(0,e.jsx)(g.Viewport,{className:(0,i.cn)("p-1","popper"===c&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:b}),(0,e.jsx)(o,{})]})}));p.displayName=g.Content.displayName,f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Label,{ref:c,className:(0,i.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...b})).displayName=g.Label.displayName;let q=f.forwardRef(({className:a,children:b,...c},d)=>(0,e.jsxs)(g.Item,{ref:d,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...c,children:[(0,e.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,e.jsx)(g.ItemIndicator,{children:(0,e.jsx)(h.Jlk,{className:"h-4 w-4"})})}),(0,e.jsx)(g.ItemText,{children:b})]}));q.displayName=g.Item.displayName,f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Separator,{ref:c,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",a),...b})).displayName=g.Separator.displayName,d()}catch(a){d(a)}})},57312:a=>{a.exports=import("next-themes")},57533:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{X:()=>k});var e=c(8732),f=c(82015),g=c(66345),h=c(74952),i=c(40273),j=a([g,i]);function k({documentUrl:a,documentName:b,onDocumentUploaded:c,onDocumentCleared:d}){let[j,k]=(0,f.useState)(!1);return(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)(i.J,{htmlFor:"document-upload",children:"Document Upload"}),a?(0,e.jsxs)("div",{className:"flex items-center space-x-2 p-2 border rounded",children:[(0,e.jsx)(h.iUU,{className:"h-5 w-5 text-blue-500"}),(0,e.jsx)("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline flex-1 truncate",children:b||"Document"}),(0,e.jsx)(g.$,{type:"button",variant:"ghost",size:"sm",onClick:d,children:(0,e.jsx)(h.X,{className:"h-4 w-4"})})]}):(0,e.jsxs)("div",{className:`border-2 border-dashed rounded-md p-6 text-center cursor-pointer transition-colors ${j?"border-primary bg-primary/10":"border-muted"}`,onDragOver:a=>{a.preventDefault(),k(!0)},onDragLeave:()=>{k(!1)},onDrop:a=>{a.preventDefault(),k(!1);let b=a.dataTransfer.files;b&&b.length>0&&c(b[0])},onClick:()=>document.getElementById("document-upload")?.click(),children:[(0,e.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,e.jsx)(h._OO,{className:"h-8 w-8 text-muted-foreground"}),(0,e.jsxs)("div",{children:[(0,e.jsx)("p",{className:"text-sm font-medium",children:"Drag and drop a file, or click to browse"}),(0,e.jsx)("p",{className:"text-xs text-muted-foreground",children:"PDF, Word, or image files accepted"})]})]}),(0,e.jsx)("input",{id:"document-upload",type:"file",className:"hidden",onChange:a=>{let b=a.target.files;b&&b.length>0&&c(b[0])},accept:".pdf,.doc,.docx,.png,.jpg,.jpeg"})]})]})}[g,i]=j.then?(await j)():j,d()}catch(a){d(a)}})},57973:a=>{a.exports=import("@radix-ui/react-alert-dialog")},60310:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{bF:()=>g});var e=c(42971),f=a([e]);(e=(f.then?(await f)():f)[0]).z.object({id:e.z.string().optional(),name:e.z.string().min(2,"Name must be at least 2 characters"),position:e.z.string().optional(),email:e.z.string().email("Invalid email address").optional().or(e.z.literal("")),phone:e.z.string().optional(),is_primary:e.z.boolean().default(!1)}),e.z.object({id:e.z.string().optional(),name:e.z.string().min(2,"Name must be at least 2 characters"),role:e.z.string().optional(),email:e.z.string().email("Invalid email address").optional().or(e.z.literal("")),phone:e.z.string().optional(),notes:e.z.string().optional(),document_url:e.z.string().optional(),document_name:e.z.string().optional(),tempId:e.z.string().optional()});let g=e.z.object({name:e.z.string().min(2,"Name must be at least 2 characters"),type:e.z.enum(["organization","individual"]),description:e.z.string().optional(),website:e.z.string().optional(),address:e.z.string().optional(),contact:e.z.string().optional(),email:e.z.string().email("Invalid email address").optional().or(e.z.literal("")),phone:e.z.string().optional()});d()}catch(a){d(a)}})},60916:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{U:()=>h});var e=c(8732),f=c(86890),g=a([f]);function h({isEditing:a,member:b,clientId:c,onMemberChange:d,onCancel:g,onSave:h,onDocumentUploaded:i,onDocumentClear:j}){return(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsx)("div",{className:"flex items-center justify-between",children:(0,e.jsx)("h2",{className:"text-lg font-medium",children:a?"Edit Organization Member":"Add Organization Member"})}),(0,e.jsx)(f.T,{member:b,isEditing:a,onMemberChange:d,onCancel:g,onSave:h,onDocumentUploaded:i,onDocumentClear:j})]})}f=(g.then?(await g)():g)[0],d()}catch(a){d(a)}})},66635:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{n:()=>i});var e=c(8732),f=c(66345),g=c(74952),h=a([f]);function i({isSubmitting:a,onCancel:b,onDelete:c,onRestore:d,onPermanentDelete:h,isEditing:i,isArchived:j=!1}){return(0,e.jsxs)("div",{className:"flex justify-end space-x-2 pt-4 mt-4",children:[(0,e.jsx)(f.$,{type:"button",variant:"outline",onClick:b,children:"Cancel"}),i&&!j&&(0,e.jsxs)(f.$,{type:"button",variant:"outline",className:"text-amber-600 border-amber-600 hover:bg-amber-50",onClick:c,children:[(0,e.jsx)(g.Tde,{className:"h-4 w-4 mr-2"}),"Archive"]}),j&&(0,e.jsxs)(e.Fragment,{children:[d&&(0,e.jsxs)(f.$,{type:"button",variant:"outline",className:"text-green-600 border-green-600 hover:bg-green-50",onClick:d,children:[(0,e.jsx)(g.$Tc,{className:"h-4 w-4 mr-2"}),"Restore"]}),h&&(0,e.jsxs)(f.$,{type:"button",variant:"outline",className:"text-red-600 border-red-600 hover:bg-red-50",onClick:h,children:[(0,e.jsx)(g.TBR,{className:"h-4 w-4 mr-2"}),"Delete"]})]}),!j&&(0,e.jsx)(f.$,{type:"submit",disabled:a,children:a?"Saving...":i?"Update Client":"Add Client"})]})}f=(h.then?(await h)():h)[0],d()}catch(a){d(a)}})},68953:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{Xi:()=>l,av:()=>m,j7:()=>k,tU:()=>j});var e=c(8732),f=c(82015),g=c(19640),h=c(87092),i=a([g,h]);[g,h]=i.then?(await i)():i;let j=g.Root,k=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.List,{ref:c,className:(0,h.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...b}));k.displayName=g.List.displayName;let l=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Trigger,{ref:c,className:(0,h.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...b}));l.displayName=g.Trigger.displayName;let m=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Content,{ref:c,className:(0,h.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...b}));m.displayName=g.Content.displayName,d()}catch(a){d(a)}})},70135:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{X:()=>n});var e=c(82015),f=c(56884),g=c(98825),h=c(60310),i=c(15566),j=c(50339),k=c(38669),l=c(30912),m=a([f,g,h]);function n(a){let[b,c]=(0,e.useState)(!1),d=(0,f.useForm)({resolver:(0,g.zodResolver)(h.bF),defaultValues:{name:a?.name||"",type:a?.type||"organization",description:a?.description||"",website:a?.website||"",address:a?.address||"",contact:a?.contact||"",email:a?.email||"",phone:a?.phone||""}}),m=d.watch("type"),{contacts:n,setContacts:o}=(0,i.Y)(a?.id,m),{members:p,setMembers:q}=(0,j.u)(a?.id,m),{documents:r,setDocuments:s,documentFiles:t,setDocumentFiles:u,handleDocumentUpload:v,resetDocuments:w}=(0,k.P)(a?.documents||[]),{profileFile:x,profilePreview:y,handleProfileChange:z,uploadProfile:A,resetProfile:B}=(0,l.U)(a?.profile_image_url),C=(0,e.useCallback)(b=>a?.id?v(b,a.id):v(b),[a?.id,v]),D=(0,e.useCallback)(async(a,b)=>{try{return await v(a,b)}catch(a){throw console.error("Error uploading document:",a),a}},[v]);return{form:d,isSubmitting:b,setIsSubmitting:c,contacts:n,setContacts:o,members:p,setMembers:q,documents:r,setDocuments:s,documentFiles:t,setDocumentFiles:u,profileFile:x,profilePreview:y,handleProfileChange:z,handleDocumentUpload:C,uploadProfile:A,uploadClientDocument:D}}[f,g,h]=m.then?(await m)():m,d()}catch(a){d(a)}})},70336:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{H:()=>l});var e=c(8732),f=c(34905),g=c(60916),h=c(1563),i=c(15488),j=c(33487),k=a([f,g,h,i]);function l({members:a,setMembers:b,clientId:c}){let{memberFormState:d,setMemberFormState:k,editingMemberIndex:l,isViewingMember:m,viewingMemberIndex:n,isAddingMember:o,addMember:p,editMember:q,viewMember:r,handleCloseViewDialog:s,cancelMemberEdit:t,saveMember:u,deleteMember:v,handleMemberDocumentUpload:w,clearMemberDocument:x}=(0,j.F)(a,b);return(0,e.jsxs)("div",{className:"space-y-4 mt-4",children:[o?(0,e.jsx)(g.U,{isEditing:null!==l,member:d,clientId:c,onMemberChange:k,onCancel:t,onSave:u,onDocumentUploaded:w,onDocumentClear:x}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.X,{onAdd:p}),(0,e.jsx)(f.O,{members:a,onEdit:q,onDelete:v,onView:r})]}),(0,e.jsx)(h.n,{isViewing:m,member:null!==n&&n<a.length?a[n]:null,onClose:s,onEdit:()=>{s(),null!==n&&q(n)},onDelete:()=>{s(),null!==n&&v(n)}})]})}[f,g,h,i]=k.then?(await k)():k,d()}catch(a){d(a)}})},70651:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{D:()=>i});var e=c(8732),f=c(95020),g=c(74952),h=a([f]);function i({clientName:a,isOpen:b,onOpenChange:c,onConfirm:d,error:h,archiveMode:i=!1,permanentDelete:j=!1,isSubmitting:k=!1}){let l=j?`This will permanently delete ${a} and all associated data. This action CANNOT be undone.`:i?`This will move ${a} to the archive. You can restore it later if needed.`:`This will delete ${a} and all of their data. This action cannot be undone.`;return(0,e.jsx)(f.Lt,{open:b,onOpenChange:c,children:(0,e.jsxs)(f.EO,{children:[(0,e.jsxs)(f.wd,{children:[(0,e.jsx)(f.r7,{children:j?"Permanently delete this client?":i?"Are you sure you want to archive this client?":"Are you sure you want to delete this client?"}),(0,e.jsx)(f.$v,{children:h?(0,e.jsxs)("div",{className:"flex items-start gap-2 p-3 bg-destructive/10 text-destructive rounded-md",children:[(0,e.jsx)(g.RIJ,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),(0,e.jsx)("span",{children:h})]}):(0,e.jsx)(e.Fragment,{children:l})})]}),(0,e.jsxs)(f.ck,{children:[(0,e.jsx)(f.Zr,{disabled:k,children:"Cancel"}),!h&&(0,e.jsx)(f.Rx,{onClick:d,className:j?"bg-red-600 text-white hover:bg-red-700":i?"bg-amber-600 text-white hover:bg-amber-700":"bg-destructive text-destructive-foreground hover:bg-destructive/90",disabled:k,children:k?"Processing...":j?"Delete Permanently":i?"Archive":"Delete"})]})]})})}f=(h.then?(await h)():h)[0],d()}catch(a){d(a)}})},75979:a=>{a.exports=import("tailwind-merge")},77784:(a,b,c)=>{c.d(b,{d:()=>g});var d=c(82015),e=c(95965),f=c(76569);function g(){let{toast:a}=(0,f.dj)();return{handleSubmit:(0,d.useCallback)(async({client:b,values:c,profileUploadFn:d,documents:f,documentFiles:g,contacts:h,members:i,uploadDocumentFn:j,setIsSubmitting:k,onSuccess:l,silentUpdate:m=!1})=>{try{let k=b?.profile_image_url||null;c.profile_image_file&&(k=await d(c.profile_image_file));let n={name:c.name,type:c.type,description:c.description,website:c.website,address:c.address,contact:c.contact,email:c.email,phone:c.phone,profile_image_url:k,documents:f,is_archived:b?.is_archived||!1};console.info("Updating client with values:",n);let o=b?.id;if(o){let{error:b}=await e.N.from("clients").update(n).eq("id",o);if(b)throw b;m||a({title:"Client updated",description:`${c.name} has been updated successfully.`})}else{let{data:b,error:d}=await e.N.from("clients").insert(n).select("id").single();if(d)throw d;if(b&&"id"in b)o=b.id;else throw Error("Failed to get client ID from insert operation");a({title:"Client created",description:`${c.name} has been created successfully.`})}if("organization"===c.type){if(console.log("Processing organization contacts:",h),o){let{error:a}=await e.N.from("client_contacts").delete().eq("client_id",o);if(a)throw console.error("Error deleting contacts:",a),a}if(h&&h.length>0){let a=h.map(a=>({name:a.name,position:a.position||null,email:a.email||null,phone:a.phone||null,is_primary:a.is_primary||!1,client_id:o})),{error:b}=await e.N.from("client_contacts").insert(a);if(b)throw console.error("Error inserting contacts:",b),b;console.info("Saved client contacts:",a.length)}}if(i&&i.length>0){if(console.log("Processing client members:",i),o){let{error:a}=await e.N.from("client_members").delete().eq("client_id",o);if(a)throw console.error("Error deleting existing members:",a),a}let a=await Promise.all(i.map(async a=>{if(!a.tempId||!g[a.tempId])return{name:a.name,role:a.role||null,email:a.email||null,phone:a.phone||null,notes:a.notes||null,document_url:a.document_url||null,document_name:a.document_name||null,client_id:o};let b=g[a.tempId],c=b.name,d=await j(b,c);return{name:a.name,role:a.role||null,email:a.email||null,phone:a.phone||null,notes:a.notes||null,document_url:d,document_name:c,client_id:o}}));console.info("Inserting members:",a);let{error:b}=await e.N.from("client_members").insert(a);if(b)throw console.error("Error inserting members:",b),b}return l&&l(),!0}catch(b){return console.error("Error saving client:",b),a({title:"Error",description:`Failed to save client: ${b.message}`,variant:"destructive"}),!1}finally{k(!1)}},[a])}}},77808:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{F:()=>j});var e=c(99167),f=c(46917),g=c(53172),h=c(78790),i=a([e,f,g]);function j(){let{data:a,isLoading:b}=(0,f.s)(),{data:c,isLoading:d}=(0,g.Q)(),{data:i,isLoading:j}=(0,g.U)();(0,e._)();let{searchTerm:k,setSearchTerm:l,typeFilter:m,setTypeFilter:n,withContractsOnly:o,setWithContractsOnly:p,activeTab:q,setActiveTab:r,activeClients:s,archivedClients:t,filteredActiveClients:u,filteredArchivedClients:v}=(0,h.B)(a);return{clients:a,clientsLoading:b||d||j,contactCounts:c,memberCounts:i,searchTerm:k,setSearchTerm:l,typeFilter:m,setTypeFilter:n,withContractsOnly:o,setWithContractsOnly:p,activeTab:q,setActiveTab:r,activeClients:s,archivedClients:t,filteredActiveClients:u,filteredArchivedClients:v}}[e,f,g]=i.then?(await i)():i,d()}catch(a){d(a)}})},78059:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{p:()=>i});var e=c(8732),f=c(82015),g=c(87092),h=a([g]);g=(h.then?(await h)():h)[0];let i=f.forwardRef(({className:a,type:b,onAddItem:c,onRemoveItem:d,showAddButton:f,showRemoveButton:h,addButtonLabel:i,removeButtonLabel:j,...k},l)=>(0,e.jsxs)("div",{className:f||h?"flex items-center gap-2":"",children:[(0,e.jsx)("input",{type:b,className:(0,g.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus:outline-none focus:ring-0 focus-visible:ring-0 focus:ring-offset-0 focus-visible:ring-offset-0 focus:border-ring focus-visible:border-ring disabled:cursor-not-allowed disabled:opacity-50 transition-colors",a),ref:l,onKeyDown:c?a=>{"Enter"===a.key&&c&&(a.preventDefault(),c())}:void 0,...k}),f&&c&&(0,e.jsx)("button",{type:"button",className:"inline-flex h-10 items-center justify-center rounded-md bg-primary px-3 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90",onClick:c,children:i||"Add"}),h&&d&&(0,e.jsx)("button",{type:"button",className:"inline-flex h-10 items-center justify-center rounded-md bg-destructive px-3 py-2 text-sm font-medium text-destructive-foreground hover:bg-destructive/90",onClick:d,children:j||"Remove"})]}));i.displayName="Input",d()}catch(a){d(a)}})},78790:(a,b,c)=>{c.d(b,{B:()=>e});var d=c(82015);function e(a=[]){let[b,c]=(0,d.useState)(""),[f,g]=(0,d.useState)("all"),[h,i]=(0,d.useState)("active"),[j,k]=(0,d.useState)(!1),l=a?.filter(a=>!a.is_archived)||[],m=a?.filter(a=>a.is_archived)||[],n=a=>a.filter(a=>{let c=a.name.toLowerCase().includes(b.toLowerCase())||a.contact?.toLowerCase().includes(b.toLowerCase())||a.email?.toLowerCase().includes(b.toLowerCase()),d="all"===f||a.type===f,e=!j||!!a.has_active_contract;return c&&d&&e}),o=n(l),p=n(m);return{searchTerm:b,setSearchTerm:c,typeFilter:f,setTypeFilter:g,activeTab:h,setActiveTab:i,withContractsOnly:j,setWithContractsOnly:k,activeClients:l,archivedClients:m,filteredActiveClients:o,filteredArchivedClients:p}}},78835:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{S:()=>o});var e=c(8732),f=c(68953),g=c(4720),h=c(98929),i=c(66345),j=c(74952),k=c(39655),l=c(91416),m=a([f,g,h,i,k,l]);[f,g,h,i,k,l]=m.then?(await m)():m;let p=(a,b,c)=>[...a].sort((a,d)=>{let e=0;switch(b){case"name":default:e=a.name.localeCompare(d.name);break;case"created_at":e=new Date(a.created_at||0).getTime()-new Date(d.created_at||0).getTime();break;case"type":e=a.type.localeCompare(d.type);break;case"activity":e=a.has_active_contract&&!d.has_active_contract?-1:!a.has_active_contract&&d.has_active_contract?1:a.name.localeCompare(d.name)}return"desc"===c?-e:e});function n({client:a,contactsCount:b,membersCount:c,onClick:d,onRestore:f,onDelete:h,isArchived:m}){return(0,e.jsx)(k.Zp,{className:`transition-all hover:shadow-md ${m?"opacity-75":""}`,children:(0,e.jsx)(k.Wu,{className:"p-4",children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{className:"flex items-center gap-4 flex-1 cursor-pointer",onClick:()=>d(a),children:[(0,e.jsxs)(l.eu,{className:"h-12 w-12",children:[a.profile_image_url?(0,e.jsx)(l.BK,{src:a.profile_image_url,alt:a.name,className:"object-cover"}):null,(0,e.jsx)(l.q5,{children:a.name.split(" ").map(a=>a[0]).join("").toUpperCase().substring(0,2)})]}),(0,e.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,e.jsx)("h3",{className:"font-semibold text-base truncate",children:a.name}),a.has_active_contract&&(0,e.jsx)(g.E,{className:"bg-green-500 text-white text-xs",children:"Active Contract"}),(0,e.jsx)(g.E,{variant:"outline",className:"text-xs",children:"organization"===a.type?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(j.tIP,{className:"w-3 h-3 mr-1"})," Organization"]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(j.zWC,{className:"w-3 h-3 mr-1"})," Individual"]})})]}),(0,e.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[a.email&&(0,e.jsx)("span",{className:"truncate",children:a.email}),a.phone&&(0,e.jsx)("span",{children:a.phone}),a.address&&(0,e.jsx)("span",{className:"truncate",children:a.address})]}),"organization"===a.type&&(b||c)&&(0,e.jsxs)("div",{className:"flex items-center gap-3 mt-2 text-xs text-muted-foreground",children:[void 0!==b&&(0,e.jsxs)("span",{children:[b," contact",1!==b?"s":""]}),void 0!==c&&(0,e.jsxs)("span",{children:[c," member",1!==c?"s":""]})]})]})]}),m&&f&&h&&(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsxs)(i.$,{variant:"outline",size:"sm",onClick:b=>{b.stopPropagation(),f(a)},children:[(0,e.jsx)(j.$Tc,{className:"h-4 w-4 mr-1"}),"Restore"]}),(0,e.jsx)(i.$,{variant:"outline",size:"sm",onClick:b=>{b.stopPropagation(),h(a)},className:"text-destructive hover:text-destructive",children:(0,e.jsx)(j.TBR,{className:"h-4 w-4"})})]})]})})})}function o({activeTab:a,setActiveTab:b,activeClients:c,archivedClients:d,filteredActiveClients:l,filteredArchivedClients:m,contactCounts:o,memberCounts:q,onClientClick:r,onClientRestore:s,onClientDelete:t,viewMode:u="grid",sortBy:v="name",sortOrder:w="asc"}){let x=p(l,v,w),y=p(m,v,w);return(0,e.jsxs)(f.tU,{defaultValue:"active",value:a,onValueChange:b,children:[(0,e.jsxs)(f.j7,{className:"grid w-full grid-cols-2",children:[(0,e.jsxs)(f.Xi,{value:"active",className:"flex items-center gap-2",children:[(0,e.jsx)(j.KqI,{className:"h-4 w-4"}),"Active",(0,e.jsx)(g.E,{variant:"secondary",className:"ml-1",children:c.length})]}),(0,e.jsxs)(f.Xi,{value:"archived",className:"flex items-center gap-2",children:[(0,e.jsx)(j.VvS,{className:"h-4 w-4"}),"Archived",(0,e.jsx)(g.E,{variant:"secondary",className:"ml-1",children:d.length})]})]}),(0,e.jsx)(f.av,{value:"active",className:"mt-6",children:x.length>0?"grid"===u?(0,e.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:x.map(a=>(0,e.jsx)(h.g,{client:a,contactsCount:"organization"===a.type?o?.[a.id]:void 0,membersCount:"organization"===a.type?q?.[a.id]:void 0,onClick:r,showActiveContractBadge:!0},a.id))}):(0,e.jsx)("div",{className:"space-y-4",children:x.map(a=>(0,e.jsx)(n,{client:a,contactsCount:"organization"===a.type?o?.[a.id]:void 0,membersCount:"organization"===a.type?q?.[a.id]:void 0,onClick:r},a.id))}):(0,e.jsx)(k.Zp,{className:"text-center py-12",children:(0,e.jsx)(k.Wu,{children:(0,e.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,e.jsx)("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center",children:(0,e.jsx)(j.zWC,{className:"h-8 w-8 text-muted-foreground"})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"font-semibold text-lg",children:"No active clients found"}),(0,e.jsx)("p",{className:"text-muted-foreground",children:0===l.length&&c.length>0?"Try adjusting your search or filter criteria.":"Add your first client to get started."})]})]})})})}),(0,e.jsx)(f.av,{value:"archived",className:"mt-6",children:y.length>0?"grid"===u?(0,e.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:y.map(a=>(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)(h.g,{client:a,contactsCount:"organization"===a.type?o?.[a.id]:void 0,membersCount:"organization"===a.type?q?.[a.id]:void 0,onClick:r}),(0,e.jsxs)("div",{className:"absolute top-2 right-2 flex gap-1",children:[s&&(0,e.jsx)(i.$,{variant:"outline",size:"sm",onClick:b=>{b.stopPropagation(),s(a)},className:"h-8 w-8 p-0",children:(0,e.jsx)(j.$Tc,{className:"h-4 w-4"})}),t&&(0,e.jsx)(i.$,{variant:"outline",size:"sm",onClick:b=>{b.stopPropagation(),t(a)},className:"h-8 w-8 p-0 text-destructive hover:text-destructive",children:(0,e.jsx)(j.TBR,{className:"h-4 w-4"})})]})]},a.id))}):(0,e.jsx)("div",{className:"space-y-4",children:y.map(a=>(0,e.jsx)(n,{client:a,contactsCount:"organization"===a.type?o?.[a.id]:void 0,membersCount:"organization"===a.type?q?.[a.id]:void 0,onClick:r,onRestore:s,onDelete:t,isArchived:!0},a.id))}):(0,e.jsx)(k.Zp,{className:"text-center py-12",children:(0,e.jsx)(k.Wu,{children:(0,e.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,e.jsx)("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center",children:(0,e.jsx)(j.VvS,{className:"h-8 w-8 text-muted-foreground"})}),(0,e.jsxs)("div",{children:[(0,e.jsx)("h3",{className:"font-semibold text-lg",children:"No archived clients found"}),(0,e.jsx)("p",{className:"text-muted-foreground",children:0===m.length&&d.length>0?"Try adjusting your search or filter criteria.":"Archived clients will appear here."})]})]})})})})]})}d()}catch(a){d(a)}})},81251:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{H:()=>i});var e=c(8732),f=c(38661),g=c(32205),h=a([f,g]);function i({client:a,dialogTitle:b,form:c,isSubmitting:d,activeTab:h,setActiveTab:i,contacts:j,setContacts:k,members:l,setMembers:m,documents:n,documentFiles:o,profilePreview:p,handleProfileChange:q,handleDocumentUpload:r,removeDocument:s,onOpenChange:t,onDelete:u,onRestore:v,onPermanentDelete:w,handleFormSubmit:x,isArchived:y=!1}){return(0,e.jsxs)(f.Cf,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,e.jsxs)(f.c7,{children:[(0,e.jsx)(f.L3,{children:b}),(0,e.jsx)(f.rr,{children:y?"View archived client details. You can restore this client or permanently delete it.":a?"Edit client details, contacts, and related information.":"Fill in the details to add a new client."})]}),(0,e.jsx)(g.M,{client:a,form:c,isSubmitting:d,activeTab:h,setActiveTab:i,contacts:j,setContacts:k,members:l,setMembers:m,documents:n,documentFiles:o,profilePreview:p,handleProfileChange:q,handleDocumentUpload:r,removeDocument:s,onCancel:()=>t(!1),onDelete:u,onRestore:v,onPermanentDelete:w,handleSubmitForm:x,isArchived:y})]})}[f,g]=h.then?(await h)():h,d()}catch(a){d(a)}})},82015:a=>{a.exports=require("react")},85072:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{S:()=>k});var e=c(8732),f=c(82015),g=c(25665),h=c(74952),i=c(87092),j=a([g,i]);[g,i]=j.then?(await j)():j;let k=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Root,{ref:c,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus:outline-none focus:ring-0 focus-visible:ring-0 focus:ring-offset-0 focus-visible:ring-offset-0 focus:border-ring focus-visible:border-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground transition-colors",a),...b,children:(0,e.jsx)(g.Indicator,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,e.jsx)(h.Jlk,{className:"h-4 w-4"})})}));k.displayName=g.Root.displayName,d()}catch(a){d(a)}})},85683:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{a:()=>i});var e=c(8732),f=c(87967),g=c(40273),h=a([f,g]);function i({value:a,onChange:b}){return(0,e.jsxs)("div",{className:"col-span-2 space-y-2",children:[(0,e.jsx)(g.J,{children:"Notes"}),(0,e.jsx)(f.T,{value:a||"",onChange:b,rows:3})]})}[f,g]=h.then?(await h)():h,d()}catch(a){d(a)}})},86890:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{T:()=>m});var e=c(8732);c(82015);var f=c(56884),g=c(91995),h=c(8958),i=c(85683),j=c(12301),k=c(57533),l=a([f,g,h,i,j,k]);function m({member:a,isEditing:b,onMemberChange:c,onCancel:d,onSave:l,onDocumentUploaded:m,onDocumentClear:n}){let o=(0,f.useForm)({defaultValues:a});return(0,e.jsxs)("form",{onSubmit:o.handleSubmit(l),className:"space-y-6",children:[(0,e.jsx)(g.M,{isEditing:b,onCancel:d}),(0,e.jsxs)("div",{className:"grid gap-6",children:[(0,e.jsx)(h.I,{member:a,onChange:{handleNameChange:b=>{c({...a,name:b.target.value})},handleRoleChange:b=>{c({...a,role:b.target.value})},handleEmailChange:b=>{c({...a,email:b.target.value})},handlePhoneChange:b=>{c({...a,phone:b.target.value})}}}),(0,e.jsx)(k.X,{documentUrl:a.document_url,documentName:a.document_name,onDocumentUploaded:m,onDocumentCleared:n}),(0,e.jsx)(i.a,{value:a.notes||"",onChange:b=>{c({...a,notes:b.target.value})}})]}),(0,e.jsx)(j.I,{isEditing:b,onCancel:d,onSave:l})]})}[f,g,h,i,j,k]=l.then?(await l)():l,d()}catch(a){d(a)}})},87360:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>r});var e=c(8732),f=c(82015),g=c(66345),h=c(74952),i=c(9285),j=c(76569),k=c(28462),l=c(54322),m=c(78835),n=c(77808),o=c(70651),p=c(95965),q=a([g,i,k,l,m,n,o]);function r(){let{toast:a}=(0,j.dj)(),b=(0,k.useQueryClient)(),[c,d]=(0,f.useState)(!1),[q,r]=(0,f.useState)(null),[s,t]=(0,f.useState)(!1),[u,v]=(0,f.useState)(null),[w,x]=(0,f.useState)(!1),[y,z]=(0,f.useState)(null),[A,B]=(0,f.useState)("grid"),{clientsLoading:C,searchTerm:D,setSearchTerm:E,typeFilter:F,setTypeFilter:G,withContractsOnly:H,setWithContractsOnly:I,activeTab:J,setActiveTab:K,activeClients:L,archivedClients:M,filteredActiveClients:N,filteredArchivedClients:O,contactCounts:P,memberCounts:Q}=(0,n.F)(),R=async c=>{try{let{error:d}=await p.N.from("clients").update({is_archived:!1}).eq("id",c.id);if(d)throw d;b.invalidateQueries({queryKey:["clients"]}),a({title:"Client restored",description:`${c.name} has been restored.`})}catch(b){console.error("Error restoring client:",b),a({title:"Error",description:"Failed to restore client. Please try again.",variant:"destructive"})}},S=async()=>{if(u){x(!0),z(null);try{let{error:c}=await p.N.from("clients").delete().eq("id",u.id);if(c)throw c;t(!1),v(null),b.invalidateQueries({queryKey:["clients"]}),a({title:"Client deleted",description:"The client has been completely removed from the system.",variant:"destructive"})}catch(a){console.error("Error deleting client:",a),z(a.message||"Failed to delete client. It might be referenced in other records.")}finally{x(!1)}}},T=async()=>{try{let b="active"===J?N:O,c=["Name,Type,Email,Phone,Address,Website,Description,Status",...b.map(a=>[`"${a.name}"`,a.type,`"${a.email||""}"`,`"${a.phone||""}"`,`"${a.address||""}"`,`"${a.website||""}"`,`"${a.description||""}"`,a.has_active_contract?"Active Contract":"No Active Contract"].join(","))].join("\n"),d=new Blob([c],{type:"text/csv"}),e=window.URL.createObjectURL(d),f=document.createElement("a");f.href=e,f.download=`clients-${J}-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(f),f.click(),document.body.removeChild(f),window.URL.revokeObjectURL(e),a({title:"Export completed",description:`${b.length} clients exported successfully.`})}catch(b){console.error("Error exporting clients:",b),a({title:"Export failed",description:"Failed to export clients. Please try again.",variant:"destructive"})}};return C?(0,e.jsx)("div",{className:"min-h-screen bg-background",children:(0,e.jsx)("div",{className:"p-4 px-6 space-y-6",children:(0,e.jsx)("div",{className:"border-b border-border pb-4 pt-4",children:(0,e.jsx)("div",{children:(0,e.jsx)("h1",{className:"text-2xl font-semibold text-foreground",children:"Clients"})})})})}):(0,e.jsx)("div",{className:"min-h-screen bg-background",children:(0,e.jsxs)("div",{className:"p-4 px-6 space-y-6",children:[(0,e.jsx)("div",{className:"border-b border-border pb-4 pt-4",children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsx)("div",{children:(0,e.jsx)("h1",{className:"text-2xl font-semibold text-foreground",children:"Clients"})}),(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsxs)(g.$,{variant:"outline",size:"sm",onClick:T,children:[(0,e.jsx)(h.nmj,{className:"mr-2 h-4 w-4"})," Export"]}),(0,e.jsxs)(g.$,{onClick:()=>{r(null),d(!0)},children:[(0,e.jsx)(h.FWt,{className:"mr-2 h-4 w-4"})," Add Client"]})]})]})}),(0,e.jsx)(l.R,{searchTerm:D,setSearchTerm:E,typeFilter:F,setTypeFilter:G,withContractsOnly:H,setWithContractsOnly:I,viewMode:A,setViewMode:B}),(0,e.jsx)(m.S,{activeTab:J,setActiveTab:K,activeClients:L,archivedClients:M,filteredActiveClients:N,filteredArchivedClients:O,contactCounts:P,memberCounts:Q,onClientClick:a=>{r(a),d(!0)},onClientRestore:R,onClientDelete:a=>{v(a),t(!0),z(null)},viewMode:A,sortBy:"name",sortOrder:"asc"}),c&&(0,e.jsx)(i.i,{open:c,onOpenChange:a=>{d(a),a||(b.invalidateQueries({queryKey:["clients"]}),b.invalidateQueries({queryKey:["client_contacts_count"]}),b.invalidateQueries({queryKey:["client_members_count"]}),r(null))},client:q,onClientDeleted:()=>{b.invalidateQueries({queryKey:["clients"]}),d(!1),r(null),a({title:"Client deleted",description:"The client has been completely removed from the system.",variant:"destructive"})}}),s&&(0,e.jsx)(o.D,{clientName:u?.name,isOpen:s,onOpenChange:t,onConfirm:S,error:y,isSubmitting:w,permanentDelete:!0})]})})}[g,i,k,l,m,n,o]=q.then?(await q)():q,d()}catch(a){d(a)}})},87967:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{T:()=>i});var e=c(8732),f=c(82015),g=c(87092),h=a([g]);g=(h.then?(await h)():h)[0];let i=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("textarea",{className:(0,g.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-0 focus-visible:ring-0 focus:ring-offset-0 focus-visible:ring-offset-0 focus:border-ring focus-visible:border-ring disabled:cursor-not-allowed disabled:opacity-50 transition-colors",a),ref:c,...b}));i.displayName="Textarea",d()}catch(a){d(a)}})},91416:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{BK:()=>k,eu:()=>j,q5:()=>l});var e=c(8732),f=c(82015),g=c(92549),h=c(87092),i=a([g,h]);[g,h]=i.then?(await i)():i;let j=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Root,{ref:c,className:(0,h.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...b}));j.displayName=g.Root.displayName;let k=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Image,{ref:c,className:(0,h.cn)("aspect-square h-full w-full",a),...b}));k.displayName=g.Image.displayName;let l=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Fallback,{ref:c,className:(0,h.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...b}));l.displayName=g.Fallback.displayName,d()}catch(a){d(a)}})},91995:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{M:()=>i});var e=c(8732),f=c(66345),g=c(74952),h=a([f]);function i({isEditing:a,onCancel:b}){return(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsx)("h3",{className:"text-lg font-medium",children:a?"Edit Member":"Add New Member"}),(0,e.jsx)(f.$,{type:"button",variant:"ghost",size:"icon",onClick:b,children:(0,e.jsx)(g.X,{className:"h-4 w-4"})})]})}f=(h.then?(await h)():h)[0],d()}catch(a){d(a)}})},92549:a=>{a.exports=import("@radix-ui/react-avatar")},93939:a=>{a.exports=require("@supabase/supabase-js")},95020:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{$v:()=>r,EO:()=>n,Lt:()=>k,Rx:()=>s,Zr:()=>t,ck:()=>p,r7:()=>q,wd:()=>o});var e=c(8732),f=c(82015),g=c(57973),h=c(87092),i=c(66345),j=a([g,h,i]);[g,h,i]=j.then?(await j)():j;let k=g.Root;g.Trigger;let l=g.Portal,m=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Overlay,{className:(0,h.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...b,ref:c}));m.displayName=g.Overlay.displayName;let n=f.forwardRef(({className:a,...b},c)=>(0,e.jsxs)(l,{children:[(0,e.jsx)(m,{}),(0,e.jsx)(g.Content,{ref:c,className:(0,h.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...b})]}));n.displayName=g.Content.displayName;let o=({className:a,...b})=>(0,e.jsx)("div",{className:(0,h.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...b});o.displayName="AlertDialogHeader";let p=({className:a,...b})=>(0,e.jsx)("div",{className:(0,h.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...b});p.displayName="AlertDialogFooter";let q=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Title,{ref:c,className:(0,h.cn)("text-lg font-semibold",a),...b}));q.displayName=g.Title.displayName;let r=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Description,{ref:c,className:(0,h.cn)("text-sm text-muted-foreground",a),...b}));r.displayName=g.Description.displayName;let s=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Action,{ref:c,className:(0,h.cn)((0,i.r)(),a),...b}));s.displayName=g.Action.displayName;let t=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Cancel,{ref:c,className:(0,h.cn)((0,i.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...b}));t.displayName=g.Cancel.displayName,d()}catch(a){d(a)}})},96717:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{v:()=>j});var e=c(82015),f=c(95965),g=c(28462),h=c(76569),i=a([g]);function j(a,b,c){let{toast:d}=(0,h.dj)(),i=(0,g.useQueryClient)(),[j,k]=(0,e.useState)("details"),[l,m]=(0,e.useState)(!1),[n,o]=(0,e.useState)(null),[p,q]=(0,e.useState)(!1),[r,s]=(0,e.useState)(null),[t,u]=(0,e.useState)(!1),v=(0,e.useCallback)(async()=>{if(a)try{o(null);let{error:e}=await f.N.from("clients").update({is_archived:!0}).eq("id",a.id);if(e)throw e;m(!1),b(!1),d({title:"Client archived",description:`${a.name} has been moved to the archive.`,variant:"default"}),i.invalidateQueries({queryKey:["clients"]}),c&&c()}catch(a){console.error("Error archiving client:",a),o("There was an error archiving this client. Please try again.")}},[a,b,d,i,c]),w=(0,e.useCallback)(async()=>{if(a)try{let{error:c}=await f.N.from("clients").update({is_archived:!1}).eq("id",a.id);if(c)throw c;b(!1),d({title:"Client restored",description:`${a.name} has been restored from the archive.`}),i.invalidateQueries({queryKey:["clients"]})}catch(a){console.error("Error restoring client:",a),d({title:"Error",description:"There was an error restoring this client. Please try again.",variant:"destructive"})}},[a,b,d,i]),x=(0,e.useCallback)(async()=>{if(a)try{u(!0),s(null);let{error:e}=await f.N.from("clients").delete().eq("id",a.id);if(e)throw e;q(!1),b(!1),d({title:"Client deleted",description:`${a.name} has been completely removed from the system.`,variant:"destructive"}),i.invalidateQueries({queryKey:["clients"]}),c&&c()}catch(a){console.error("Error permanently deleting client:",a),s(a.message||"There was an error deleting this client. It might be referenced in other records.")}finally{u(!1)}},[a,b,d,i,c]);return{activeTab:j,setActiveTab:k,showDeleteConfirm:l,setShowDeleteConfirm:m,deletionError:n,handleDelete:v,handleRestore:w,showPermanentDeleteConfirm:p,setShowPermanentDeleteConfirm:q,permanentDeletionError:r,setPermanentDeletionError:s,isPerformingAction:t,setIsPerformingAction:u,handlePermanentDelete:x}}g=(i.then?(await i)():i)[0],d()}catch(a){d(a)}})},98825:a=>{a.exports=import("@hookform/resolvers/zod")},98929:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{g:()=>k});var e=c(8732),f=c(39655),g=c(91416),h=c(4720),i=c(74952),j=a([f,g,h]);function k({client:a,contactsCount:b,membersCount:c,onClick:d,showActiveContractBadge:j}){var k;let l="organization"===a.type?"h-16 w-16 rounded-xl":"h-16 w-16 rounded-full",m="organization"===a.type&&(void 0!==b||void 0!==c);return(0,e.jsxs)(f.Zp,{className:"cursor-pointer transition-all duration-200 hover:shadow-md group",onClick:()=>d(a),children:[(0,e.jsxs)(f.aR,{className:"flex flex-row items-start gap-4 pb-3",children:[(0,e.jsx)("div",{className:"relative",children:(0,e.jsxs)(g.eu,{className:l,children:[a.profile_image_url?(0,e.jsx)(g.BK,{src:a.profile_image_url,alt:a.name,className:"object-cover"}):null,(0,e.jsx)(g.q5,{className:"bg-muted text-foreground/80 font-semibold",children:a.name.split(" ").map(a=>a[0]).join("").toUpperCase().substring(0,2)})]})}),(0,e.jsx)("div",{className:"space-y-2 flex-1 min-w-0",children:(0,e.jsxs)("div",{className:"space-y-1",children:[(0,e.jsx)(f.ZB,{className:"text-lg font-semibold group-hover:text-foreground transition-colors duration-200 line-clamp-2",children:a.name}),(0,e.jsx)("div",{className:"flex items-center gap-2 flex-wrap",children:(0,e.jsx)(h.E,{variant:"outline",className:"text-xs font-medium",children:"organization"===a.type?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.t6i,{className:"h-3 w-3 mr-1"}),"Organization"]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.KJW,{className:"h-3 w-3 mr-1"}),"Individual"]})})})]})})]}),(0,e.jsxs)(f.Wu,{className:"pb-3 space-y-3",children:[(0,e.jsxs)("div",{className:"space-y-2",children:[a.email&&(0,e.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,e.jsx)(i.TnE,{className:"h-4 w-4 shrink-0"}),(0,e.jsx)("span",{className:"truncate font-medium",children:a.email})]}),a.phone&&(0,e.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,e.jsx)(i.bcf,{className:"h-4 w-4 shrink-0"}),(0,e.jsx)("span",{className:"font-medium",children:a.phone})]}),a.website&&(0,e.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,e.jsx)(i.qzq,{className:"h-4 w-4 shrink-0"}),(0,e.jsx)("span",{className:"truncate font-medium",children:a.website})]})]}),a.address&&(0,e.jsxs)("div",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:[(0,e.jsx)(i.sDd,{className:"h-4 w-4 shrink-0 mt-0.5"}),(0,e.jsx)("span",{className:"line-clamp-2 font-medium",children:a.address})]}),a.description&&(0,e.jsx)("div",{className:"pt-2 border-t border-border/50",children:(0,e.jsxs)("div",{className:"flex items-start gap-2 text-sm text-muted-foreground",children:[(0,e.jsx)(i.iUU,{className:"h-4 w-4 shrink-0 mt-0.5"}),(0,e.jsx)("p",{className:"line-clamp-3 leading-relaxed",children:a.description})]})}),a.created_at&&(0,e.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground pt-1",children:[(0,e.jsx)(i.VvS,{className:"h-3 w-3"}),(0,e.jsxs)("span",{children:["Added ",(k=a.created_at)?new Date(k).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):null]})]})]}),m&&(0,e.jsx)(f.wL,{className:"pt-3 border-t border-border/50",children:(0,e.jsxs)("div",{className:"w-full flex justify-between items-center text-xs",children:[void 0!==b&&(0,e.jsxs)("div",{className:"flex items-center gap-1.5 text-muted-foreground",children:[(0,e.jsx)("div",{className:"w-2 h-2 bg-muted-foreground/40 rounded-full"}),(0,e.jsx)(i.bcf,{className:"h-3 w-3"}),(0,e.jsxs)("span",{className:"font-medium",children:[b," contact",1!==b?"s":""]})]}),void 0!==c&&(0,e.jsxs)("div",{className:"flex items-center gap-1.5 text-muted-foreground",children:[(0,e.jsx)("div",{className:"w-2 h-2 bg-muted-foreground/40 rounded-full"}),(0,e.jsx)(i.zWC,{className:"h-3 w-3"}),(0,e.jsxs)("span",{className:"font-medium",children:[c," member",1!==c?"s":""]})]})]})})]})}[f,g,h]=j.then?(await j)():j,d()}catch(a){d(a)}})},99167:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{_:()=>g}),c(82015);var e=c(28462);c(95965);var f=a([e]);function g(){(0,e.useQueryClient)()}e=(f.then?(await f)():f)[0],d()}catch(a){d(a)}})}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[4952,5611,5781,4780],()=>b(b.s=55229));module.exports=c})();