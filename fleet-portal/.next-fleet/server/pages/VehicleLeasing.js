"use strict";(()=>{var a={};a.id=3323,a.ids=[636,3220,3323],a.modules={4720:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{E:()=>i});var e=c(8732);c(82015);var f=c(8938),g=c(87092),h=a([f,g]);[f,g]=h.then?(await h)():h;let j=(0,f.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i({className:a,variant:b,...c}){return(0,e.jsx)("div",{className:(0,g.cn)(j({variant:b}),a),...c})}d()}catch(a){d(a)}})},8732:a=>{a.exports=require("react/jsx-runtime")},8938:a=>{a.exports=import("class-variance-authority")},9640:a=>{a.exports=import("@radix-ui/react-slot")},11178:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{U:()=>n});var e=c(8732),f=c(71913),g=c(74952);c(82015);var h=c(87092),i=c(66345),j=c(19771),k=c(34750),l=c(20256),m=a([h,i,j,k]);function n({value:a,date:b,onChange:c,onDateChange:d,className:m}){let n=a||b,o=(0,l.a)();return(0,e.jsx)("div",{className:(0,h.cn)("grid gap-2",m),children:(0,e.jsxs)(k.AM,{children:[(0,e.jsx)(k.Wv,{asChild:!0,children:(0,e.jsxs)(i.$,{id:"date",variant:"outline",className:(0,h.cn)("w-full justify-start text-left font-normal",!n&&"text-muted-foreground"),children:[(0,e.jsx)(g.VvS,{className:"mr-2 h-4 w-4"}),n?.from?n.to?(0,e.jsxs)(e.Fragment,{children:[(0,f.GP)(n.from,"LLL dd, y")," -"," ",(0,f.GP)(n.to,"LLL dd, y")]}):(0,f.GP)(n.from,"LLL dd, y"):(0,e.jsx)("span",{children:"Pick a date range"})]})}),(0,e.jsx)(k.hl,{className:"w-auto p-0 max-w-[calc(100vw-2rem)]",align:"start",side:"bottom",children:(0,e.jsx)(j.V,{initialFocus:!0,mode:"range",defaultMonth:n?.from,selected:n,onSelect:c||d,numberOfMonths:o?1:2})})]})})}[h,i,j,k]=m.then?(await m)():m,d()}catch(a){d(a)}})},13020:a=>{a.exports=import("@radix-ui/react-dialog")},16235:a=>{a.exports=import("@radix-ui/react-toast")},19771:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{V:()=>m});var e=c(8732),f=c(82015),g=c(74952),h=c(86093),i=c(87092),j=c(66345),k=c(57049),l=a([i,j,k]);function m({className:a,classNames:b,showOutsideDays:c=!0,...d}){return(0,e.jsx)(h.DayPicker,{showOutsideDays:c,className:(0,i.cn)("p-3",a),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,i.cn)((0,j.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,i.cn)((0,j.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...b},components:{Dropdown:({value:a,onChange:b,children:c,...d})=>{let g=f.Children.toArray(c),h=g.find(b=>b.props.value===a);return(0,e.jsxs)(k.l6,{value:a?.toString(),onValueChange:a=>{b?.({target:{value:a}})},children:[(0,e.jsx)(k.bq,{className:"h-7 w-fit gap-1 rounded-md border-0 bg-transparent px-2 py-1 font-medium focus:ring-0 focus:ring-offset-0 [&>*:first-child]:mr-1",children:(0,e.jsx)(k.yv,{children:h?.props?.children||a})}),(0,e.jsx)(k.gC,{children:g.map((a,b)=>(0,e.jsx)(k.eb,{value:a.props.value?.toString()??"",children:a.props.children},`${a.props.value}-${b}`))})]})},IconLeft:({...a})=>(0,e.jsx)(g.JGc,{className:"h-4 w-4"}),IconRight:({...a})=>(0,e.jsx)(g.c_$,{className:"h-4 w-4"})},...d})}[i,j,k]=l.then?(await l)():l,m.displayName="Calendar",d()}catch(a){d(a)}})},20256:(a,b,c)=>{c.d(b,{a:()=>e});var d=c(82015);function e(){let[a,b]=d.useState(void 0);return d.useEffect(()=>{let a=window.matchMedia("(max-width: 767px)"),c=()=>{b(window.innerWidth<768)};return a.addEventListener("change",c),b(window.innerWidth<768),()=>a.removeEventListener("change",c)},[]),!!a}},20598:a=>{a.exports=import("@radix-ui/react-label")},25376:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{$:()=>p});var e=c(8732);c(82015);var f=c(38661),g=c(4720),h=c(39655),i=c(95148),j=c(81575),k=c(72737),l=c(71913),m=c(48380),n=c(74952),o=a([f,g,h,i]);function p({lease:a,open:b,onOpenChange:c}){if(!a)return null;let d=a=>{let b=(0,j.H)(a);return(0,k.f)(b)?(0,l.GP)(b,"MMMM dd, yyyy"):"Invalid Date"},o=(a=>{let b=(0,j.H)(a);return(0,k.f)(b)?(0,m.c)(b,new Date):null})(a.lease_end_date),p=(()=>{let b=(0,j.H)(a.lease_start_date),c=(0,j.H)(a.lease_end_date);if(!(0,k.f)(b)||!(0,k.f)(c))return 0;let d=(0,m.c)(c,b)/30.44;return Math.round(d*(a.monthly_rate||a.daily_rate||0))})();return(0,e.jsx)(f.lG,{open:b,onOpenChange:c,children:(0,e.jsxs)(f.Cf,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,e.jsx)(f.c7,{children:(0,e.jsxs)(f.L3,{className:"flex items-center gap-2",children:[(0,e.jsx)(n.iUU,{className:"h-5 w-5 text-blue-600"}),"Lease Agreement Details"]})}),(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsxs)(h.Zp,{children:[(0,e.jsx)(h.aR,{children:(0,e.jsxs)(h.ZB,{className:"flex items-center justify-between",children:[(0,e.jsxs)("span",{className:"text-lg",children:["Contract ",a.contract_number||a.contract_id||"N/A"]}),(0,e.jsxs)("div",{className:"flex gap-2",children:[(a=>{let b={active:{label:"Active",variant:"default",icon:n.rAV,color:"text-green-600"},pending:{label:"Pending",variant:"secondary",icon:n.zD7,color:"text-yellow-600"},expired:{label:"Expired",variant:"destructive",icon:n.Jpz,color:"text-red-600"},terminated:{label:"Terminated",variant:"outline",icon:n.Jpz,color:"text-gray-600"},upcoming:{label:"Upcoming",variant:"secondary",icon:n.VvS,color:"text-blue-600"}},c=b[a]||b.pending,d=c.icon;return(0,e.jsxs)(g.E,{variant:c.variant,className:"gap-1",children:[(0,e.jsx)(d,{className:`h-3 w-3 ${c.color}`}),c.label]})})(a.lease_status||"pending"),(a=>{let b={draft:{label:"Draft",variant:"secondary",color:"bg-gray-100 text-gray-800"},sent:{label:"Sent",variant:"default",color:"bg-blue-100 text-blue-800"},paid:{label:"Paid",variant:"default",color:"bg-green-100 text-green-800"},overdue:{label:"Overdue",variant:"destructive",color:"bg-red-100 text-red-800"},cancelled:{label:"Cancelled",variant:"outline",color:"bg-gray-100 text-gray-600"}},c=b[a]||b.draft;return(0,e.jsx)(g.E,{variant:c.variant,className:c.color,children:c.label})})(a.payment_status||"draft")]})]})}),(0,e.jsxs)(h.Wu,{children:[null!==o&&o<=30&&o>=0&&(0,e.jsx)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3 mb-4",children:(0,e.jsxs)("div",{className:"flex items-center gap-2 text-orange-800",children:[(0,e.jsx)(n.hcu,{className:"h-4 w-4"}),(0,e.jsxs)("span",{className:"font-medium",children:["Lease expires in ",o," days"]})]})}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,e.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[(0,e.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:["$",(a.monthly_rate||a.daily_rate||0).toLocaleString()]}),(0,e.jsx)("div",{className:"text-sm text-muted-foreground",children:a.monthly_rate?"Monthly Rate":"Daily Rate"})]}),(0,e.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,e.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["$",p.toLocaleString()]}),(0,e.jsx)("div",{className:"text-sm text-muted-foreground",children:"Total Value"})]})]})]})]}),(0,e.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,e.jsxs)(h.Zp,{children:[(0,e.jsx)(h.aR,{children:(0,e.jsxs)(h.ZB,{className:"flex items-center gap-2",children:[(0,e.jsx)(n.THT,{className:"h-5 w-5 text-blue-600"}),"Vehicle Information"]})}),(0,e.jsx)(h.Wu,{className:"space-y-3",children:a.vehicle?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-sm text-muted-foreground",children:"Vehicle"}),(0,e.jsxs)("div",{className:"font-medium",children:[a.vehicle.make," ",a.vehicle.model," (",a.vehicle.year,")"]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-sm text-muted-foreground",children:"Registration"}),(0,e.jsx)("div",{className:"font-medium",children:a.vehicle.registration})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-sm text-muted-foreground",children:"VIN"}),(0,e.jsx)("div",{className:"font-mono text-sm",children:a.vehicle.vin})]})]}):(0,e.jsx)("div",{className:"text-muted-foreground",children:"Vehicle information not available"})})]}),(0,e.jsxs)(h.Zp,{children:[(0,e.jsx)(h.aR,{children:(0,e.jsxs)(h.ZB,{className:"flex items-center gap-2",children:[(0,e.jsx)(n.KJW,{className:"h-5 w-5 text-green-600"}),"Lessee Information"]})}),(0,e.jsxs)(h.Wu,{className:"space-y-3",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-sm text-muted-foreground",children:"Name"}),(0,e.jsx)("div",{className:"font-medium",children:a.lessee_name})]}),(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(n.gE4,{className:"h-4 w-4 text-muted-foreground"}),(0,e.jsx)("span",{className:"text-sm",children:a.lessee_email})]}),(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(n.bcf,{className:"h-4 w-4 text-muted-foreground"}),(0,e.jsx)("span",{className:"text-sm",children:a.lessee_phone})]}),(0,e.jsxs)("div",{className:"flex items-start gap-2",children:[(0,e.jsx)(n.sDd,{className:"h-4 w-4 text-muted-foreground mt-0.5"}),(0,e.jsx)("span",{className:"text-sm",children:a.lessee_address})]})]})]}),(0,e.jsxs)(h.Zp,{children:[(0,e.jsx)(h.aR,{children:(0,e.jsxs)(h.ZB,{className:"flex items-center gap-2",children:[(0,e.jsx)(n.VvS,{className:"h-5 w-5 text-purple-600"}),"Lease Terms"]})}),(0,e.jsxs)(h.Wu,{className:"space-y-3",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-sm text-muted-foreground",children:"Start Date"}),(0,e.jsx)("div",{className:"font-medium",children:d(a.lease_start_date)})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-sm text-muted-foreground",children:"End Date"}),(0,e.jsx)("div",{className:"font-medium",children:d(a.lease_end_date)})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-sm text-muted-foreground",children:"Duration"}),(0,e.jsxs)("div",{className:"font-medium",children:[Math.round((0,m.c)((0,j.H)(a.lease_end_date),(0,j.H)(a.lease_start_date))/30.44)," ","months"]})]})]})]}),(0,e.jsxs)(h.Zp,{children:[(0,e.jsx)(h.aR,{children:(0,e.jsxs)(h.ZB,{className:"flex items-center gap-2",children:[(0,e.jsx)(n.G9t,{className:"h-5 w-5 text-orange-600"}),"Financial Terms"]})}),(0,e.jsxs)(h.Wu,{className:"space-y-3",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-sm text-muted-foreground",children:"Security Deposit"}),(0,e.jsxs)("div",{className:"font-medium",children:["$",(a.security_deposit||0).toLocaleString()]})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-sm text-muted-foreground",children:"Early Termination Fee"}),(0,e.jsxs)("div",{className:"font-medium",children:["$",(a.early_termination_fee||0).toLocaleString()]})]})]})]})]}),(0,e.jsxs)(h.Zp,{children:[(0,e.jsx)(h.aR,{children:(0,e.jsxs)(h.ZB,{className:"flex items-center gap-2",children:[(0,e.jsx)(n.wB_,{className:"h-5 w-5 text-gray-600"}),"Additional Terms & Conditions"]})}),(0,e.jsxs)(h.Wu,{children:[(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(n.ekZ,{className:`h-4 w-4 ${a.insurance_required?"text-green-600":"text-gray-400"}`}),(0,e.jsxs)("span",{className:`text-sm ${a.insurance_required?"text-green-600":"text-gray-500"}`,children:["Insurance"," ",a.insurance_required?"Required":"Not Required"]})]}),(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(n.wB_,{className:`h-4 w-4 ${a.maintenance_included?"text-green-600":"text-gray-400"}`}),(0,e.jsxs)("span",{className:`text-sm ${a.maintenance_included?"text-green-600":"text-gray-500"}`,children:["Maintenance"," ",a.maintenance_included?"Included":"Not Included"]})]}),(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(n.KJW,{className:`h-4 w-4 ${a.driver_included?"text-green-600":"text-gray-400"}`}),(0,e.jsxs)("span",{className:`text-sm ${a.driver_included?"text-green-600":"text-gray-500"}`,children:["Driver ",a.driver_included?"Included":"Not Included"]})]}),(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(n.THT,{className:`h-4 w-4 ${a.fuel_included?"text-green-600":"text-gray-400"}`}),(0,e.jsxs)("span",{className:`text-sm ${a.fuel_included?"text-green-600":"text-gray-500"}`,children:["Fuel ",a.fuel_included?"Included":"Not Included"]})]})]}),a.driver_included&&a.assigned_driver&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.w,{className:"my-4"}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-sm text-muted-foreground mb-2",children:"Assigned Driver"}),(0,e.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,e.jsx)(n.KJW,{className:"h-4 w-4 text-blue-600"}),(0,e.jsx)("span",{className:"font-medium text-blue-800",children:a.assigned_driver.name})]}),(0,e.jsxs)("div",{className:"flex items-center gap-2 text-sm text-blue-600",children:[(0,e.jsx)(n.bcf,{className:"h-3 w-3"}),(0,e.jsx)("span",{children:a.assigned_driver.phone})]})]})]})]}),a.notes&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(i.w,{className:"my-4"}),(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"text-sm text-muted-foreground mb-2",children:"Additional Notes"}),(0,e.jsx)("div",{className:"text-sm bg-gray-50 p-3 rounded-lg",children:a.notes})]})]})]})]}),(0,e.jsx)(h.Zp,{children:(0,e.jsx)(h.Wu,{className:"pt-6",children:(0,e.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,e.jsxs)("span",{children:["Created: ",d(a.created_at)]}),(0,e.jsxs)("span",{children:["Last Updated: ",d(a.updated_at)]})]})})})]})]})})}[f,g,h,i]=o.then?(await o)():o,d()}catch(a){d(a)}})},25665:a=>{a.exports=import("@radix-ui/react-checkbox")},28462:a=>{a.exports=import("@tanstack/react-query")},33873:a=>{a.exports=require("path")},34750:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{AM:()=>j,Wv:()=>k,hl:()=>l});var e=c(8732),f=c(82015),g=c(60461),h=c(87092),i=a([g,h]);[g,h]=i.then?(await i)():i;let j=g.Root,k=g.Trigger,l=f.forwardRef(({className:a,align:b="center",sideOffset:c=4,...d},f)=>(0,e.jsx)(g.Portal,{children:(0,e.jsx)(g.Content,{ref:f,align:b,sideOffset:c,className:(0,h.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...d})}));l.displayName=g.Content.displayName,d()}catch(a){d(a)}})},36307:a=>{a.exports=import("@radix-ui/react-dropdown-menu")},38661:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{Cf:()=>o,Es:()=>q,HM:()=>m,L3:()=>r,c7:()=>p,lG:()=>j,rr:()=>s,zM:()=>k});var e=c(8732),f=c(82015),g=c(13020),h=c(87092),i=a([g,h]);[g,h]=i.then?(await i)():i;let j=g.Root,k=g.Trigger,l=g.Portal,m=g.Close,n=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Overlay,{ref:c,className:(0,h.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...b}));n.displayName=g.Overlay.displayName;let o=f.forwardRef(({className:a,children:b,...c},d)=>(0,e.jsxs)(l,{children:[(0,e.jsx)(n,{}),(0,e.jsx)(g.Content,{ref:d,className:(0,h.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c,children:b})]}));o.displayName=g.Content.displayName;let p=({className:a,...b})=>(0,e.jsx)("div",{className:(0,h.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...b});p.displayName="DialogHeader";let q=({className:a,...b})=>(0,e.jsx)("div",{className:(0,h.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...b});q.displayName="DialogFooter";let r=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Title,{ref:c,className:(0,h.cn)("text-lg font-semibold leading-none tracking-tight",a),...b}));r.displayName=g.Title.displayName;let s=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Description,{ref:c,className:(0,h.cn)("text-sm text-muted-foreground",a),...b}));s.displayName=g.Description.displayName,d()}catch(a){d(a)}})},38827:a=>{a.exports=import("@radix-ui/react-separator")},40273:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{J:()=>l});var e=c(8732),f=c(82015),g=c(20598),h=c(8938),i=c(87092),j=a([g,h,i]);[g,h,i]=j.then?(await j)():j;let k=(0,h.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Root,{ref:c,className:(0,i.cn)(k(),a),...b}));l.displayName=g.Root.displayName,d()}catch(a){d(a)}})},40361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},41415:a=>{a.exports=import("sonner")},42971:a=>{a.exports=import("zod")},46060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},47860:a=>{a.exports=import("@radix-ui/react-select")},48303:a=>{a.exports=import("@radix-ui/react-tooltip")},48380:(a,b,c)=>{c.d(b,{c:()=>f});var d=c(80866),e=c(21638);function f(a,b){let c=(0,e.a)(a),f=(0,e.a)(b),h=g(c,f),i=Math.abs((0,d.m)(c,f));c.setDate(c.getDate()-h*i);let j=Number(g(c,f)===-h),k=h*(i-j);return 0===k?0:k}function g(a,b){let c=a.getFullYear()-b.getFullYear()||a.getMonth()-b.getMonth()||a.getDate()-b.getDate()||a.getHours()-b.getHours()||a.getMinutes()-b.getMinutes()||a.getSeconds()-b.getSeconds()||a.getMilliseconds()-b.getMilliseconds();return c<0?-1:c>0?1:c}},50802:a=>{a.exports=import("clsx")},52307:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{C5:()=>u,MJ:()=>s,Rr:()=>t,eI:()=>q,lR:()=>r,lV:()=>l,zB:()=>n});var e=c(8732),f=c(82015),g=c(9640),h=c(56884),i=c(87092),j=c(40273),k=a([g,h,i,j]);[g,h,i,j]=k.then?(await k)():k;let l=h.FormProvider,m=f.createContext({}),n=({...a})=>(0,e.jsx)(m.Provider,{value:{name:a.name},children:(0,e.jsx)(h.Controller,{...a})}),o=()=>{let a=f.useContext(m),b=f.useContext(p),{getFieldState:c,formState:d}=(0,h.useFormContext)(),e=c(a.name,d);if(!a)throw Error("useFormField should be used within <FormField>");let{id:g}=b;return{id:g,name:a.name,formItemId:`${g}-form-item`,formDescriptionId:`${g}-form-item-description`,formMessageId:`${g}-form-item-message`,...e}},p=f.createContext({}),q=f.forwardRef(({className:a,...b},c)=>{let d=f.useId();return(0,e.jsx)(p.Provider,{value:{id:d},children:(0,e.jsx)("div",{ref:c,className:(0,i.cn)("space-y-2",a),...b})})});q.displayName="FormItem";let r=f.forwardRef(({className:a,...b},c)=>{let{error:d,formItemId:f}=o();return(0,e.jsx)(j.J,{ref:c,className:(0,i.cn)(d&&"text-destructive",a),htmlFor:f,...b})});r.displayName="FormLabel";let s=f.forwardRef(({...a},b)=>{let{error:c,formItemId:d,formDescriptionId:f,formMessageId:h}=o();return(0,e.jsx)(g.Slot,{ref:b,id:d,"aria-describedby":c?`${f} ${h}`:`${f}`,"aria-invalid":!!c,...a})});s.displayName="FormControl";let t=f.forwardRef(({className:a,...b},c)=>{let{formDescriptionId:d}=o();return(0,e.jsx)("p",{ref:c,id:d,className:(0,i.cn)("text-sm text-muted-foreground",a),...b})});t.displayName="FormDescription";let u=f.forwardRef(({className:a,children:b,...c},d)=>{let{error:f,formMessageId:g}=o(),h=f?String(f?.message):b;return h?(0,e.jsx)("p",{ref:d,id:g,className:(0,i.cn)("text-sm font-medium text-destructive",a),...c,children:h}):null});u.displayName="FormMessage",d()}catch(a){d(a)}})},56884:a=>{a.exports=import("react-hook-form")},57312:a=>{a.exports=import("next-themes")},59408:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{R:()=>u});var e=c(8732);c(82015);var f=c(56884),g=c(98825),h=c(42971),i=c(28462),j=c(66345),k=c(52307),l=c(78059),m=c(87967),n=c(57049),o=c(85072),p=c(39655),q=c(76569),r=c(95965),s=c(74952),t=a([f,g,h,i,j,k,l,m,n,o,p]);[f,g,h,i,j,k,l,m,n,o,p]=t.then?(await t)():t;let v=h.object({vehicle_id:h.string().min(1,"Please select a vehicle"),contract_id:h.string().optional(),client_id:h.string().min(1,"Please select a client"),lease_start_date:h.string().min(1,"Please select a start date"),lease_end_date:h.string().min(1,"Please select an end date"),daily_rate:h.number().min(1,"Daily rate must be greater than 0"),monthly_rate:h.number().optional(),security_deposit:h.number().optional(),early_termination_fee:h.number().optional(),contract_number:h.string().optional(),lease_status:h.enum(["active","pending","expired","terminated","upcoming"]),payment_status:h.enum(["draft","sent","paid","overdue","cancelled"]),notes:h.string().optional(),insurance_required:h.boolean(),maintenance_included:h.boolean(),driver_included:h.boolean(),fuel_included:h.boolean(),assigned_driver_id:h.string().nullable().optional()});function u({lease:a,onSuccess:b,onCancel:c}){let{toast:d}=(0,q.dj)(),h=(0,f.useForm)({resolver:(0,g.zodResolver)(v),defaultValues:{vehicle_id:"",contract_id:"no-contract",client_id:"",lease_start_date:"",lease_end_date:"",daily_rate:0,monthly_rate:0,security_deposit:0,early_termination_fee:0,contract_number:"",lease_status:"pending",payment_status:"draft",notes:"",insurance_required:!0,maintenance_included:!1,driver_included:!1,fuel_included:!1,assigned_driver_id:"no-driver"}}),{data:t}=(0,i.useQuery)({queryKey:["vehicles-available"],queryFn:async()=>{let{data:a,error:b}=await r.N.from("vehicles").select("id, make, model, year, registration, vin").order("make");if(b)throw b;return a}}),{data:u}=(0,i.useQuery)({queryKey:["contracts-available"],queryFn:async()=>{let{data:a,error:b}=await r.N.from("contracts").select("id, name, client_name, status").eq("status","active").order("name");if(b)throw b;return a}}),{data:w}=(0,i.useQuery)({queryKey:["drivers-available"],queryFn:async()=>{try{let{data:a,error:b}=await r.N.from("drivers").select("id, name, phone").eq("status","active").order("name");if(b){let{data:a,error:b}=await r.N.from("drivers").select("id, name, phone").order("name");if(b)throw b;return a}return a}catch(c){let{data:a,error:b}=await r.N.from("drivers").select("id, name, phone").order("name");if(b)throw b;return a}}}),{data:x,isLoading:y,error:z}=(0,i.useQuery)({queryKey:["clients-available"],queryFn:async()=>{let{data:a,error:b}=await r.N.from("clients").select("id, name, type, email, phone, address").order("name");if(b)throw b;return console.log("Fetched clients:",a),a}});h.watch(),h.watch("daily_rate");let A=(0,i.useMutation)({mutationFn:async b=>{try{if(console.log("Mutation received data:",b),a){console.log("Updating existing lease with ID:",a.id);let{error:c}=await r.N.from("vehicle_leases").update({...b,updated_at:new Date().toISOString()}).eq("id",a.id);if(c)throw console.error("Update error:",c),console.error("Update error details:",{message:c.message,details:c.details,hint:c.hint,code:c.code}),c}else{console.log("Creating new lease");let{data:a,error:c}=await r.N.from("vehicle_leases").select("id").limit(1);if(c)throw console.error("Table access test failed:",c),Error(`Cannot access vehicle_leases table: ${c.message}`);console.log("Table access test passed, proceeding with insert");let{error:d}=await r.N.from("vehicle_leases").insert({...b,created_at:new Date().toISOString(),updated_at:new Date().toISOString()});if(d)throw console.error("Insert error:",d),console.error("Insert error details:",{message:d.message,details:d.details,hint:d.hint,code:d.code}),d}}catch(a){throw console.error("Caught error in mutation:",a),console.error("Error type:",typeof a),console.error("Error constructor:",a?.constructor?.name),a}},onSuccess:()=>{d({title:a?"Lease updated":"Lease created",description:a?"The lease agreement has been updated successfully.":"New lease agreement has been created successfully."}),b()},onError:a=>{console.error("Error saving lease:",a),console.error("Error details:",JSON.stringify(a,null,2));let b="Failed to save lease agreement";a?.code==="23505"?b=a?.message?.includes("vehicle_leases_contract_number_key")?"A lease with this contract number already exists. Please use a different contract number.":a?.message?.includes("unique constraint")?"This record already exists. Please check your data and try again.":"Duplicate entry detected. Please check your data and try again.":a?.code==="23503"?b="Referenced data not found. Please check your selections and try again.":a?.code==="23514"?b="Invalid data provided. Please check your input and try again.":a?.message&&(b=`Failed to save lease agreement: ${a.message}`),d({title:"Error",description:b,variant:"destructive"})}}),B=async()=>{let a=()=>{let a=new Date,b=a.getFullYear().toString().slice(-2),c=String(a.getMonth()+1).padStart(2,"0"),d=String(a.getDate()).padStart(2,"0"),e=Math.floor(1e3+9e3*Math.random());return`LSE-${b}${c}${d}-${e}`},b=a(),c=0;for(;c<10;){let{data:d}=await r.N.from("vehicle_leases").select("contract_number").eq("contract_number",b).single();if(!d)return b;b=a(),c++}return`LSE-${Date.now()}-${Math.floor(1e4*Math.random())}`},C=async b=>{try{let c=b.monthly_rate||30*(b.daily_rate||0),e=b.contract_number;if(e){if(!a){let{data:a}=await r.N.from("vehicle_leases").select("contract_number").eq("contract_number",e).single();if(a)return void d({title:"Contract Number Already Exists",description:"A lease with this contract number already exists. Please use a different contract number.",variant:"destructive"})}}else e=b.contract_id?`LSE-${b.contract_id.slice(-6)}`:await B();let f=x?.find(a=>a.id===b.client_id),g={vehicle_id:b.vehicle_id,contract_id:"no-contract"===b.contract_id?null:b.contract_id,client_id:b.client_id,lessee_name:f?.name||"",lessee_email:f?.email||"",lessee_phone:f?.phone||"",lessee_address:f?.address||"",lease_start_date:b.lease_start_date,lease_end_date:b.lease_end_date,daily_rate:b.daily_rate,monthly_rate:c,security_deposit:b.security_deposit||0,early_termination_fee:b.early_termination_fee||0,contract_number:e,lease_status:b.lease_status,payment_status:b.payment_status,notes:b.notes||void 0,insurance_required:b.insurance_required,maintenance_included:b.maintenance_included,driver_included:b.driver_included,fuel_included:b.fuel_included,assigned_driver_id:"no-driver"===b.assigned_driver_id?null:b.assigned_driver_id};console.log("Submitting lease data:",g),A.mutate(g)}catch(a){console.error("Error in onSubmit:",a),d({title:"Error",description:"Failed to prepare lease data. Please try again.",variant:"destructive"})}};return(0,e.jsx)(k.lV,{...h,children:(0,e.jsxs)("form",{onSubmit:h.handleSubmit(C),className:"space-y-6",children:[(0,e.jsxs)(p.Zp,{children:[(0,e.jsx)(p.aR,{className:"pb-3",children:(0,e.jsxs)(p.ZB,{className:"flex items-center gap-2 text-lg",children:[(0,e.jsx)(s.THT,{className:"h-5 w-5 text-blue-600"}),"Vehicle Information"]})}),(0,e.jsxs)(p.Wu,{className:"space-y-4",children:[(0,e.jsx)(k.zB,{control:h.control,name:"vehicle_id",render:({field:a})=>(0,e.jsxs)(k.eI,{children:[(0,e.jsx)(k.lR,{children:"Select Vehicle *"}),(0,e.jsxs)(n.l6,{onValueChange:a.onChange,value:a.value,children:[(0,e.jsx)(k.MJ,{children:(0,e.jsx)(n.bq,{children:(0,e.jsx)(n.yv,{placeholder:"Choose a vehicle for lease"})})}),(0,e.jsx)(n.gC,{children:t?.filter(a=>a&&"id"in a).map(a=>(0,e.jsxs)(n.eb,{value:a.id,children:[a.make," ",a.model," (",a.year,") -"," ",a.registration]},a.id))})]},`vehicle-${a.value||"empty"}`),(0,e.jsx)(k.C5,{})]})}),(0,e.jsx)(k.zB,{control:h.control,name:"contract_id",render:({field:a})=>(0,e.jsxs)(k.eI,{children:[(0,e.jsx)(k.lR,{children:"Select Contract"}),(0,e.jsxs)(n.l6,{onValueChange:a.onChange,value:a.value,children:[(0,e.jsx)(k.MJ,{children:(0,e.jsx)(n.bq,{children:(0,e.jsx)(n.yv,{placeholder:"Choose a contract for this lease"})})}),(0,e.jsxs)(n.gC,{children:[(0,e.jsx)(n.eb,{value:"no-contract",children:"No contract selected"}),u?.filter(a=>a&&"id"in a).map(a=>(0,e.jsxs)(n.eb,{value:a.id,children:[a.name," -"," ",a.client_name]},a.id))]})]},`contract-${a.value||"empty"}`),(0,e.jsx)(k.Rr,{children:"Select an active contract to associate with this lease (optional)"}),(0,e.jsx)(k.C5,{})]})})]})]}),(0,e.jsxs)(p.Zp,{children:[(0,e.jsx)(p.aR,{className:"pb-3",children:(0,e.jsxs)(p.ZB,{className:"flex items-center gap-2 text-lg",children:[(0,e.jsx)(s.KJW,{className:"h-5 w-5 text-green-600"}),"Client Information"]})}),(0,e.jsx)(p.Wu,{className:"space-y-4",children:(0,e.jsx)(k.zB,{control:h.control,name:"client_id",render:({field:a})=>(0,e.jsxs)(k.eI,{children:[(0,e.jsx)(k.lR,{children:"Select Client *"}),(0,e.jsxs)(n.l6,{onValueChange:a.onChange,defaultValue:a.value,disabled:y,children:[(0,e.jsx)(k.MJ,{children:(0,e.jsx)(n.bq,{children:(0,e.jsx)(n.yv,{placeholder:y?"Loading clients...":"Choose a client"})})}),(0,e.jsx)(n.gC,{children:x&&x.length>0?x.map(a=>(0,e.jsx)(n.eb,{value:a.id,children:(0,e.jsxs)("div",{className:"flex flex-col",children:[(0,e.jsx)("span",{className:"font-medium",children:a.name}),(0,e.jsxs)("span",{className:"text-sm text-muted-foreground",children:[a.type," • ",a.email]})]})},a.id)):(0,e.jsx)(n.eb,{value:"no-clients",disabled:!0,children:"No clients available"})})]}),(0,e.jsx)(k.C5,{})]})})})]}),(0,e.jsxs)(p.Zp,{children:[(0,e.jsx)(p.aR,{className:"pb-3",children:(0,e.jsxs)(p.ZB,{className:"flex items-center gap-2 text-lg",children:[(0,e.jsx)(s.VvS,{className:"h-5 w-5 text-purple-600"}),"Lease Terms"]})}),(0,e.jsx)(p.Wu,{className:"space-y-4",children:(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,e.jsx)(k.zB,{control:h.control,name:"lease_start_date",render:({field:a})=>(0,e.jsxs)(k.eI,{children:[(0,e.jsx)(k.lR,{children:"Start Date *"}),(0,e.jsx)(k.MJ,{children:(0,e.jsx)(l.p,{type:"date",...a})}),(0,e.jsx)(k.C5,{})]})}),(0,e.jsx)(k.zB,{control:h.control,name:"lease_end_date",render:({field:a})=>(0,e.jsxs)(k.eI,{children:[(0,e.jsx)(k.lR,{children:"End Date *"}),(0,e.jsx)(k.MJ,{children:(0,e.jsx)(l.p,{type:"date",...a})}),(0,e.jsx)(k.C5,{})]})}),(0,e.jsx)(k.zB,{control:h.control,name:"lease_status",render:({field:a})=>(0,e.jsxs)(k.eI,{children:[(0,e.jsx)(k.lR,{children:"Lease Status *"}),(0,e.jsxs)(n.l6,{onValueChange:a.onChange,value:a.value,children:[(0,e.jsx)(k.MJ,{children:(0,e.jsx)(n.bq,{children:(0,e.jsx)(n.yv,{})})}),(0,e.jsxs)(n.gC,{children:[(0,e.jsx)(n.eb,{value:"pending",children:"Pending"}),(0,e.jsx)(n.eb,{value:"upcoming",children:"Upcoming"}),(0,e.jsx)(n.eb,{value:"active",children:"Active"}),(0,e.jsx)(n.eb,{value:"expired",children:"Expired"}),(0,e.jsx)(n.eb,{value:"terminated",children:"Terminated"})]})]},`lease-status-${a.value||"empty"}`),(0,e.jsx)(k.C5,{})]})}),(0,e.jsx)(k.zB,{control:h.control,name:"payment_status",render:({field:a})=>(0,e.jsxs)(k.eI,{children:[(0,e.jsx)(k.lR,{children:"Payment Status *"}),(0,e.jsxs)(n.l6,{onValueChange:a.onChange,value:a.value,children:[(0,e.jsx)(k.MJ,{children:(0,e.jsx)(n.bq,{children:(0,e.jsx)(n.yv,{})})}),(0,e.jsxs)(n.gC,{children:[(0,e.jsx)(n.eb,{value:"draft",children:"Draft"}),(0,e.jsx)(n.eb,{value:"sent",children:"Sent"}),(0,e.jsx)(n.eb,{value:"paid",children:"Paid"}),(0,e.jsx)(n.eb,{value:"overdue",children:"Overdue"}),(0,e.jsx)(n.eb,{value:"cancelled",children:"Cancelled"})]})]},`payment-status-${a.value||"empty"}`),(0,e.jsx)(k.C5,{})]})})]})})]}),(0,e.jsxs)(p.Zp,{children:[(0,e.jsx)(p.aR,{className:"pb-3",children:(0,e.jsxs)(p.ZB,{className:"flex items-center gap-2 text-lg",children:[(0,e.jsx)(s.G9t,{className:"h-5 w-5 text-orange-600"}),"Financial Terms"]})}),(0,e.jsxs)(p.Wu,{className:"space-y-4",children:[(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,e.jsx)(k.zB,{control:h.control,name:"daily_rate",render:({field:a})=>(0,e.jsxs)(k.eI,{children:[(0,e.jsx)(k.lR,{children:"Daily Rate ($) *"}),(0,e.jsx)(k.MJ,{children:(0,e.jsx)(l.p,{type:"number",step:"0.01",placeholder:"50.00",value:a.value??"",onChange:b=>a.onChange(""===b.target.value?void 0:parseFloat(b.target.value)),onBlur:a.onBlur,name:a.name,ref:a.ref})}),(0,e.jsx)(k.Rr,{children:"Daily rental rate for this vehicle lease"}),(0,e.jsx)(k.C5,{})]})}),(0,e.jsx)(k.zB,{control:h.control,name:"monthly_rate",render:({field:a})=>(0,e.jsxs)(k.eI,{children:[(0,e.jsx)(k.lR,{children:"Monthly Rate ($)"}),(0,e.jsx)(k.MJ,{children:(0,e.jsx)(l.p,{type:"number",step:"0.01",placeholder:"1500.00",value:a.value??"",onChange:b=>a.onChange(""===b.target.value?void 0:parseFloat(b.target.value)),onBlur:a.onBlur,name:a.name,ref:a.ref})}),(0,e.jsx)(k.Rr,{children:"Monthly rental rate (auto-calculated from daily rate)"}),(0,e.jsx)(k.C5,{})]})}),(0,e.jsx)(k.zB,{control:h.control,name:"security_deposit",render:({field:a})=>(0,e.jsxs)(k.eI,{children:[(0,e.jsx)(k.lR,{children:"Security Deposit ($)"}),(0,e.jsx)(k.MJ,{children:(0,e.jsx)(l.p,{type:"number",step:"0.01",placeholder:"500.00",value:a.value??"",onChange:b=>a.onChange(""===b.target.value?void 0:parseFloat(b.target.value)),onBlur:a.onBlur,name:a.name,ref:a.ref})}),(0,e.jsx)(k.Rr,{children:"Security deposit amount required"}),(0,e.jsx)(k.C5,{})]})}),(0,e.jsx)(k.zB,{control:h.control,name:"early_termination_fee",render:({field:a})=>(0,e.jsxs)(k.eI,{children:[(0,e.jsx)(k.lR,{children:"Early Termination Fee ($)"}),(0,e.jsx)(k.MJ,{children:(0,e.jsx)(l.p,{type:"number",step:"0.01",placeholder:"0.00",value:a.value??"",onChange:b=>a.onChange(""===b.target.value?void 0:parseFloat(b.target.value)),onBlur:a.onBlur,name:a.name,ref:a.ref})}),(0,e.jsx)(k.Rr,{children:"Fee for early lease termination"}),(0,e.jsx)(k.C5,{})]})})]}),(0,e.jsx)(k.zB,{control:h.control,name:"contract_number",render:({field:a})=>(0,e.jsxs)(k.eI,{children:[(0,e.jsx)(k.lR,{children:"Contract Number"}),(0,e.jsx)(k.MJ,{children:(0,e.jsx)(l.p,{placeholder:"LSE-123456",...a,className:a.value?"bg-green-50 border-green-200":""})}),(0,e.jsx)(k.Rr,{children:a.value?(0,e.jsxs)("span",{className:"text-green-600",children:["✓ Contract number: ",a.value]}):"Unique contract identifier (auto-generated if empty)"}),(0,e.jsx)(k.C5,{})]})})]})]}),(0,e.jsxs)(p.Zp,{children:[(0,e.jsx)(p.aR,{className:"pb-3",children:(0,e.jsxs)(p.ZB,{className:"flex items-center gap-2 text-lg",children:[(0,e.jsx)(s.wB_,{className:"h-5 w-5 text-gray-600"}),"Additional Terms"]})}),(0,e.jsxs)(p.Wu,{className:"space-y-4",children:[(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,e.jsx)(k.zB,{control:h.control,name:"insurance_required",render:({field:a})=>(0,e.jsxs)(k.eI,{className:"flex flex-row items-start space-x-3 space-y-0",children:[(0,e.jsx)(k.MJ,{children:(0,e.jsx)(o.S,{checked:a.value,onCheckedChange:a.onChange})}),(0,e.jsxs)("div",{className:"space-y-1 leading-none",children:[(0,e.jsx)(k.lR,{children:"Insurance Required"}),(0,e.jsx)(k.Rr,{children:"Lessee must maintain comprehensive insurance"})]})]})}),(0,e.jsx)(k.zB,{control:h.control,name:"maintenance_included",render:({field:a})=>(0,e.jsxs)(k.eI,{className:"flex flex-row items-start space-x-3 space-y-0",children:[(0,e.jsx)(k.MJ,{children:(0,e.jsx)(o.S,{checked:a.value,onCheckedChange:a.onChange})}),(0,e.jsxs)("div",{className:"space-y-1 leading-none",children:[(0,e.jsx)(k.lR,{children:"Maintenance Included"}),(0,e.jsx)(k.Rr,{children:"Regular maintenance is included in lease"})]})]})}),(0,e.jsx)(k.zB,{control:h.control,name:"driver_included",render:({field:a})=>(0,e.jsxs)(k.eI,{className:"flex flex-row items-start space-x-3 space-y-0",children:[(0,e.jsx)(k.MJ,{children:(0,e.jsx)(o.S,{checked:a.value,onCheckedChange:a.onChange})}),(0,e.jsxs)("div",{className:"space-y-1 leading-none",children:[(0,e.jsx)(k.lR,{children:"Driver Included"}),(0,e.jsx)(k.Rr,{children:"Professional driver provided with vehicle"})]})]})}),(0,e.jsx)(k.zB,{control:h.control,name:"fuel_included",render:({field:a})=>(0,e.jsxs)(k.eI,{className:"flex flex-row items-start space-x-3 space-y-0",children:[(0,e.jsx)(k.MJ,{children:(0,e.jsx)(o.S,{checked:a.value,onCheckedChange:a.onChange})}),(0,e.jsxs)("div",{className:"space-y-1 leading-none",children:[(0,e.jsx)(k.lR,{children:"Fuel Included"}),(0,e.jsx)(k.Rr,{children:"Fuel costs are covered in the lease"})]})]})})]}),h.watch("driver_included")&&(0,e.jsx)(k.zB,{control:h.control,name:"assigned_driver_id",render:({field:a})=>(0,e.jsxs)(k.eI,{children:[(0,e.jsx)(k.lR,{children:"Assign Driver"}),(0,e.jsxs)(n.l6,{onValueChange:a.onChange,value:a.value||void 0,children:[(0,e.jsx)(k.MJ,{children:(0,e.jsx)(n.bq,{children:(0,e.jsx)(n.yv,{placeholder:"Select a driver for this lease"})})}),(0,e.jsxs)(n.gC,{children:[(0,e.jsx)(n.eb,{value:"no-driver",children:"No driver assigned"}),w?.filter(a=>a&&"id"in a).map(a=>(0,e.jsxs)(n.eb,{value:a.id,children:[a.name," - ",a.phone]},a.id))]})]}),(0,e.jsx)(k.Rr,{children:"Select a driver to assign to this lease (optional)"}),(0,e.jsx)(k.C5,{})]})}),(0,e.jsx)(k.zB,{control:h.control,name:"notes",render:({field:a})=>(0,e.jsxs)(k.eI,{children:[(0,e.jsx)(k.lR,{children:"Additional Notes"}),(0,e.jsx)(k.MJ,{children:(0,e.jsx)(m.T,{placeholder:"Any additional terms, conditions, or notes about this lease...",className:"min-h-[100px]",...a})}),(0,e.jsx)(k.C5,{})]})})]})]}),(0,e.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,e.jsxs)(j.$,{type:"button",variant:"outline",onClick:c,disabled:A.isPending,children:[(0,e.jsx)(s.X,{className:"h-4 w-4 mr-2"}),"Cancel"]}),(0,e.jsxs)(j.$,{type:"submit",disabled:A.isPending,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:[(0,e.jsx)(s.eMP,{className:"h-4 w-4 mr-2"}),A.isPending?"Saving...":a?"Update Lease":"Create Lease"]})]})]})})}d()}catch(a){d(a)}})},60461:a=>{a.exports=import("@radix-ui/react-popover")},71903:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{config:()=>r,default:()=>n,getServerSideProps:()=>q,getStaticPaths:()=>p,getStaticProps:()=>o,handler:()=>z,reportWebVitals:()=>s,routeModule:()=>y,unstable_getServerProps:()=>w,unstable_getServerSideProps:()=>x,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>u,unstable_getStaticProps:()=>t});var e=c(63885),f=c(80237),g=c(81413),h=c(65611),i=c.n(h),j=c(74780),k=c(73137),l=c(12289),m=a([j,k]);[j,k]=m.then?(await m)():m;let n=(0,g.M)(k,"default"),o=(0,g.M)(k,"getStaticProps"),p=(0,g.M)(k,"getStaticPaths"),q=(0,g.M)(k,"getServerSideProps"),r=(0,g.M)(k,"config"),s=(0,g.M)(k,"reportWebVitals"),t=(0,g.M)(k,"unstable_getStaticProps"),u=(0,g.M)(k,"unstable_getStaticPaths"),v=(0,g.M)(k,"unstable_getStaticParams"),w=(0,g.M)(k,"unstable_getServerProps"),x=(0,g.M)(k,"unstable_getServerSideProps"),y=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/VehicleLeasing",pathname:"/VehicleLeasing",bundlePath:"",filename:""},distDir:".next-fleet",relativeProjectDir:"",components:{App:j.default,Document:i()},userland:k}),z=(0,l.U)({srcPage:"/VehicleLeasing",config:r,userland:k,routeModule:y,getStaticPaths:p,getStaticProps:o,getServerSideProps:q});d()}catch(a){d(a)}})},73137:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>C});var e=c(8732),f=c(82015),g=c(28462),h=c(66345),i=c(16823),j=c(48383),k=c(74952),l=c(39655),m=c(4720),n=c(78059),o=c(57049),p=c(38661),q=c(90192),r=c(76569),s=c(95965),t=c(21839),u=c(81575),v=c(72737),w=c(71913),x=c(48380),y=c(11178),z=c(59408),A=c(25376),B=a([g,h,j,l,m,n,o,p,q,y,z,A]);function C(){let{toast:a}=(0,r.dj)(),b=(0,g.useQueryClient)(),[c,d]=(0,f.useState)(!1),[B,C]=(0,f.useState)(!1),[D,E]=(0,f.useState)(null),[F,G]=(0,f.useState)(""),[H,I]=(0,f.useState)("all"),[J,K]=(0,f.useState)("all"),[L,M]=(0,f.useState)("all"),[N,O]=(0,f.useState)(),{data:P,isLoading:Q}=(0,g.useQuery)({queryKey:["vehicle-leases"],queryFn:async()=>{let{data:a,error:b}=await s.N.from("vehicle_leases").select("*").order("lease_start_date",{ascending:!1});if(b)throw console.error("Error fetching vehicle leases (base):",{message:b?.message,details:b?.details,hint:b?.hint,code:b?.code}),b;let c=a||[];if(0===c.length)return[];let d=Array.from(new Set(c.map(a=>a.vehicle_id).filter(a=>!!a))),e=Array.from(new Set(c.map(a=>a.assigned_driver_id).filter(a=>!!a))),f=Array.from(new Set(c.map(a=>a.contract_id).filter(a=>!!a))),[g,h,i]=await Promise.all([d.length?s.N.from("vehicles").select("id, make, model, year, registration, vin").in("id",d):Promise.resolve({data:[],error:null}),e.length?s.N.from("drivers").select("id, name, phone").in("id",e):Promise.resolve({data:[],error:null}),f.length?s.N.from("contracts").select("id, contract_number").in("id",f):Promise.resolve({data:[],error:null})]),{data:j,error:k}=g,{data:l,error:m}=h,{data:n,error:o}=i;if(k||m||o)throw console.error("Error fetching related lease entities:",{vehiclesError:k,driversError:m,contractsError:o}),k||m||o;let p=new Map((j||[]).map(a=>[a.id,a])),q=new Map((l||[]).map(a=>[a.id,a])),r=new Map((n||[]).map(a=>[a.id,a]));return c.map(a=>({...a,vehicle:a.vehicle_id&&p.get(a.vehicle_id)||null,assigned_driver:a.assigned_driver_id&&q.get(a.assigned_driver_id)||null,contract:a.contract_id&&r.get(a.contract_id)||null})).filter((a,b,c)=>b===c.findIndex(b=>b.id===a.id))}}),{data:R}=(0,g.useQuery)({queryKey:["vehicles-for-leasing"],queryFn:async()=>{let{data:a,error:b}=await s.N.from("vehicles").select("id, make, model, registration").order("make");if(b)throw b;return a}}),S=(0,f.useMemo)(()=>{if(!P)return{total:0,active:0,expiringSoon:0,monthlyRevenue:0,overdue:0};let a=new Date,b=(0,t.f)(a,30);return{total:P.length,active:P.filter(a=>"active"===a.lease_status).length,expiringSoon:P.filter(c=>{let d=(0,u.H)(c.lease_end_date);return(0,v.f)(d)&&d<=b&&d>=a}).length,monthlyRevenue:P.filter(a=>"active"===a.lease_status).reduce((a,b)=>a+30*b.daily_rate,0),overdue:P.filter(a=>"overdue"===a.payment_status).length}},[P]),T=(0,f.useMemo)(()=>P?P.filter(a=>{if(F){let b=F.toLowerCase(),c=a.vehicle?`${a.vehicle.make} ${a.vehicle.model}`.toLowerCase():"",d=a.vehicle?.registration?.toLowerCase()||"",e=a.lessee_name.toLowerCase(),f=(a.contract?.contract_number||"").toLowerCase();if(!c.includes(b)&&!d.includes(b)&&!e.includes(b)&&!f.includes(b))return!1}if("all"!==H&&a.vehicle_id!==H||"all"!==J&&a.lease_status!==J||"all"!==L&&a.payment_status!==L)return!1;if(N?.from||N?.to){let b=(0,u.H)(a.lease_start_date);if(N.from&&b<N.from||N.to&&b>N.to)return!1}return!0}):[],[P,F,H,J,L,N]),U=(0,g.useMutation)({mutationFn:async a=>{let{error:b}=await s.N.from("vehicle_leases").delete().eq("id",a);if(b)throw b},onSuccess:()=>{b.invalidateQueries({queryKey:["vehicle-leases"]}),a({title:"Lease deleted",description:"The vehicle lease has been deleted successfully."})},onError:b=>{console.error("Error deleting lease:",b),a({title:"Error",description:"Failed to delete lease. Please try again.",variant:"destructive"})}}),V=async c=>{try{let d=new Date,e=new Date(d.getFullYear(),d.getMonth(),1),f=new Date(d.getFullYear(),d.getMonth()+1,0);await (0,i.Cx)(c,e,f),a({title:"Invoice Generated",description:`Invoice generated successfully for lease ${c.contract_number}`}),b.invalidateQueries({queryKey:["vehicle-leases"]}),b.invalidateQueries({queryKey:["invoices"]})}catch(b){a({title:"Failed to Generate Invoice",description:b instanceof Error?b.message:"Unknown error occurred",variant:"destructive"})}},W=a=>{let b=(0,u.H)(a);return(0,v.f)(b)?(0,w.GP)(b,"dd/MM/yyyy"):"Invalid Date"};return(0,e.jsx)("div",{className:"min-h-screen bg-background",children:(0,e.jsxs)("div",{className:"p-4 px-6 space-y-6",children:[(0,e.jsx)("div",{className:"border-b border-border pb-4 pt-4",children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsx)("div",{children:(0,e.jsx)("h1",{className:"text-2xl font-semibold text-foreground",children:"Vehicle Leasing"})}),(0,e.jsxs)(h.$,{onClick:()=>{E(null),d(!0)},className:"gap-2",children:[(0,e.jsx)(k.FWt,{className:"h-5 w-5"}),"New Lease Agreement"]})]})}),(0,e.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:[(0,e.jsxs)(l.Zp,{children:[(0,e.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,e.jsx)(l.ZB,{className:"text-sm font-medium",children:"Total Leases"}),(0,e.jsx)(k.iUU,{className:"h-4 w-4 text-muted-foreground"})]}),(0,e.jsxs)(l.Wu,{children:[(0,e.jsx)("div",{className:"text-2xl font-bold",children:S.total}),(0,e.jsx)("p",{className:"text-xs text-muted-foreground",children:"All lease agreements"})]})]}),(0,e.jsxs)(l.Zp,{children:[(0,e.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,e.jsx)(l.ZB,{className:"text-sm font-medium",children:"Active Leases"}),(0,e.jsx)(k.rAV,{className:"h-4 w-4 text-muted-foreground"})]}),(0,e.jsxs)(l.Wu,{children:[(0,e.jsx)("div",{className:"text-2xl font-bold",children:S.active}),(0,e.jsx)("p",{className:"text-xs text-muted-foreground",children:"Currently active"})]})]}),(0,e.jsxs)(l.Zp,{children:[(0,e.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,e.jsx)(l.ZB,{className:"text-sm font-medium",children:"Expiring Soon"}),(0,e.jsx)(k.hcu,{className:"h-4 w-4 text-muted-foreground"})]}),(0,e.jsxs)(l.Wu,{children:[(0,e.jsx)("div",{className:"text-2xl font-bold",children:S.expiringSoon}),(0,e.jsx)("p",{className:"text-xs text-muted-foreground",children:"Within 30 days"})]})]}),(0,e.jsxs)(l.Zp,{children:[(0,e.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,e.jsx)(l.ZB,{className:"text-sm font-medium",children:"Monthly Revenue"}),(0,e.jsx)(k.ntg,{className:"h-4 w-4 text-muted-foreground"})]}),(0,e.jsxs)(l.Wu,{children:[(0,e.jsxs)("div",{className:"text-2xl font-bold",children:["$",S.monthlyRevenue.toLocaleString()]}),(0,e.jsx)("p",{className:"text-xs text-muted-foreground",children:"From active leases"})]})]}),(0,e.jsxs)(l.Zp,{children:[(0,e.jsxs)(l.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,e.jsx)(l.ZB,{className:"text-sm font-medium",children:"Overdue"}),(0,e.jsx)(k.hcu,{className:"h-4 w-4 text-muted-foreground"})]}),(0,e.jsxs)(l.Wu,{children:[(0,e.jsx)("div",{className:"text-2xl font-bold",children:S.overdue}),(0,e.jsx)("p",{className:"text-xs text-muted-foreground",children:"Payment overdue"})]})]})]}),(0,e.jsx)("div",{className:"bg-card rounded-2xl p-6 shadow-sm border border-border",children:(0,e.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center",children:[(0,e.jsx)("div",{className:"flex-1",children:(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)(k.vji,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,e.jsx)(n.p,{placeholder:"Search by vehicle, lessee name, or email...",value:F,onChange:a=>G(a.target.value),className:"pl-8"})]})}),(0,e.jsxs)(o.l6,{value:H,onValueChange:I,children:[(0,e.jsx)(o.bq,{className:"w-[200px]",children:(0,e.jsx)(o.yv,{placeholder:"All Vehicles"})}),(0,e.jsxs)(o.gC,{children:[(0,e.jsx)(o.eb,{value:"all",children:"All Vehicles"}),R?.map(a=>(0,e.jsxs)(o.eb,{value:a.id,children:[a.make," ",a.model," (",a.registration,")"]},a.id))]})]}),(0,e.jsxs)(o.l6,{value:J,onValueChange:K,children:[(0,e.jsx)(o.bq,{className:"w-[150px]",children:(0,e.jsx)(o.yv,{placeholder:"All Status"})}),(0,e.jsxs)(o.gC,{children:[(0,e.jsx)(o.eb,{value:"all",children:"All Status"}),(0,e.jsx)(o.eb,{value:"active",children:"Active"}),(0,e.jsx)(o.eb,{value:"pending",children:"Pending"}),(0,e.jsx)(o.eb,{value:"upcoming",children:"Upcoming"}),(0,e.jsx)(o.eb,{value:"expired",children:"Expired"}),(0,e.jsx)(o.eb,{value:"terminated",children:"Terminated"})]})]}),(0,e.jsxs)(o.l6,{value:L,onValueChange:M,children:[(0,e.jsx)(o.bq,{className:"w-[150px]",children:(0,e.jsx)(o.yv,{placeholder:"Payment Status"})}),(0,e.jsxs)(o.gC,{children:[(0,e.jsx)(o.eb,{value:"all",children:"All Payments"}),(0,e.jsx)(o.eb,{value:"draft",children:"Draft"}),(0,e.jsx)(o.eb,{value:"sent",children:"Sent"}),(0,e.jsx)(o.eb,{value:"paid",children:"Paid"}),(0,e.jsx)(o.eb,{value:"overdue",children:"Overdue"}),(0,e.jsx)(o.eb,{value:"cancelled",children:"Cancelled"})]})]}),(0,e.jsx)(y.U,{value:N,onChange:O,className:"w-[240px]"}),(0,e.jsxs)("div",{className:"flex gap-2",children:[(0,e.jsxs)(h.$,{variant:"outline",size:"sm",onClick:()=>{G(""),I("all"),K("all"),M("all"),O(void 0)},children:[(0,e.jsx)(k.dJT,{className:"h-4 w-4 mr-2"}),"Clear"]}),(0,e.jsxs)(h.$,{variant:"outline",size:"sm",onClick:()=>{if(!T||0===T.length)return void a({title:"No data to export",description:"There are no leases to export.",variant:"destructive"});let b=T.map(a=>[a.contract_id||"N/A",a.vehicle?`${a.vehicle.make} ${a.vehicle.model} (${a.vehicle.year})`:"Unknown",a.vehicle?.registration||"",a.lessee_name,a.lessee_email,a.lessee_phone,W(a.lease_start_date),W(a.lease_end_date),(a.daily_rate||0).toString(),(30*(a.daily_rate||0)).toString(),a.lease_status,a.payment_status]),c=[["Contract ID","Vehicle","Registration","Lessee","Email","Phone","Start Date","End Date","Daily Rate","Monthly Estimate","Status","Payment Status"],...b].map(a=>a.map(a=>`"${a}"`).join(",")).join("\n"),d=new Blob([c],{type:"text/csv"}),e=window.URL.createObjectURL(d),f=document.createElement("a");f.href=e,f.download=`vehicle-leases-${(0,w.GP)(new Date,"yyyy-MM-dd")}.csv`,document.body.appendChild(f),f.click(),document.body.removeChild(f),window.URL.revokeObjectURL(e),a({title:"Export successful",description:`Exported ${T.length} vehicle leases to CSV.`})},children:[(0,e.jsx)(k.f5X,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),(0,e.jsxs)(l.Zp,{children:[(0,e.jsx)(l.aR,{children:(0,e.jsx)("div",{className:"flex items-center justify-between",children:(0,e.jsx)("div",{children:(0,e.jsxs)(l.BT,{children:[T.length," of ",S.total," leases"]})})})}),(0,e.jsx)(l.Wu,{children:(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsxs)(j.XI,{children:[(0,e.jsx)(j.A0,{children:(0,e.jsxs)(j.Hj,{className:"bg-muted/50",children:[(0,e.jsx)(j.nd,{children:"Contract & Vehicle"}),(0,e.jsx)(j.nd,{children:"Lessee"}),(0,e.jsx)(j.nd,{children:"Lease Period"}),(0,e.jsx)(j.nd,{children:"Financial"}),(0,e.jsx)(j.nd,{children:"Status"}),(0,e.jsx)(j.nd,{children:"Actions"})]})}),(0,e.jsx)(j.BF,{children:Q?(0,e.jsx)(j.Hj,{children:(0,e.jsx)(j.nA,{colSpan:6,className:"text-center py-8",children:(0,e.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,e.jsx)(k.e9t,{className:"h-4 w-4 animate-spin"}),"Loading vehicle leases..."]})})}):T?.length===0?(0,e.jsx)(j.Hj,{children:(0,e.jsx)(j.nA,{colSpan:6,className:"text-center py-8",children:(0,e.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,e.jsx)(k.THT,{className:"h-8 w-8 text-muted-foreground"}),(0,e.jsx)("p",{className:"text-muted-foreground",children:"No vehicle leases found"})]})})}):T?.map(a=>{let b=(a=>{let b=(0,u.H)(a);return(0,v.f)(b)?(0,x.c)(b,new Date):null})(a.lease_end_date);return(0,e.jsxs)(j.Hj,{className:"hover:bg-muted/50",children:[(0,e.jsx)(j.nA,{children:(0,e.jsxs)("div",{className:"space-y-1",children:[(0,e.jsxs)("div",{className:"font-medium text-blue-600 dark:text-blue-400",children:["Contract"," ",a.contract?.contract_number||"#"+(a.contract_id?.slice(0,8)||"N/A")]}),(0,e.jsx)("div",{className:"text-sm",children:a.vehicle?`${a.vehicle.make} ${a.vehicle.model} (${a.vehicle.year})`:"Unknown Vehicle"}),(0,e.jsx)("div",{className:"text-xs text-muted-foreground",children:a.vehicle?.registration})]})}),(0,e.jsx)(j.nA,{children:(0,e.jsxs)("div",{className:"space-y-1",children:[(0,e.jsxs)("div",{className:"font-medium flex items-center gap-1",children:[(0,e.jsx)(k.KJW,{className:"h-3 w-3"}),a.lessee_name]}),(0,e.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,e.jsx)(k.gE4,{className:"h-3 w-3"}),a.lessee_email]}),(0,e.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,e.jsx)(k.bcf,{className:"h-3 w-3"}),a.lessee_phone]})]})}),(0,e.jsx)(j.nA,{children:(0,e.jsxs)("div",{className:"space-y-1",children:[(0,e.jsxs)("div",{className:"text-sm",children:[(0,e.jsx)("span",{className:"font-medium",children:"Start:"})," ",W(a.lease_start_date)]}),(0,e.jsxs)("div",{className:"text-sm",children:[(0,e.jsx)("span",{className:"font-medium",children:"End:"})," ",W(a.lease_end_date)]}),null!==b&&b<=30&&b>=0&&(0,e.jsxs)("div",{className:"text-xs text-orange-600 dark:text-orange-400 font-medium flex items-center gap-1",children:[(0,e.jsx)(k.hcu,{className:"h-3 w-3"}),"Expires in ",b," days"]})]})}),(0,e.jsx)(j.nA,{children:(0,e.jsxs)("div",{className:"space-y-1",children:[(0,e.jsxs)("div",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:["$",a.daily_rate?.toLocaleString()||"0","/day"]}),(0,e.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Monthly: $",(30*(a.daily_rate||0)).toLocaleString()]})]})}),(0,e.jsx)(j.nA,{children:(0,e.jsxs)("div",{className:"space-y-2",children:[(a=>{let b={active:{label:"Active",variant:"default",icon:k.rAV,color:"text-green-600 dark:text-green-400"},pending:{label:"Pending",variant:"secondary",icon:k.zD7,color:"text-yellow-600 dark:text-yellow-400"},expired:{label:"Expired",variant:"destructive",icon:k.Jpz,color:"text-red-600 dark:text-red-400"},terminated:{label:"Terminated",variant:"outline",icon:k.Jpz,color:"text-muted-foreground"},upcoming:{label:"Upcoming",variant:"secondary",icon:k.VvS,color:"text-blue-600 dark:text-blue-400"}},c=b[a]||b.pending,d=c.icon;return(0,e.jsxs)(m.E,{variant:c.variant,className:"gap-1",children:[(0,e.jsx)(d,{className:`h-3 w-3 ${c.color}`}),c.label]})})(a.lease_status),(a=>{let b={draft:{label:"Draft",variant:"secondary",color:"bg-gray-100 dark:bg-gray-900/20 text-gray-800 dark:text-gray-400"},sent:{label:"Sent",variant:"default",color:"bg-blue-100 dark:bg-blue-900/20 text-blue-800 dark:text-blue-400"},paid:{label:"Paid",variant:"default",color:"bg-green-100 dark:bg-green-900/20 text-green-800 dark:text-green-400"},overdue:{label:"Overdue",variant:"destructive",color:"bg-red-100 dark:bg-red-900/20 text-red-800 dark:text-red-400"},cancelled:{label:"Cancelled",variant:"outline",color:"bg-gray-100 dark:bg-gray-900/20 text-gray-600 dark:text-gray-500"}},c=b[a]||b.draft;return(0,e.jsx)(m.E,{variant:c.variant,className:c.color,children:c.label})})(a.payment_status)]})}),(0,e.jsx)(j.nA,{children:(0,e.jsxs)(q.rI,{children:[(0,e.jsx)(q.ty,{asChild:!0,children:(0,e.jsx)(h.$,{variant:"ghost",className:"h-8 w-8 p-0",children:(0,e.jsx)(k.GvN,{className:"h-4 w-4"})})}),(0,e.jsxs)(q.SQ,{align:"end",children:[(0,e.jsxs)(q._2,{onClick:()=>{E(a),C(!0)},children:[(0,e.jsx)(k.kU3,{className:"mr-2 h-4 w-4"}),"View Details"]}),(0,e.jsxs)(q._2,{onClick:()=>{E(a),d(!0)},children:[(0,e.jsx)(k.ffu,{className:"mr-2 h-4 w-4"}),"Edit Lease"]}),(0,e.jsxs)(q._2,{onClick:()=>V(a),children:[(0,e.jsx)(k.iUU,{className:"mr-2 h-4 w-4"}),"Generate Invoice"]}),(0,e.jsx)(q.mB,{}),(0,e.jsxs)(q._2,{onClick:()=>{var b;return b=a.id,void U.mutate(b)},className:"text-destructive",children:[(0,e.jsx)(k.TBR,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},a.id)})})]})})})]}),(0,e.jsx)(p.lG,{open:c,onOpenChange:d,children:(0,e.jsxs)(p.Cf,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,e.jsxs)(p.c7,{children:[(0,e.jsx)(p.L3,{children:D?"Edit Lease Agreement":"New Lease Agreement"}),(0,e.jsx)(p.rr,{children:D?"Update the lease agreement details and terms.":"Create a new vehicle lease agreement with customer details and terms."})]}),(0,e.jsx)(z.R,{lease:D,onSuccess:()=>{d(!1),E(null),b.invalidateQueries({queryKey:["vehicle-leases"]})},onCancel:()=>{d(!1),E(null)}})]})}),(0,e.jsx)(A.$,{lease:D,open:B,onOpenChange:C})]})})}[g,h,j,l,m,n,o,p,q,y,z,A]=B.then?(await B)():B,d()}catch(a){d(a)}})},75979:a=>{a.exports=import("tailwind-merge")},78059:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{p:()=>i});var e=c(8732),f=c(82015),g=c(87092),h=a([g]);g=(h.then?(await h)():h)[0];let i=f.forwardRef(({className:a,type:b,onAddItem:c,onRemoveItem:d,showAddButton:f,showRemoveButton:h,addButtonLabel:i,removeButtonLabel:j,...k},l)=>(0,e.jsxs)("div",{className:f||h?"flex items-center gap-2":"",children:[(0,e.jsx)("input",{type:b,className:(0,g.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus:outline-none focus:ring-0 focus-visible:ring-0 focus:ring-offset-0 focus-visible:ring-offset-0 focus:border-ring focus-visible:border-ring disabled:cursor-not-allowed disabled:opacity-50 transition-colors",a),ref:l,onKeyDown:c?a=>{"Enter"===a.key&&c&&(a.preventDefault(),c())}:void 0,...k}),f&&c&&(0,e.jsx)("button",{type:"button",className:"inline-flex h-10 items-center justify-center rounded-md bg-primary px-3 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90",onClick:c,children:i||"Add"}),h&&d&&(0,e.jsx)("button",{type:"button",className:"inline-flex h-10 items-center justify-center rounded-md bg-destructive px-3 py-2 text-sm font-medium text-destructive-foreground hover:bg-destructive/90",onClick:d,children:j||"Remove"})]}));i.displayName="Input",d()}catch(a){d(a)}})},82015:a=>{a.exports=require("react")},85072:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{S:()=>k});var e=c(8732),f=c(82015),g=c(25665),h=c(74952),i=c(87092),j=a([g,i]);[g,i]=j.then?(await j)():j;let k=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Root,{ref:c,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus:outline-none focus:ring-0 focus-visible:ring-0 focus:ring-offset-0 focus-visible:ring-offset-0 focus:border-ring focus-visible:border-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground transition-colors",a),...b,children:(0,e.jsx)(g.Indicator,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,e.jsx)(h.Jlk,{className:"h-4 w-4"})})}));k.displayName=g.Root.displayName,d()}catch(a){d(a)}})},86093:a=>{a.exports=require("react-day-picker")},87967:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{T:()=>i});var e=c(8732),f=c(82015),g=c(87092),h=a([g]);g=(h.then?(await h)():h)[0];let i=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("textarea",{className:(0,g.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-0 focus-visible:ring-0 focus:ring-offset-0 focus-visible:ring-offset-0 focus:border-ring focus-visible:border-ring disabled:cursor-not-allowed disabled:opacity-50 transition-colors",a),ref:c,...b}));i.displayName="Textarea",d()}catch(a){d(a)}})},90192:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{SQ:()=>m,_2:()=>n,lp:()=>o,mB:()=>p,rI:()=>k,ty:()=>l});var e=c(8732),f=c(82015),g=c(36307),h=c(74952),i=c(87092),j=a([g,i]);[g,i]=j.then?(await j)():j;let k=g.Root,l=g.Trigger;g.Group,g.Portal,g.Sub,g.RadioGroup,f.forwardRef(({className:a,inset:b,children:c,...d},f)=>(0,e.jsxs)(g.SubTrigger,{ref:f,className:(0,i.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",b&&"pl-8",a),...d,children:[c,(0,e.jsx)(h.c_$,{className:"ml-auto h-4 w-4"})]})).displayName=g.SubTrigger.displayName,f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.SubContent,{ref:c,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...b})).displayName=g.SubContent.displayName;let m=f.forwardRef(({className:a,sideOffset:b=4,...c},d)=>(0,e.jsx)(g.Portal,{children:(0,e.jsx)(g.Content,{ref:d,sideOffset:b,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...c})}));m.displayName=g.Content.displayName;let n=f.forwardRef(({className:a,inset:b,...c},d)=>(0,e.jsx)(g.Item,{ref:d,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",b&&"pl-8",a),...c}));n.displayName=g.Item.displayName,f.forwardRef(({className:a,children:b,checked:c,...d},f)=>(0,e.jsxs)(g.CheckboxItem,{ref:f,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),checked:c,...d,children:[(0,e.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,e.jsx)(g.ItemIndicator,{children:(0,e.jsx)(h.Jlk,{className:"h-4 w-4"})})}),b]})).displayName=g.CheckboxItem.displayName,f.forwardRef(({className:a,children:b,...c},d)=>(0,e.jsxs)(g.RadioItem,{ref:d,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...c,children:[(0,e.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,e.jsx)(g.ItemIndicator,{children:(0,e.jsx)(h.jlt,{className:"h-2 w-2 fill-current"})})}),b]})).displayName=g.RadioItem.displayName;let o=f.forwardRef(({className:a,inset:b,...c},d)=>(0,e.jsx)(g.Label,{ref:d,className:(0,i.cn)("px-2 py-1.5 text-sm font-semibold",b&&"pl-8",a),...c}));o.displayName=g.Label.displayName;let p=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Separator,{ref:c,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",a),...b}));p.displayName=g.Separator.displayName,d()}catch(a){d(a)}})},93939:a=>{a.exports=require("@supabase/supabase-js")},95148:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{w:()=>j});var e=c(8732),f=c(82015),g=c(38827),h=c(87092),i=a([g,h]);[g,h]=i.then?(await i)():i;let j=f.forwardRef(({className:a,orientation:b="horizontal",decorative:c=!0,...d},f)=>(0,e.jsx)(g.Root,{ref:f,decorative:c,orientation:b,className:(0,h.cn)("shrink-0 bg-border","horizontal"===b?"h-[1px] w-full":"h-full w-[1px]",a),...d}));j.displayName=g.Root.displayName,d()}catch(a){d(a)}})},98825:a=>{a.exports=import("@hookform/resolvers/zod")}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[4952,5611,5781,1913,4780,8747],()=>b(b.s=71903));module.exports=c})();