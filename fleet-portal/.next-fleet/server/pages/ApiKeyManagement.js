"use strict";(()=>{var a={};a.id=3532,a.ids=[636,3220,3532,4072],a.modules={4072:(a,b,c)=>{c.d(b,{ApiKeyService:()=>e});var d=c(95965);class e{static async getApiKeyByName(a){try{let{data:b,error:c}=await d.N.from("api_keys").select("key_value, is_active, expires_at").eq("name",a).eq("is_active",!0).order("created_at",{ascending:!1});if(c)return console.warn(`Could not fetch API key '${a}' from database:`,c.message),null;if(!b||0===b.length)return console.warn(`API key '${a}' not found in database`),null;let e=b[0];if(e.expires_at&&new Date(e.expires_at)<new Date)return console.warn(`API key '${a}' has expired`),null;return console.log(`✅ Successfully loaded API key '${a}' from database`),e.key_value}catch(b){return console.warn(`Error fetching API key '${a}' from database:`,b),null}}static async getAllApiKeys(){try{let{data:a,error:b}=await d.N.from("api_keys").select("*").order("created_at",{ascending:!1});if(b)return console.error("Error fetching API keys:",b),[];return a||[]}catch(a){return console.error("Error fetching API keys:",a),[]}}static async createApiKey(a,b,c=[],d){try{return console.log("⚠️ Database API key creation disabled - schema not available"),null}catch(a){return console.error("Error creating API key:",a),null}}static async updateApiKey(a,b){try{return console.log("⚠️ Database API key update disabled - schema not available"),null}catch(a){return console.error("Error updating API key:",a),null}}static async deactivateApiKey(a){try{return console.log("⚠️ Database API key deactivation disabled - schema not available"),!1}catch(a){return console.error("Error deactivating API key:",a),!1}}static async deleteApiKey(a){try{return console.log("⚠️ Database API key deletion disabled - schema not available"),!1}catch(a){return console.error("Error deleting API key:",a),!1}}}},4720:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{E:()=>i});var e=c(8732);c(82015);var f=c(8938),g=c(87092),h=a([f,g]);[f,g]=h.then?(await h)():h;let j=(0,f.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i({className:a,variant:b,...c}){return(0,e.jsx)("div",{className:(0,g.cn)(j({variant:b}),a),...c})}d()}catch(a){d(a)}})},8732:a=>{a.exports=require("react/jsx-runtime")},8938:a=>{a.exports=import("class-variance-authority")},9640:a=>{a.exports=import("@radix-ui/react-slot")},9812:a=>{a.exports=import("@radix-ui/react-switch")},16235:a=>{a.exports=import("@radix-ui/react-toast")},20598:a=>{a.exports=import("@radix-ui/react-label")},28462:a=>{a.exports=import("@tanstack/react-query")},33873:a=>{a.exports=require("path")},39655:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{BT:()=>l,Wu:()=>m,ZB:()=>k,Zp:()=>i,aR:()=>j,wL:()=>n});var e=c(8732),f=c(82015),g=c(87092),h=a([g]);g=(h.then?(await h)():h)[0];let i=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("div",{ref:c,className:(0,g.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...b}));i.displayName="Card";let j=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("div",{ref:c,className:(0,g.cn)("flex flex-col space-y-1.5 p-6",a),...b}));j.displayName="CardHeader";let k=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("h3",{ref:c,className:(0,g.cn)("text-2xl font-semibold leading-none tracking-tight",a),...b}));k.displayName="CardTitle";let l=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("p",{ref:c,className:(0,g.cn)("text-sm text-muted-foreground",a),...b}));l.displayName="CardDescription";let m=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("div",{ref:c,className:(0,g.cn)("p-6 pt-0",a),...b}));m.displayName="CardContent";let n=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("div",{ref:c,className:(0,g.cn)("flex items-center p-6 pt-0",a),...b}));n.displayName="CardFooter",d()}catch(a){d(a)}})},40273:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{J:()=>l});var e=c(8732),f=c(82015),g=c(20598),h=c(8938),i=c(87092),j=a([g,h,i]);[g,h,i]=j.then?(await j)():j;let k=(0,h.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Root,{ref:c,className:(0,i.cn)(k(),a),...b}));l.displayName=g.Root.displayName,d()}catch(a){d(a)}})},40361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},41415:a=>{a.exports=import("sonner")},46060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},48303:a=>{a.exports=import("@radix-ui/react-tooltip")},50802:a=>{a.exports=import("clsx")},54331:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{config:()=>r,default:()=>n,getServerSideProps:()=>q,getStaticPaths:()=>p,getStaticProps:()=>o,handler:()=>z,reportWebVitals:()=>s,routeModule:()=>y,unstable_getServerProps:()=>w,unstable_getServerSideProps:()=>x,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>u,unstable_getStaticProps:()=>t});var e=c(63885),f=c(80237),g=c(81413),h=c(65611),i=c.n(h),j=c(74780),k=c(81256),l=c(12289),m=a([j,k]);[j,k]=m.then?(await m)():m;let n=(0,g.M)(k,"default"),o=(0,g.M)(k,"getStaticProps"),p=(0,g.M)(k,"getStaticPaths"),q=(0,g.M)(k,"getServerSideProps"),r=(0,g.M)(k,"config"),s=(0,g.M)(k,"reportWebVitals"),t=(0,g.M)(k,"unstable_getStaticProps"),u=(0,g.M)(k,"unstable_getStaticPaths"),v=(0,g.M)(k,"unstable_getStaticParams"),w=(0,g.M)(k,"unstable_getServerProps"),x=(0,g.M)(k,"unstable_getServerSideProps"),y=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/ApiKeyManagement",pathname:"/ApiKeyManagement",bundlePath:"",filename:""},distDir:".next-fleet",relativeProjectDir:"",components:{App:j.default,Document:i()},userland:k}),z=(0,l.U)({srcPage:"/ApiKeyManagement",config:r,userland:k,routeModule:y,getStaticPaths:p,getStaticProps:o,getServerSideProps:q});d()}catch(a){d(a)}})},57312:a=>{a.exports=import("next-themes")},75979:a=>{a.exports=import("tailwind-merge")},78059:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{p:()=>i});var e=c(8732),f=c(82015),g=c(87092),h=a([g]);g=(h.then?(await h)():h)[0];let i=f.forwardRef(({className:a,type:b,onAddItem:c,onRemoveItem:d,showAddButton:f,showRemoveButton:h,addButtonLabel:i,removeButtonLabel:j,...k},l)=>(0,e.jsxs)("div",{className:f||h?"flex items-center gap-2":"",children:[(0,e.jsx)("input",{type:b,className:(0,g.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus:outline-none focus:ring-0 focus-visible:ring-0 focus:ring-offset-0 focus-visible:ring-offset-0 focus:border-ring focus-visible:border-ring disabled:cursor-not-allowed disabled:opacity-50 transition-colors",a),ref:l,onKeyDown:c?a=>{"Enter"===a.key&&c&&(a.preventDefault(),c())}:void 0,...k}),f&&c&&(0,e.jsx)("button",{type:"button",className:"inline-flex h-10 items-center justify-center rounded-md bg-primary px-3 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90",onClick:c,children:i||"Add"}),h&&d&&(0,e.jsx)("button",{type:"button",className:"inline-flex h-10 items-center justify-center rounded-md bg-destructive px-3 py-2 text-sm font-medium text-destructive-foreground hover:bg-destructive/90",onClick:d,children:j||"Remove"})]}));i.displayName="Input",d()}catch(a){d(a)}})},81256:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>h});var e=c(8732);c(82015);var f=c(97512),g=a([f]);function h(){return(0,e.jsxs)("div",{className:"container mx-auto py-6",children:[(0,e.jsxs)("div",{className:"mb-6",children:[(0,e.jsx)("h1",{className:"text-3xl font-bold",children:"API Key Management"}),(0,e.jsx)("p",{className:"text-muted-foreground",children:"Manage API keys stored in the database for various services."})]}),(0,e.jsx)(f.z,{})]})}f=(g.then?(await g)():g)[0],d()}catch(a){d(a)}})},82015:a=>{a.exports=require("react")},86009:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{d:()=>j});var e=c(8732),f=c(82015),g=c(9812),h=c(87092),i=a([g,h]);[g,h]=i.then?(await i)():i;let j=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Root,{className:(0,h.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus:outline-none focus:ring-0 focus-visible:ring-0 focus:ring-offset-0 focus-visible:ring-offset-0 focus:border-ring focus-visible:border-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...b,ref:c,children:(0,e.jsx)(g.Thumb,{className:(0,h.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));j.displayName=g.Root.displayName,d()}catch(a){d(a)}})},93939:a=>{a.exports=require("@supabase/supabase-js")},97512:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{z:()=>p});var e=c(8732),f=c(82015),g=c(66345),h=c(78059),i=c(40273),j=c(39655),k=c(4720),l=c(86009),m=c(4072),n=c(41415),o=a([g,h,i,j,k,l,n]);function p(){let[a,b]=(0,f.useState)([]),[c,d]=(0,f.useState)(!0),[o,p]=(0,f.useState)(""),[q,r]=(0,f.useState)(""),[s,t]=(0,f.useState)([]),[u,v]=(0,f.useState)(!1),w=async()=>{try{d(!0);let a=await m.ApiKeyService.getAllApiKeys();b(a)}catch(a){console.error("Error loading API keys:",a),n.toast.error("Failed to load API keys")}finally{d(!1)}},x=async()=>{if(!o||!q)return void n.toast.error("Please fill in all required fields");try{v(!0),await m.ApiKeyService.createApiKey(o,q,s)?(n.toast.success("API key created successfully"),p(""),r(""),t([]),w()):n.toast.error("Failed to create API key")}catch(a){console.error("Error creating API key:",a),n.toast.error("Failed to create API key")}finally{v(!1)}},y=async(a,b)=>{try{await m.ApiKeyService.updateApiKey(a,{is_active:!b})?(n.toast.success(`API key ${!b?"activated":"deactivated"}`),w()):n.toast.error("Failed to update API key")}catch(a){console.error("Error updating API key:",a),n.toast.error("Failed to update API key")}},z=async a=>{if(confirm("Are you sure you want to delete this API key?"))try{await m.ApiKeyService.deleteApiKey(a)?(n.toast.success("API key deleted successfully"),w()):n.toast.error("Failed to delete API key")}catch(a){console.error("Error deleting API key:",a),n.toast.error("Failed to delete API key")}},A=async()=>{try{v(!0),await m.ApiKeyService.createApiKey("google_maps","AIzaSyB6wCOi9B8kcTLiwrE7KjV93882exWNKAY",["maps","geocoding","places","routing"])?(n.toast.success("Google Maps API key inserted successfully"),w()):n.toast.error("Failed to insert Google Maps API key")}catch(a){console.error("Error inserting Google Maps API key:",a),n.toast.error("Failed to insert Google Maps API key")}finally{v(!1)}};return c?(0,e.jsx)("div",{className:"p-4",children:"Loading API keys..."}):(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsxs)(j.Zp,{children:[(0,e.jsxs)(j.aR,{children:[(0,e.jsx)(j.ZB,{children:"API Key Manager"}),(0,e.jsx)(j.BT,{children:"Manage API keys stored in the database. These keys are used by the application for various services like Google Maps."})]}),(0,e.jsxs)(j.Wu,{className:"space-y-4",children:[(0,e.jsxs)("div",{className:"flex gap-2",children:[(0,e.jsx)(g.$,{onClick:A,disabled:u,children:u?"Inserting...":"Insert Google Maps Key"}),(0,e.jsx)(g.$,{variant:"outline",onClick:w,children:"Refresh"})]}),(0,e.jsxs)("div",{className:"border-t pt-4",children:[(0,e.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Create New API Key"}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(i.J,{htmlFor:"keyName",children:"Name"}),(0,e.jsx)(h.p,{id:"keyName",value:o,onChange:a=>p(a.target.value),placeholder:"e.g., google_maps"})]}),(0,e.jsxs)("div",{children:[(0,e.jsx)(i.J,{htmlFor:"keyValue",children:"Key Value"}),(0,e.jsx)(h.p,{id:"keyValue",value:q,onChange:a=>r(a.target.value),placeholder:"Enter API key value"})]})]}),(0,e.jsx)("div",{className:"mt-4",children:(0,e.jsx)(g.$,{onClick:x,disabled:u||!o||!q,children:u?"Creating...":"Create API Key"})})]})]})]}),(0,e.jsxs)(j.Zp,{children:[(0,e.jsxs)(j.aR,{children:[(0,e.jsx)(j.ZB,{children:"Existing API Keys"}),(0,e.jsxs)(j.BT,{children:[a.length," API key(s) found"]})]}),(0,e.jsx)(j.Wu,{children:0===a.length?(0,e.jsx)("p",{className:"text-muted-foreground",children:"No API keys found. Create one above."}):(0,e.jsx)("div",{className:"space-y-4",children:a.map(a=>(0,e.jsxs)("div",{className:"border rounded-lg p-4 space-y-2",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)("h4",{className:"font-semibold",children:a.name}),(0,e.jsx)(k.E,{variant:a.is_active?"default":"secondary",children:a.is_active?"Active":"Inactive"})]}),(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(l.d,{checked:a.is_active,onCheckedChange:()=>y(a.id,a.is_active)}),(0,e.jsx)(g.$,{variant:"destructive",size:"sm",onClick:()=>z(a.id),children:"Delete"})]})]}),(0,e.jsxs)("div",{className:"text-sm text-muted-foreground",children:[(0,e.jsxs)("p",{children:["Key: ",a.key_value.substring(0,20),"..."]}),(0,e.jsxs)("p",{children:["Permissions: ",a.permissions.join(", ")]}),(0,e.jsxs)("p",{children:["Created: ",new Date(a.created_at).toLocaleDateString()]}),a.expires_at&&(0,e.jsxs)("p",{children:["Expires: ",new Date(a.expires_at).toLocaleDateString()]})]})]},a.id))})})]})]})}[g,h,i,j,k,l,n]=o.then?(await o)():o,d()}catch(a){d(a)}})}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[4952,5611,5781,4780],()=>b(b.s=54331));module.exports=c})();