"use strict";(()=>{var a={};a.id=6049,a.ids=[636,3220,6049],a.modules={2025:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{Q:()=>m});var e=c(8732),f=c(68953),g=c(89888),h=c(40235),i=c(47492),j=c(86629),k=c(31600),l=a([f,g,h,i,j,k]);function m({activeTab:a,setActiveTab:b,vehiclesData:c,tripsData:d,maintenanceData:l,fuelData:m,driversData:n,sparePartsData:o,isLoadingVehicles:p,isLoadingTrips:q,isLoadingMaintenance:r,isLoadingFuel:s,isLoadingDrivers:t,isLoadingSpareparts:u,timeRange:v,dateRange:w}){return(0,e.jsxs)(f.tU,{value:a,onValueChange:b,children:[(0,e.jsxs)(f.j7,{className:"mb-4",children:[(0,e.jsx)(f.Xi,{value:"trips",children:"Trips"}),(0,e.jsx)(f.Xi,{value:"vehicles",children:"Vehicles"}),(0,e.jsx)(f.Xi,{value:"maintenance",children:"Maintenance"}),(0,e.jsx)(f.Xi,{value:"fuel",children:"Fuel"}),(0,e.jsx)(f.Xi,{value:"drivers",children:"Drivers"})]}),(0,e.jsx)(f.av,{value:"trips",children:(0,e.jsx)(h.r,{tripsData:d,isLoading:q,timeRange:v,dateRange:w})}),(0,e.jsx)(f.av,{value:"vehicles",children:(0,e.jsx)(g.k,{vehiclesData:c,isLoading:p,timeRange:v,dateRange:w})}),(0,e.jsx)(f.av,{value:"maintenance",children:(0,e.jsx)(i.Q,{maintenanceData:l,isLoading:r,timeRange:v,dateRange:w})}),(0,e.jsx)(f.av,{value:"fuel",children:(0,e.jsx)(j.d,{fuelData:m,isLoading:s,timeRange:v,dateRange:w})}),(0,e.jsx)(f.av,{value:"drivers",children:(0,e.jsx)(k.s,{driversData:n,isLoading:t,timeRange:v,dateRange:w})})]})}[f,g,h,i,j,k]=l.then?(await l)():l,d()}catch(a){d(a)}})},8732:a=>{a.exports=require("react/jsx-runtime")},8938:a=>{a.exports=import("class-variance-authority")},9640:a=>{a.exports=import("@radix-ui/react-slot")},11178:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{U:()=>n});var e=c(8732),f=c(71913),g=c(74952);c(82015);var h=c(87092),i=c(66345),j=c(19771),k=c(34750),l=c(20256),m=a([h,i,j,k]);function n({value:a,date:b,onChange:c,onDateChange:d,className:m}){let n=a||b,o=(0,l.a)();return(0,e.jsx)("div",{className:(0,h.cn)("grid gap-2",m),children:(0,e.jsxs)(k.AM,{children:[(0,e.jsx)(k.Wv,{asChild:!0,children:(0,e.jsxs)(i.$,{id:"date",variant:"outline",className:(0,h.cn)("w-full justify-start text-left font-normal",!n&&"text-muted-foreground"),children:[(0,e.jsx)(g.VvS,{className:"mr-2 h-4 w-4"}),n?.from?n.to?(0,e.jsxs)(e.Fragment,{children:[(0,f.GP)(n.from,"LLL dd, y")," -"," ",(0,f.GP)(n.to,"LLL dd, y")]}):(0,f.GP)(n.from,"LLL dd, y"):(0,e.jsx)("span",{children:"Pick a date range"})]})}),(0,e.jsx)(k.hl,{className:"w-auto p-0 max-w-[calc(100vw-2rem)]",align:"start",side:"bottom",children:(0,e.jsx)(j.V,{initialFocus:!0,mode:"range",defaultMonth:n?.from,selected:n,onSelect:c||d,numberOfMonths:o?1:2})})]})})}[h,i,j,k]=m.then?(await m)():m,d()}catch(a){d(a)}})},14505:a=>{a.exports=import("@radix-ui/react-scroll-area")},14697:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{Q:()=>n});var e=c(65515),f=c.n(e),g=c(83501),h=c(71913),i=c(41415),j=a([g,i]);[g,i]=j.then?(await j)():j;let m=null;async function k(){if(m)return m;try{let a=await new Promise((a,b)=>{let c=new Image;c.crossOrigin="anonymous",c.onload=()=>{let d=document.createElement("canvas");d.width=Math.max(1,Math.floor(192)),d.height=Math.max(1,Math.floor(56));let e=d.getContext("2d");if(!e)return b(Error("Canvas 2D context unavailable"));e.imageSmoothingEnabled=!0,e.imageSmoothingQuality="high",e.drawImage(c,0,0,d.width,d.height),a(d.toDataURL("image/png",1))},c.onerror=a=>b(a),c.src="/images/Koormatics-logo.png"});return m=a,a}catch(a){return console.error("Logo image failed to load:",a),null}}function l(a,b,c){let d=a.internal.pageSize.getWidth(),e=a.internal.pageSize.getHeight();if(a.setFillColor(255,255,255),a.rect(0,0,d,22,"F"),a.setFillColor(59,130,246),a.rect(0,0,d,2,"F"),c)try{a.addImage(c,"PNG",10,5,48,14)}catch{}else a.setTextColor(59,130,246),a.setFont("helvetica","bold"),a.setFontSize(12),a.text("KOORMATICS",10,14);a.setTextColor(17,24,39),a.setFont("helvetica","bold"),a.setFontSize(16);let f=a.getTextWidth(b);a.text(b,(d-f)/2,14),a.setFont("helvetica","normal"),a.setFontSize(10),a.setTextColor(107,114,128);let g=(0,h.GP)(new Date,"MMM dd, yyyy 'at' HH:mm");a.text(g,d-10,14,{align:"right"}),a.setDrawColor(226,232,240),a.setLineWidth(.3),a.line(10,22,d-10,22);let i=e-16;a.setFillColor(34,197,94),a.rect(0,i-2,d,2,"F"),a.setFillColor(59,130,246),a.rect(0,i,d,16,"F"),a.setTextColor(255,255,255),a.setFont("helvetica","normal"),a.setFontSize(9),a.text("Koormatics - Transportation & Logistics",10,i+11);let j=a.internal.getCurrentPageInfo?a.internal.getCurrentPageInfo().pageNumber:1,k=a.internal.getNumberOfPages();a.text(`Page ${j} of ${k}`,d/2,i+11,{align:"center"}),a.text((0,h.GP)(new Date,"dd/MM/yyyy HH:mm"),d-10,i+11,{align:"right"})}let n=async(a,b,c)=>{if(!a||0===a.length)return void i.toast.error("No data available to export to PDF");try{let d=new(f())({orientation:"landscape",unit:"mm",format:"a4"}),e=d.internal.pageSize.getWidth();d.internal.pageSize.getHeight();let j=await k();l(d,b,j),"trips-report"===c?function(a,b,c){let d=b.map(a=>{let b="N/A";a.passengers&&a.passengers.length>0&&(b=a.passengers.join(", "));let c="N/A";a.stops&&a.stops.length>0&&(c=1===a.stops.length?a.stops[0]:a.stops.map(a=>`• ${a}`).join("\n"));let d="N/A";if(a.time)try{d=new Date(`2000-01-01T${a.time}`).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch(b){d=a.time}let e="N/A";if(a.display_type||a.service_type){let b=a.display_type||a.service_type;e="airport_pickup"===b?"Airport Pickup":"airport_dropoff"===b?"Airport Dropoff":"round_trip"===b?"Round Trip":"one_way"===b?"One Way Transfer":"full_day_hire"===b?"Full Day Hire":"half_day"===b?"Half Day":b.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase())}let f="N/A";if(a.airline||a.flight_number){let b=[];a.airline&&b.push(a.airline),a.flight_number&&b.push(a.flight_number),a.terminal&&b.push(`Terminal ${a.terminal}`),f=b.join(" ")}return[(0,h.GP)(new Date(a.date),"MMM dd, yyyy"),a.clients?.name||"N/A",b,e,a.pickup_location||"N/A",a.dropoff_location||"N/A",c,d,f,a.vehicles?`${a.vehicles.make} ${a.vehicles.model}`:"N/A",a.drivers?.name||"N/A",a.status||"N/A"]});(0,g.autoTable)(a,{startY:30,head:[["Date","Client","Passengers","Service Type","Pickup Location","Dropoff Location","Stops","Scheduled Time","Flight Info","Vehicle","Driver","Status"]],body:d,theme:"grid",headStyles:{fillColor:[59,130,246],textColor:[255,255,255],fontStyle:"bold",fontSize:8},styles:{overflow:"linebreak",cellWidth:"wrap"},bodyStyles:{fontSize:7,cellPadding:1.5},columnStyles:{2:{cellWidth:30,halign:"left",valign:"middle",fontSize:7,lineColor:[200,200,200]},6:{cellWidth:25,halign:"left",valign:"top",fontSize:6.5,lineColor:[200,200,200]}},alternateRowStyles:{fillColor:[248,250,252]},margin:{left:10,right:10},tableWidth:c-20})}(d,a,e):"vehicles-report"===c?function(a,b,c){let d=b.map(a=>[a.make&&a.model?`${a.make} ${a.model}`:"N/A",a.status||"N/A",a.type||"N/A",a.registration||"N/A",a.year||"N/A",a.fuel_type||"N/A",a.mileage?`${a.mileage} km`:"N/A"]);(0,g.autoTable)(a,{startY:30,head:[["Vehicle","Status","Type","Registration","Year","Fuel Type","Mileage"]],body:d,theme:"grid",headStyles:{fillColor:[59,130,246],textColor:[255,255,255],fontStyle:"bold",fontSize:9},bodyStyles:{fontSize:8,cellPadding:2},alternateRowStyles:{fillColor:[248,250,252]},margin:{left:10,right:10},tableWidth:c-20})}(d,a,e):"maintenance-report"===c?function(a,b,c){let d=b.map(a=>[(0,h.GP)(new Date(a.date),"MMM dd, yyyy"),a.vehicles?`${a.vehicles.make} ${a.vehicles.model}`:"N/A",a.type||"N/A",a.description||"N/A",a.cost?`$${Number(a.cost).toFixed(2)}`:"$0.00",a.status||"N/A"]);(0,g.autoTable)(a,{startY:30,head:[["Date","Vehicle","Type","Description","Cost","Status"]],body:d,theme:"grid",headStyles:{fillColor:[59,130,246],textColor:[255,255,255],fontStyle:"bold",fontSize:9},bodyStyles:{fontSize:8,cellPadding:2},alternateRowStyles:{fillColor:[248,250,252]},margin:{left:10,right:10},tableWidth:c-20})}(d,a,e):"fuel-report"===c?function(a,b,c){let d=b.map(a=>[(0,h.GP)(new Date(a.date),"MMM dd, yyyy"),a.vehicles?`${a.vehicles.make} ${a.vehicles.model}`:"N/A",a.fuel_type||"N/A",a.volume?`${a.volume} L`:"N/A",a.mileage?`${a.mileage} km`:"N/A",a.cost?`$${Number(a.cost).toFixed(2)}`:"$0.00",a.filled_by||"N/A"]);(0,g.autoTable)(a,{startY:30,head:[["Date","Vehicle","Fuel Type","Volume","Mileage","Cost","Filled By"]],body:d,theme:"grid",headStyles:{fillColor:[59,130,246],textColor:[255,255,255],fontStyle:"bold",fontSize:9},bodyStyles:{fontSize:8,cellPadding:2},alternateRowStyles:{fillColor:[248,250,252]},margin:{left:10,right:10},tableWidth:c-20})}(d,a,e):"drivers-report"===c?function(a,b,c){let d=b.map(a=>[a.name||"N/A",a.contact||"N/A",a.license_type||"N/A",a.license_number||"N/A",a.license_expiry?(0,h.GP)(new Date(a.license_expiry),"MMM dd, yyyy"):"N/A",a.status||"N/A"]);(0,g.autoTable)(a,{startY:30,head:[["Name","Contact","License Type","License Number","Expiry Date","Status"]],body:d,theme:"grid",headStyles:{fillColor:[59,130,246],textColor:[255,255,255],fontStyle:"bold",fontSize:9},bodyStyles:{fontSize:8,cellPadding:2},alternateRowStyles:{fillColor:[248,250,252]},margin:{left:10,right:10},tableWidth:c-20})}(d,a,e):"financial-report"===c?function(a,b,c){let d=b.map(a=>[a.month||"N/A",a.revenue?`$${Number(a.revenue).toFixed(2)}`:"$0.00",a.expenses?`$${Number(a.expenses).toFixed(2)}`:"$0.00",a.profit?`$${Number(a.profit).toFixed(2)}`:"$0.00",a.maintenance?`$${Number(a.maintenance).toFixed(2)}`:"$0.00",a.fuel?`$${Number(a.fuel).toFixed(2)}`:"$0.00",a.spareparts?`$${Number(a.spareparts).toFixed(2)}`:"$0.00"]);(0,g.autoTable)(a,{startY:30,head:[["Month","Revenue","Expenses","Profit","Maintenance","Fuel","Spare Parts"]],body:d,theme:"grid",headStyles:{fillColor:[59,130,246],textColor:[255,255,255],fontStyle:"bold",fontSize:9},bodyStyles:{fontSize:8,cellPadding:2},alternateRowStyles:{fillColor:[248,250,252]},margin:{left:10,right:10},tableWidth:c-20})}(d,a,e):function(a,b,c,d){if(0===b.length){a.setFontSize(12),a.setTextColor(100,100,100),a.text("No data available",10,50);return}let e=new Set;b.forEach(a=>{Object.keys(a).forEach(a=>e.add(a))});let f=Array.from(e).slice(0,8),h=b.map(a=>f.map(b=>{let c=a[b];return null==c?"N/A":"object"==typeof c?JSON.stringify(c):"boolean"==typeof c?c?"Yes":"No":String(c)}));(0,g.autoTable)(a,{startY:30,head:[f.map(a=>String(a).toUpperCase())],body:h,theme:"grid",headStyles:{fillColor:[59,130,246],textColor:[255,255,255],fontStyle:"bold",fontSize:9},bodyStyles:{fontSize:8,cellPadding:2},alternateRowStyles:{fillColor:[248,250,252]},margin:{left:10,right:10},tableWidth:d-20})}(d,a,0,e);let m=d.internal.getNumberOfPages();for(let a=1;a<=m;a++)d.setPage(a),l(d,b,j);d.save(`${c}_${(0,h.GP)(new Date,"yyyy-MM-dd")}.pdf`),i.toast.success("PDF exported successfully")}catch(a){console.error("Error exporting PDF:",a),i.toast.error("Failed to export PDF. Please try again later.")}};d()}catch(a){d(a)}})},16235:a=>{a.exports=import("@radix-ui/react-toast")},19640:a=>{a.exports=import("@radix-ui/react-tabs")},19771:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{V:()=>m});var e=c(8732),f=c(82015),g=c(74952),h=c(86093),i=c(87092),j=c(66345),k=c(57049),l=a([i,j,k]);function m({className:a,classNames:b,showOutsideDays:c=!0,...d}){return(0,e.jsx)(h.DayPicker,{showOutsideDays:c,className:(0,i.cn)("p-3",a),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,i.cn)((0,j.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,i.cn)((0,j.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...b},components:{Dropdown:({value:a,onChange:b,children:c,...d})=>{let g=f.Children.toArray(c),h=g.find(b=>b.props.value===a);return(0,e.jsxs)(k.l6,{value:a?.toString(),onValueChange:a=>{b?.({target:{value:a}})},children:[(0,e.jsx)(k.bq,{className:"h-7 w-fit gap-1 rounded-md border-0 bg-transparent px-2 py-1 font-medium focus:ring-0 focus:ring-offset-0 [&>*:first-child]:mr-1",children:(0,e.jsx)(k.yv,{children:h?.props?.children||a})}),(0,e.jsx)(k.gC,{children:g.map((a,b)=>(0,e.jsx)(k.eb,{value:a.props.value?.toString()??"",children:a.props.children},`${a.props.value}-${b}`))})]})},IconLeft:({...a})=>(0,e.jsx)(g.JGc,{className:"h-4 w-4"}),IconRight:({...a})=>(0,e.jsx)(g.c_$,{className:"h-4 w-4"})},...d})}[i,j,k]=l.then?(await l)():l,m.displayName="Calendar",d()}catch(a){d(a)}})},20256:(a,b,c)=>{c.d(b,{a:()=>e});var d=c(82015);function e(){let[a,b]=d.useState(void 0);return d.useEffect(()=>{let a=window.matchMedia("(max-width: 767px)"),c=()=>{b(window.innerWidth<768)};return a.addEventListener("change",c),b(window.innerWidth<768),()=>a.removeEventListener("change",c)},[]),!!a}},25491:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{GF:()=>f.G,Q7:()=>e.Q});var e=c(14697),f=c(29419),g=a([e]);e=(g.then?(await g)():g)[0],d()}catch(a){d(a)}})},28462:a=>{a.exports=import("@tanstack/react-query")},29419:(a,b,c)=>{c.d(b,{G:()=>d});let d=(a,b)=>{if(!a||0===a.length)return void console.warn("No data available for CSV export");let c=[...a];"trips-report"===b&&(c=a.map(a=>({...a,client_name:a.clients?.name||"Unknown",client_type:a.clients?.type||"individual",passenger_count:a.passengers?.length||0,passenger_names:a.passengers?.join("; ")||"",vehicle_info:a.vehicles?`${a.vehicles.make||""} ${a.vehicles.model||""}`.trim():"Unassigned",driver_name:a.drivers?.name||"Not assigned",service_display:a.display_type||a.service_type||"Standard"})));let d=(a=>a&&0!==a.length?a.map(a=>{if(null==a)return{};let b={};return Object.entries(a).forEach(([a,c])=>{null===c||"object"!=typeof c||Array.isArray(c)?b[a]=c:Object.entries(c).forEach(([c,d])=>{b[`${a}_${c}`]=d})}),b}):[])(c);if(0===d.length)return void console.warn("No data to export after processing");let e=((a,b)=>{let c={"trips-report":["date","client_name","client_type","service_display","pickup_location","dropoff_location","vehicle_info","driver_name","status","passenger_count","passenger_names","amount"],"vehicles-report":["make","model","year","registration","type","status","color","vin","insurance_expiry","notes"],"drivers-report":["name","contact","email","phone","license_number","license_type","license_expiry","status"],"fuel-report":["date","vehicle_info","fuel_type","volume","cost","mileage","previous_mileage","current_mileage","notes"],"maintenance-report":["date","vehicle_info","description","status","cost","service_provider","next_scheduled","notes"]}[b]||[];return[...c.filter(b=>a.includes(b)),...a.filter(a=>!c.includes(a)).sort()]})(Array.from(new Set(d.flatMap(a=>Object.keys(a)))),b),f=e.map(a=>a.split("_").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" ")),g=new Blob([[[`"${b.replace("-"," ").toUpperCase()} - Generated on ${new Date().toLocaleDateString()}"`],[],f.map(a=>`"${a}"`),...d.map(a=>e.map(b=>{let c=a[b];if(null==c)return'""';if(b.includes("date")||b.includes("expiry"))try{let a=new Date(c);if(!isNaN(a.getTime()))return`"${a.toLocaleDateString()}"`}catch{}if(b.includes("cost")||b.includes("amount")){let a=Number(c);if(!isNaN(a))return`"$${a.toFixed(2)}"`}let d=String(c);return d.includes(",")||d.includes('"')||d.includes("\n")?`"${d.replace(/"/g,'""')}"`:`"${d}"`}))].map(a=>a.join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),h=URL.createObjectURL(g),i=document.createElement("a");i.setAttribute("href",h),i.setAttribute("download",`${b}_${new Date().toISOString().split("T")[0]}.csv`),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(h)}},31600:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{s:()=>o});var e=c(8732),f=c(71913),g=c(74952),h=c(39655),i=c(66345),j=c(48383),k=c(94142),l=c(25491),m=c(78855),n=a([h,i,j,k,l]);function o({driversData:a,isLoading:b,timeRange:c,dateRange:d}){return(0,m.m)(a,c,d),(0,e.jsxs)(h.Zp,{children:[(0,e.jsxs)(h.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(h.ZB,{children:"Drivers Report"}),(0,e.jsx)(h.BT,{children:"Overview of all drivers and their details"})]}),(0,e.jsxs)("div",{className:"flex gap-2",children:[(0,e.jsxs)(i.$,{variant:"outline",size:"sm",onClick:async()=>await (0,l.Q7)(a||[],"Drivers Report","drivers-report"),children:[(0,e.jsx)(g.ni1,{className:"mr-2 h-4 w-4"}),"PDF"]}),(0,e.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>(0,l.GF)(a||[],"drivers-report"),children:[(0,e.jsx)(g.f5X,{className:"mr-2 h-4 w-4"}),"CSV"]})]})]}),(0,e.jsx)(h.Wu,{children:(0,e.jsx)(k.F,{className:"h-[500px]",children:(0,e.jsxs)(j.XI,{children:[(0,e.jsx)(j.A0,{children:(0,e.jsxs)(j.Hj,{children:[(0,e.jsx)(j.nd,{children:"Name"}),(0,e.jsx)(j.nd,{children:"Contact"}),(0,e.jsx)(j.nd,{children:"License Type"}),(0,e.jsx)(j.nd,{children:"License No."}),(0,e.jsx)(j.nd,{children:"License Expiry"}),(0,e.jsx)(j.nd,{children:"Status"})]})}),(0,e.jsx)(j.BF,{children:b?(0,e.jsx)(j.Hj,{children:(0,e.jsx)(j.nA,{colSpan:6,className:"text-center",children:"Loading..."})}):a&&a.length>0?a.map(a=>(0,e.jsxs)(j.Hj,{children:[(0,e.jsx)(j.nA,{children:a.name}),(0,e.jsx)(j.nA,{children:a.contact}),(0,e.jsx)(j.nA,{children:a.license_type||"N/A"}),(0,e.jsx)(j.nA,{children:a.license_number||"N/A"}),(0,e.jsx)(j.nA,{children:a.license_expiry?(0,f.GP)(new Date(a.license_expiry),"MMM dd, yyyy"):"N/A"}),(0,e.jsx)(j.nA,{children:a.status})]},a.id)):(0,e.jsx)(j.Hj,{children:(0,e.jsx)(j.nA,{colSpan:6,className:"text-center",children:"No data available"})})})]})})})]})}[h,i,j,k,l]=n.then?(await n)():n,d()}catch(a){d(a)}})},33873:a=>{a.exports=require("path")},34750:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{AM:()=>j,Wv:()=>k,hl:()=>l});var e=c(8732),f=c(82015),g=c(60461),h=c(87092),i=a([g,h]);[g,h]=i.then?(await i)():i;let j=g.Root,k=g.Trigger,l=f.forwardRef(({className:a,align:b="center",sideOffset:c=4,...d},f)=>(0,e.jsx)(g.Portal,{children:(0,e.jsx)(g.Content,{ref:f,align:b,sideOffset:c,className:(0,h.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...d})}));l.displayName=g.Content.displayName,d()}catch(a){d(a)}})},39655:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{BT:()=>l,Wu:()=>m,ZB:()=>k,Zp:()=>i,aR:()=>j,wL:()=>n});var e=c(8732),f=c(82015),g=c(87092),h=a([g]);g=(h.then?(await h)():h)[0];let i=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("div",{ref:c,className:(0,g.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...b}));i.displayName="Card";let j=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("div",{ref:c,className:(0,g.cn)("flex flex-col space-y-1.5 p-6",a),...b}));j.displayName="CardHeader";let k=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("h3",{ref:c,className:(0,g.cn)("text-2xl font-semibold leading-none tracking-tight",a),...b}));k.displayName="CardTitle";let l=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("p",{ref:c,className:(0,g.cn)("text-sm text-muted-foreground",a),...b}));l.displayName="CardDescription";let m=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("div",{ref:c,className:(0,g.cn)("p-6 pt-0",a),...b}));m.displayName="CardContent";let n=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("div",{ref:c,className:(0,g.cn)("flex items-center p-6 pt-0",a),...b}));n.displayName="CardFooter",d()}catch(a){d(a)}})},40235:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{r:()=>o});var e=c(8732),f=c(71913),g=c(74952),h=c(39655),i=c(66345),j=c(48383),k=c(94142),l=c(25491),m=c(78855),n=a([h,i,j,k,l]);function o({tripsData:a,isLoading:b,timeRange:c,dateRange:d}){let n=(0,m.m)(a,c,d);return(0,e.jsxs)(h.Zp,{children:[(0,e.jsxs)(h.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(h.ZB,{children:"Trips Report"}),(0,e.jsx)(h.BT,{children:"All trips for the selected period"})]}),(0,e.jsxs)("div",{className:"flex gap-2",children:[(0,e.jsxs)(i.$,{variant:"outline",size:"sm",onClick:async()=>await (0,l.Q7)(n||[],"Trips Report","trips-report"),children:[(0,e.jsx)(g.ni1,{className:"mr-2 h-4 w-4"}),"PDF"]}),(0,e.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>(0,l.GF)(n||[],"trips-report"),children:[(0,e.jsx)(g.f5X,{className:"mr-2 h-4 w-4"}),"CSV"]})]})]}),(0,e.jsx)(h.Wu,{children:(0,e.jsx)(k.F,{className:"h-[500px]",children:(0,e.jsxs)(j.XI,{children:[(0,e.jsx)(j.A0,{children:(0,e.jsxs)(j.Hj,{children:[(0,e.jsx)(j.nd,{children:"Date"}),(0,e.jsx)(j.nd,{children:"Client"}),(0,e.jsx)(j.nd,{children:"Passengers"}),(0,e.jsx)(j.nd,{children:"Service Type"}),(0,e.jsx)(j.nd,{children:"Pick-up"}),(0,e.jsx)(j.nd,{children:"Drop-off"}),(0,e.jsx)(j.nd,{children:"Stops"}),(0,e.jsx)(j.nd,{children:"Vehicle"}),(0,e.jsx)(j.nd,{children:"Driver"}),(0,e.jsx)(j.nd,{children:"Status"})]})}),(0,e.jsx)(j.BF,{children:b?(0,e.jsx)(j.Hj,{children:(0,e.jsx)(j.nA,{colSpan:10,className:"text-center",children:"Loading..."})}):n&&n.length>0?n.map(a=>(0,e.jsxs)(j.Hj,{children:[(0,e.jsx)(j.nA,{children:(0,f.GP)(new Date(a.date),"MMM dd, yyyy")}),(0,e.jsx)(j.nA,{children:a.clients?.name||"N/A"}),(0,e.jsx)(j.nA,{children:a.passengers&&a.passengers.length>0?(0,e.jsx)("div",{className:"space-y-1",children:a.passengers.map((a,b)=>(0,e.jsx)("div",{className:"text-sm",children:a},b))}):(0,e.jsx)("span",{className:"text-muted-foreground",children:"—"})}),(0,e.jsx)(j.nA,{children:function(a){if(!a)return"N/A";if("airport_pickup"===a)return"Airport Pickup";if("airport_dropoff"===a)return"Airport Dropoff";if("round_trip"===a)return"Round Trip";if("one_way"===a)return"One Way Transfer";if("full_day_hire"===a)return"Full Day Hire";else if("half_day"===a)return"Half Day";else return a.replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase())}(a.display_type||a.service_type)}),(0,e.jsx)(j.nA,{children:a.pickup_location}),(0,e.jsx)(j.nA,{children:a.dropoff_location}),(0,e.jsx)(j.nA,{children:a.stops&&a.stops.length>0?(0,e.jsxs)("div",{className:"space-y-1",children:[a.stops.slice(0,3).map((a,b)=>(0,e.jsxs)("div",{className:"text-xs text-muted-foreground",children:["• ",a]},b)),a.stops.length>3&&(0,e.jsxs)("div",{className:"text-xs text-muted-foreground italic",children:["+",a.stops.length-3," more"]})]}):(0,e.jsx)("span",{className:"text-muted-foreground",children:"—"})}),(0,e.jsxs)(j.nA,{children:[a.vehicles?.make," ",a.vehicles?.model]}),(0,e.jsx)(j.nA,{children:a.drivers?.name}),(0,e.jsx)(j.nA,{children:a.status})]},a.id)):(0,e.jsx)(j.Hj,{children:(0,e.jsx)(j.nA,{colSpan:10,className:"text-center",children:"No data available"})})})]})})})]})}[h,i,j,k,l]=n.then?(await n)():n,d()}catch(a){d(a)}})},40361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},41415:a=>{a.exports=import("sonner")},46060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},46632:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{$:()=>k});var e=c(8732),f=c(74952),g=c(57049),h=c(66345),i=c(11178),j=a([g,h,i]);function k({timeRange:a,setTimeRange:b,dateRange:c,handleDateRangeChange:d,clearDateRange:j}){return(0,e.jsx)("div",{className:"flex justify-end items-center",children:(0,e.jsxs)("div",{className:"flex items-center gap-4",children:[(0,e.jsxs)(g.l6,{value:a,onValueChange:a=>{b(a),"custom"!==a&&d(void 0)},children:[(0,e.jsxs)(g.bq,{className:"w-[180px]",children:[(0,e.jsx)(f.VvS,{className:"mr-2 h-4 w-4"}),(0,e.jsx)(g.yv,{placeholder:"Select time range"})]}),(0,e.jsxs)(g.gC,{children:[(0,e.jsx)(g.eb,{value:"month",children:"Last Month"}),(0,e.jsx)(g.eb,{value:"quarter",children:"Last Quarter"}),(0,e.jsx)(g.eb,{value:"year",children:"Last Year"}),(0,e.jsx)(g.eb,{value:"all",children:"All Time"}),(0,e.jsx)(g.eb,{value:"custom",children:"Custom Range"})]})]}),"custom"===a&&(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(i.U,{value:c,onChange:d}),(0,e.jsx)(h.$,{variant:"outline",size:"icon",onClick:j,children:(0,e.jsx)(f.X,{className:"h-4 w-4"})})]})]})})}[g,h,i]=j.then?(await j)():j,d()}catch(a){d(a)}})},47492:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{Q:()=>o});var e=c(8732),f=c(71913),g=c(74952),h=c(39655),i=c(66345),j=c(48383),k=c(94142),l=c(25491),m=c(78855),n=a([h,i,j,k,l]);function o({maintenanceData:a,isLoading:b,timeRange:c,dateRange:d}){let n=(0,m.m)(a,c,d);return(0,e.jsxs)(h.Zp,{children:[(0,e.jsxs)(h.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(h.ZB,{children:"Maintenance Report"}),(0,e.jsx)(h.BT,{children:"All maintenance records for the selected period"})]}),(0,e.jsxs)("div",{className:"flex gap-2",children:[(0,e.jsxs)(i.$,{variant:"outline",size:"sm",onClick:async()=>await (0,l.Q7)(n||[],"Maintenance Report","maintenance-report"),children:[(0,e.jsx)(g.ni1,{className:"mr-2 h-4 w-4"}),"PDF"]}),(0,e.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>(0,l.GF)(n||[],"maintenance-report"),children:[(0,e.jsx)(g.f5X,{className:"mr-2 h-4 w-4"}),"CSV"]})]})]}),(0,e.jsx)(h.Wu,{children:(0,e.jsx)(k.F,{className:"h-[500px]",children:(0,e.jsxs)(j.XI,{children:[(0,e.jsx)(j.A0,{children:(0,e.jsxs)(j.Hj,{children:[(0,e.jsx)(j.nd,{children:"Date"}),(0,e.jsx)(j.nd,{children:"Vehicle"}),(0,e.jsx)(j.nd,{children:"Description"}),(0,e.jsx)(j.nd,{children:"Status"}),(0,e.jsx)(j.nd,{children:"Service Provider"}),(0,e.jsx)(j.nd,{className:"text-right",children:"Cost"})]})}),(0,e.jsx)(j.BF,{children:b?(0,e.jsx)(j.Hj,{children:(0,e.jsx)(j.nA,{colSpan:6,className:"text-center",children:"Loading..."})}):n&&n.length>0?n.map(a=>(0,e.jsxs)(j.Hj,{children:[(0,e.jsx)(j.nA,{children:(0,f.GP)(new Date(a.date),"MMM dd, yyyy")}),(0,e.jsxs)(j.nA,{children:[a.vehicles?.make," ",a.vehicles?.model]}),(0,e.jsx)(j.nA,{children:a.description}),(0,e.jsx)(j.nA,{children:a.status}),(0,e.jsx)(j.nA,{children:a.service_provider||"N/A"}),(0,e.jsxs)(j.nA,{className:"text-right",children:["$",Number(a.cost).toFixed(2)]})]},a.id)):(0,e.jsx)(j.Hj,{children:(0,e.jsx)(j.nA,{colSpan:6,className:"text-center",children:"No data available"})})})]})})})]})}[h,i,j,k,l]=n.then?(await n)():n,d()}catch(a){d(a)}})},47860:a=>{a.exports=import("@radix-ui/react-select")},48303:a=>{a.exports=import("@radix-ui/react-tooltip")},48383:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{A0:()=>j,BF:()=>k,Gg:()=>l,Hj:()=>m,XI:()=>i,nA:()=>o,nd:()=>n,r6:()=>p});var e=c(8732),f=c(82015),g=c(87092),h=a([g]);g=(h.then?(await h)():h)[0];let i=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("div",{className:"relative w-full overflow-auto rounded-lg",children:(0,e.jsx)("table",{ref:c,className:(0,g.cn)("w-full caption-bottom text-sm bg-card text-card-foreground",a),...b})}));i.displayName="Table";let j=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("thead",{ref:c,className:(0,g.cn)("[&_tr]:border-b border-border bg-muted/50",a),...b}));j.displayName="TableHeader";let k=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("tbody",{ref:c,className:(0,g.cn)("[&_tr:last-child]:border-0",a),...b}));k.displayName="TableBody";let l=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("tfoot",{ref:c,className:(0,g.cn)("border-t border-border bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...b}));l.displayName="TableFooter";let m=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("tr",{ref:c,className:(0,g.cn)("border-b border-border transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...b}));m.displayName="TableRow";let n=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("th",{ref:c,className:(0,g.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...b}));n.displayName="TableHead";let o=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("td",{ref:c,className:(0,g.cn)("p-4 align-middle text-card-foreground [&:has([role=checkbox])]:pr-0",a),...b}));o.displayName="TableCell";let p=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("caption",{ref:c,className:(0,g.cn)("mt-4 text-sm text-muted-foreground",a),...b}));p.displayName="TableCaption",d()}catch(a){d(a)}})},50802:a=>{a.exports=import("clsx")},53031:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>k});var e=c(8732),f=c(46632),g=c(2025),h=c(92077),i=c(98871),j=a([f,g,h]);function k(){let{vehicles:a,fuelData:b,maintenanceData:c,tripsData:d,driversData:j,sparePartsData:k,isLoadingVehicles:l,isLoadingFuel:m,isLoadingMaintenance:n,isLoadingTrips:o,isLoadingDrivers:p,isLoadingSpareparts:q}=(0,h.H)(),{activeTab:r,setActiveTab:s,timeRange:t,setTimeRange:u,dateRange:v,setDateRange:w,handleDateRangeChange:x,clearDateRange:y}=(0,i.h)();return(0,e.jsx)("div",{className:"min-h-screen bg-background",children:(0,e.jsxs)("div",{className:"p-4 px-6 space-y-6",children:[(0,e.jsx)("div",{className:"border-b border-border pb-4 pt-4",children:(0,e.jsx)("div",{children:(0,e.jsx)("h1",{className:"text-2xl font-semibold text-foreground",children:"Reports"})})}),(0,e.jsx)(f.$,{timeRange:t,setTimeRange:u,dateRange:v,handleDateRangeChange:x,clearDateRange:y}),(0,e.jsx)(g.Q,{activeTab:r,setActiveTab:s,vehiclesData:a,fuelData:b,maintenanceData:c,tripsData:d,driversData:j,sparePartsData:k,isLoadingVehicles:l,isLoadingFuel:m,isLoadingMaintenance:n,isLoadingTrips:o,isLoadingDrivers:p,isLoadingSpareparts:q,timeRange:t,dateRange:v})]})})}[f,g,h]=j.then?(await j)():j,d()}catch(a){d(a)}})},57049:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{bq:()=>m,eb:()=>q,gC:()=>p,l6:()=>k,yv:()=>l});var e=c(8732),f=c(82015),g=c(47860),h=c(74952),i=c(87092),j=a([g,i]);[g,i]=j.then?(await j)():j;let k=g.Root;g.Group;let l=g.Value,m=f.forwardRef(({className:a,children:b,...c},d)=>(0,e.jsxs)(g.Trigger,{ref:d,className:(0,i.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-0 focus-visible:ring-0 focus:ring-offset-0 focus-visible:ring-offset-0 focus:border-ring focus-visible:border-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 transition-colors",a),...c,children:[b,(0,e.jsx)(g.Icon,{asChild:!0,children:(0,e.jsx)(h.yQN,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=g.Trigger.displayName;let n=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.ScrollUpButton,{ref:c,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...b,children:(0,e.jsx)(h.rXn,{className:"h-4 w-4"})}));n.displayName=g.ScrollUpButton.displayName;let o=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.ScrollDownButton,{ref:c,className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...b,children:(0,e.jsx)(h.yQN,{className:"h-4 w-4"})}));o.displayName=g.ScrollDownButton.displayName;let p=f.forwardRef(({className:a,children:b,position:c="popper",...d},f)=>(0,e.jsx)(g.Portal,{children:(0,e.jsxs)(g.Content,{ref:f,className:(0,i.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===c&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:c,...d,children:[(0,e.jsx)(n,{}),(0,e.jsx)(g.Viewport,{className:(0,i.cn)("p-1","popper"===c&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:b}),(0,e.jsx)(o,{})]})}));p.displayName=g.Content.displayName,f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Label,{ref:c,className:(0,i.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...b})).displayName=g.Label.displayName;let q=f.forwardRef(({className:a,children:b,...c},d)=>(0,e.jsxs)(g.Item,{ref:d,className:(0,i.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...c,children:[(0,e.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,e.jsx)(g.ItemIndicator,{children:(0,e.jsx)(h.Jlk,{className:"h-4 w-4"})})}),(0,e.jsx)(g.ItemText,{children:b})]}));q.displayName=g.Item.displayName,f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Separator,{ref:c,className:(0,i.cn)("-mx-1 my-1 h-px bg-muted",a),...b})).displayName=g.Separator.displayName,d()}catch(a){d(a)}})},57312:a=>{a.exports=import("next-themes")},58894:(a,b,c)=>{function d(a){return a&&"object"==typeof a&&"error"in a&&!0===a.error}function e(a){return Array.isArray(a)?a.filter(a=>!d(a)):[]}function f(a){return d(a)?null:a}c.d(b,{to:()=>f,wH:()=>e})},60461:a=>{a.exports=import("@radix-ui/react-popover")},65515:a=>{a.exports=require("jspdf")},68953:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{Xi:()=>l,av:()=>m,j7:()=>k,tU:()=>j});var e=c(8732),f=c(82015),g=c(19640),h=c(87092),i=a([g,h]);[g,h]=i.then?(await i)():i;let j=g.Root,k=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.List,{ref:c,className:(0,h.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...b}));k.displayName=g.List.displayName;let l=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Trigger,{ref:c,className:(0,h.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...b}));l.displayName=g.Trigger.displayName;let m=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Content,{ref:c,className:(0,h.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...b}));m.displayName=g.Content.displayName,d()}catch(a){d(a)}})},75979:a=>{a.exports=import("tailwind-merge")},78855:(a,b,c)=>{c.d(b,{m:()=>d});function d(a,b,c){if(!a)return[];if(c&&c.from){let b=c.from,d=c.to||new Date;return a.filter(a=>{let c=new Date(a.date);return c>=b&&c<=d})}if("all"===b)return a;let d=new Date,e=new Date;return"month"===b?e.setMonth(d.getMonth()-1):"quarter"===b?e.setMonth(d.getMonth()-3):"year"===b&&e.setFullYear(d.getFullYear()-1),a.filter(a=>new Date(a.date)>=e)}},82015:a=>{a.exports=require("react")},83501:a=>{a.exports=import("jspdf-autotable")},86093:a=>{a.exports=require("react-day-picker")},86629:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{d:()=>o});var e=c(8732),f=c(71913),g=c(74952),h=c(39655),i=c(66345),j=c(48383),k=c(94142),l=c(25491),m=c(78855),n=a([h,i,j,k,l]);function o({fuelData:a,isLoading:b,timeRange:c,dateRange:d}){let n=(0,m.m)(a,c,d);return(0,e.jsxs)(h.Zp,{children:[(0,e.jsxs)(h.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(h.ZB,{children:"Fuel Consumption Report"}),(0,e.jsx)(h.BT,{children:"All fuel expenses for the selected period"})]}),(0,e.jsxs)("div",{className:"flex gap-2",children:[(0,e.jsxs)(i.$,{variant:"outline",size:"sm",onClick:async()=>await (0,l.Q7)(n||[],"Fuel Consumption Report","fuel-report"),children:[(0,e.jsx)(g.ni1,{className:"mr-2 h-4 w-4"}),"PDF"]}),(0,e.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>(0,l.GF)(n||[],"fuel-report"),children:[(0,e.jsx)(g.f5X,{className:"mr-2 h-4 w-4"}),"CSV"]})]})]}),(0,e.jsx)(h.Wu,{children:(0,e.jsx)(k.F,{className:"h-[500px]",children:(0,e.jsxs)(j.XI,{children:[(0,e.jsx)(j.A0,{children:(0,e.jsxs)(j.Hj,{children:[(0,e.jsx)(j.nd,{children:"Date"}),(0,e.jsx)(j.nd,{children:"Vehicle"}),(0,e.jsx)(j.nd,{children:"Volume"}),(0,e.jsx)(j.nd,{children:"Fuel Type"}),(0,e.jsx)(j.nd,{children:"Mileage"}),(0,e.jsx)(j.nd,{className:"text-right",children:"Cost"}),(0,e.jsx)(j.nd,{children:"Filled By"})]})}),(0,e.jsx)(j.BF,{children:b?(0,e.jsx)(j.Hj,{children:(0,e.jsx)(j.nA,{colSpan:7,className:"text-center",children:"Loading..."})}):n&&n.length>0?n.map(a=>(0,e.jsxs)(j.Hj,{children:[(0,e.jsx)(j.nA,{children:(0,f.GP)(new Date(a.date),"MMM dd, yyyy")}),(0,e.jsxs)(j.nA,{children:[a.vehicles?.make," ",a.vehicles?.model]}),(0,e.jsxs)(j.nA,{children:[a.volume," L"]}),(0,e.jsx)(j.nA,{children:a.fuel_type}),(0,e.jsxs)(j.nA,{children:[a.mileage," km"]}),(0,e.jsxs)(j.nA,{className:"text-right",children:["$",Number(a.cost).toFixed(2)]}),(0,e.jsx)(j.nA,{children:a.filled_by||"N/A"})]},a.id)):(0,e.jsx)(j.Hj,{children:(0,e.jsx)(j.nA,{colSpan:7,className:"text-center",children:"No data available"})})})]})})})]})}[h,i,j,k,l]=n.then?(await n)():n,d()}catch(a){d(a)}})},89888:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{k:()=>n});var e=c(8732),f=c(74952),g=c(39655),h=c(66345),i=c(48383),j=c(94142),k=c(25491),l=c(78855),m=a([g,h,i,j,k]);function n({vehiclesData:a,isLoading:b,timeRange:c,dateRange:d}){let m=(0,l.m)(a,c,d);return(0,e.jsxs)(g.Zp,{children:[(0,e.jsxs)(g.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(g.ZB,{children:"Vehicles Report"}),(0,e.jsx)(g.BT,{children:"Overview of all vehicles and their stats"})]}),(0,e.jsxs)("div",{className:"flex gap-2",children:[(0,e.jsxs)(h.$,{variant:"outline",size:"sm",onClick:async()=>await (0,k.Q7)(a||[],"Vehicles Report","vehicles-report"),children:[(0,e.jsx)(f.ni1,{className:"mr-2 h-4 w-4"}),"PDF"]}),(0,e.jsxs)(h.$,{variant:"outline",size:"sm",onClick:()=>(0,k.GF)(a||[],"vehicles-report"),children:[(0,e.jsx)(f.f5X,{className:"mr-2 h-4 w-4"}),"CSV"]})]})]}),(0,e.jsx)(g.Wu,{children:(0,e.jsx)(j.F,{className:"h-[500px]",children:(0,e.jsxs)(i.XI,{children:[(0,e.jsx)(i.A0,{children:(0,e.jsxs)(i.Hj,{children:[(0,e.jsx)(i.nd,{children:"Vehicle"}),(0,e.jsx)(i.nd,{children:"Status"}),(0,e.jsx)(i.nd,{children:"Type"}),(0,e.jsx)(i.nd,{children:"Registration"}),(0,e.jsx)(i.nd,{className:"text-right",children:"Maintenance Cost"})]})}),(0,e.jsx)(i.BF,{children:b?(0,e.jsx)(i.Hj,{children:(0,e.jsx)(i.nA,{colSpan:5,className:"text-center",children:"Loading..."})}):a&&a.length>0?a.map(a=>(0,e.jsxs)(i.Hj,{children:[(0,e.jsxs)(i.nA,{children:[a.make," ",a.model," (",a.year,")"]}),(0,e.jsx)(i.nA,{children:a.status}),(0,e.jsx)(i.nA,{children:a.type}),(0,e.jsx)(i.nA,{children:a.registration}),(0,e.jsxs)(i.nA,{className:"text-right",children:["$",(a=>{if(!m)return 0;let b=m.find(b=>b.id===a);return b&&b.maintenance&&Array.isArray(b.maintenance)?b.maintenance.reduce((a,b)=>a+Number(b.cost||0),0):0})(a.id).toFixed(2)]})]},a.id)):(0,e.jsx)(i.Hj,{children:(0,e.jsx)(i.nA,{colSpan:5,className:"text-center",children:"No data available"})})})]})})})]})}[g,h,i,j,k]=m.then?(await m)():m,d()}catch(a){d(a)}})},92077:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{H:()=>i});var e=c(28462),f=c(95965),g=c(58894),h=a([e]);function i(){let{data:a,isLoading:b}=(0,e.useQuery)({queryKey:["vehicles"],queryFn:async()=>{let{data:a,error:b}=await f.N.from("vehicles").select("*").order("created_at",{ascending:!1});if(b)throw b;return a}}),{data:c,isLoading:d}=(0,e.useQuery)({queryKey:["fuel-logs"],queryFn:async()=>{let{data:a,error:b}=await f.N.from("fuel_logs").select("*, vehicles!fuel_logs_vehicle_id_fkey(make, model, registration)").order("date",{ascending:!1});if(b)throw b;return a}}),{data:h,isLoading:i}=(0,e.useQuery)({queryKey:["maintenance"],queryFn:async()=>{let{data:a,error:b}=await f.N.from("maintenance").select("*, vehicles!maintenance_vehicle_id_fkey(make, model, registration)").order("date",{ascending:!1});if(b)throw b;return a}}),{data:j,isLoading:k}=(0,e.useQuery)({queryKey:["trips"],queryFn:async()=>{let{data:a,error:b}=await f.N.from("trips").select("*, vehicles!trips_vehicle_id_fkey(make, model, registration), drivers!trips_driver_id_fkey(name), clients!trips_client_id_fkey(name)").order("date",{ascending:!1});if(b)throw b;return a}}),{data:l,isLoading:m}=(0,e.useQuery)({queryKey:["drivers"],queryFn:async()=>{let{data:a,error:b}=await f.N.from("drivers").select("*").order("created_at",{ascending:!1});if(b)throw b;return a}}),{data:n,isLoading:o}=(0,e.useQuery)({queryKey:["spare-parts"],queryFn:async()=>{let{data:b,error:c}=await f.N.from("spare_parts").select("*").order("created_at",{ascending:!1});if(c)throw c;let{data:d,error:e}=await f.N.from("maintenance").select("id, description, vehicle_id, vehicles!maintenance_vehicle_id_fkey(make, model, registration)");if(e)throw e;let h={};d&&Array.isArray(d)&&d.forEach(a=>{a&&a.id&&(h[a.id]=a)});let i={};return a&&Array.isArray(a)&&a.forEach(a=>{a&&a.id&&(i[a.id]=a)}),(0,g.wH)(b).map(a=>{let b=null;if(a.vehicle_id&&i[a.vehicle_id])b={make:i[a.vehicle_id].make,model:i[a.vehicle_id].model,registration:i[a.vehicle_id].registration};else if(a.maintenance_id&&h[a.maintenance_id]){let c=h[a.maintenance_id];c.vehicles&&(b=c.vehicles)}return{...a,vehicles:b}})}});return{vehicles:a||[],fuelData:c||[],maintenanceData:h||[],tripsData:j||[],driversData:l||[],sparePartsData:n||[],isLoadingVehicles:b,isLoadingFuel:d,isLoadingMaintenance:i,isLoadingTrips:k,isLoadingDrivers:m,isLoadingSpareparts:o}}e=(h.then?(await h)():h)[0],d()}catch(a){d(a)}})},93939:a=>{a.exports=require("@supabase/supabase-js")},94142:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{F:()=>j});var e=c(8732),f=c(82015),g=c(14505),h=c(87092),i=a([g,h]);[g,h]=i.then?(await i)():i;let j=f.forwardRef(({className:a,children:b,...c},d)=>(0,e.jsxs)(g.Root,{ref:d,className:(0,h.cn)("relative overflow-hidden",a),...c,children:[(0,e.jsx)(g.Viewport,{className:"h-full w-full rounded-[inherit]",children:b}),(0,e.jsx)(k,{}),(0,e.jsx)(g.Corner,{})]}));j.displayName=g.Root.displayName;let k=f.forwardRef(({className:a,orientation:b="vertical",...c},d)=>(0,e.jsx)(g.ScrollAreaScrollbar,{ref:d,orientation:b,className:(0,h.cn)("flex touch-none select-none transition-colors","vertical"===b&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===b&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...c,children:(0,e.jsx)(g.ScrollAreaThumb,{className:"relative flex-1 rounded-full bg-border"})}));k.displayName=g.ScrollAreaScrollbar.displayName,d()}catch(a){d(a)}})},95007:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{config:()=>r,default:()=>n,getServerSideProps:()=>q,getStaticPaths:()=>p,getStaticProps:()=>o,handler:()=>z,reportWebVitals:()=>s,routeModule:()=>y,unstable_getServerProps:()=>w,unstable_getServerSideProps:()=>x,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>u,unstable_getStaticProps:()=>t});var e=c(63885),f=c(80237),g=c(81413),h=c(65611),i=c.n(h),j=c(74780),k=c(53031),l=c(12289),m=a([j,k]);[j,k]=m.then?(await m)():m;let n=(0,g.M)(k,"default"),o=(0,g.M)(k,"getStaticProps"),p=(0,g.M)(k,"getStaticPaths"),q=(0,g.M)(k,"getServerSideProps"),r=(0,g.M)(k,"config"),s=(0,g.M)(k,"reportWebVitals"),t=(0,g.M)(k,"unstable_getStaticProps"),u=(0,g.M)(k,"unstable_getStaticPaths"),v=(0,g.M)(k,"unstable_getStaticParams"),w=(0,g.M)(k,"unstable_getServerProps"),x=(0,g.M)(k,"unstable_getServerSideProps"),y=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/Reports",pathname:"/Reports",bundlePath:"",filename:""},distDir:".next-fleet",relativeProjectDir:"",components:{App:j.default,Document:i()},userland:k}),z=(0,l.U)({srcPage:"/Reports",config:r,userland:k,routeModule:y,getStaticPaths:p,getStaticProps:o,getServerSideProps:q});d()}catch(a){d(a)}})},98871:(a,b,c)=>{c.d(b,{h:()=>e});var d=c(82015);function e(){let[a,b]=(0,d.useState)("vehicles"),[c,e]=(0,d.useState)("month"),[f,g]=(0,d.useState)(void 0);return{activeTab:a,setActiveTab:b,timeRange:c,setTimeRange:e,dateRange:f,setDateRange:g,handleDateRangeChange:a=>{g(a),a&&a.from&&e("custom")},clearDateRange:()=>{g(void 0),e("month")}}}}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[4952,5611,5781,1913,4780],()=>b(b.s=95007));module.exports=c})();