"use strict";(()=>{var a={};a.id=7039,a.ids=[636,3220,7039],a.modules={8732:a=>{a.exports=require("react/jsx-runtime")},8938:a=>{a.exports=import("class-variance-authority")},9640:a=>{a.exports=import("@radix-ui/react-slot")},10919:(a,b,c)=>{c.d(b,{x:()=>h});var d=c(82015),e=c(95965),f=c(76569),g=c(94433);function h(){let[a,b]=(0,d.useState)(null),[c,h]=(0,d.useState)(!0),{toast:i}=(0,f.dj)(),{user:j}=(0,g.A)(),k=async a=>{if(!j)return!1;try{let{error:b}=await e.N.from("profiles").upsert({id:j.id,email:a.email,full_name:a.name,phone:a.phone,address:a.address,company:a.company,profile_image_url:a.profile_image_url,notification_preferences:a.notification_preferences,two_factor_enabled:a.two_factor_enabled,updated_at:new Date().toISOString()});if(b)throw b;return!0}catch(a){throw console.error("Error saving profile to database:",a),a}},l=async a=>{try{return h(!0),await k(a),b(a),i({title:"Profile Updated",description:"Your profile has been successfully updated."}),!0}catch(a){return console.error("Error saving profile:",a),i({title:"Error",description:"Failed to update profile. Please try again.",variant:"destructive"}),!1}finally{h(!1)}},m=async b=>{if(!a)return!1;try{let c={...a,notification_preferences:b};return await l(c)}catch(a){return console.error("Error updating notification preferences:",a),!1}},n=async b=>{if(!a)return!1;try{let c={...a,two_factor_enabled:b};return await l(c)}catch(a){return console.error("Error toggling two-factor authentication:",a),!1}};return{profile:a,loading:c,saveProfile:l,uploadProfileImage:async a=>{if(!j)return null;try{let b=a.name.split(".").pop(),c=`${j.id}/profile.${b}`,{error:d}=await e.N.storage.from("profile-images").upload(c,a,{upsert:!0});if(d)throw d;let{data:f}=e.N.storage.from("profile-images").getPublicUrl(c);return f.publicUrl}catch(b){return console.error("Error uploading image:",b),new Promise(b=>{let c=new FileReader;c.onload=a=>{b(a.target?.result)},c.readAsDataURL(a)})}},changePassword:async a=>{try{h(!0);let{error:b}=await e.N.auth.updateUser({password:a.newPassword});if(b)throw b;return i({title:"Password Updated",description:"Your password has been successfully changed."}),!0}catch(a){return console.error("Error changing password:",a),i({title:"Error",description:a instanceof Error?a.message:"Failed to change password. Please try again.",variant:"destructive"}),!1}finally{h(!1)}},updateNotificationPreferences:m,toggleTwoFactor:n,loadProfile:async()=>{if(j)try{h(!0);let{data:a,error:c}=await e.N.from("profiles").select("*").eq("id",j.id).single();if(c&&"PGRST116"!==c.code)throw c;if(a){let c={id:a.id,name:a.full_name||j.user_metadata?.full_name||j.email?.split("@")[0]||"User",email:a.email||j.email||"",phone:a.phone||"",address:a.address||"",company:a.company||"",profile_image_url:a.profile_image_url??null,notification_preferences:a.notification_preferences||{email_notifications:!0,push_notifications:!0,sms_notifications:!1,marketing_emails:!1},two_factor_enabled:a.two_factor_enabled||!1,created_at:a.created_at,updated_at:a.updated_at};b(c)}else{let a={id:j.id,name:j.user_metadata?.full_name||j.email?.split("@")[0]||"User",email:j.email||"",phone:"",address:"",company:"",profile_image_url:null,notification_preferences:{email_notifications:!0,push_notifications:!0,sms_notifications:!1,marketing_emails:!1},two_factor_enabled:!1};b(a),await k(a)}}catch(a){console.error("Error loading profile:",a),i({title:"Error",description:"Failed to load profile data",variant:"destructive"})}finally{h(!1)}}}}},16235:a=>{a.exports=import("@radix-ui/react-toast")},20598:a=>{a.exports=import("@radix-ui/react-label")},28462:a=>{a.exports=import("@tanstack/react-query")},33873:a=>{a.exports=require("path")},38753:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>t});var e=c(8732),f=c(82015),g=c(39655),h=c(66345),i=c(78059),j=c(91416),k=c(95148),l=c(52307),m=c(56884),n=c(98825),o=c(42971),p=c(74952),q=c(10919),r=c(94433),s=a([g,h,i,j,k,l,m,n,o]);[g,h,i,j,k,l,m,n,o]=s.then?(await s)():s;let u=o.object({name:o.string().min(2,"Name must be at least 2 characters"),email:o.string().email("Please enter a valid email address"),phone:o.string().optional(),address:o.string().optional(),company:o.string().optional()});function t(){let{profile:a,loading:b,saveProfile:c,uploadProfileImage:d}=(0,q.x)(),{user:o}=(0,r.A)(),[s,t]=(0,f.useState)(null),v=(0,m.useForm)({resolver:(0,n.zodResolver)(u),defaultValues:{name:"",email:"",phone:"",address:"",company:""}}),w=async a=>{let b=a.target.files?.[0];if(b)try{let a=await d(b);t(a)}catch(a){console.error("Error uploading image:",a)}},x=async a=>{try{let b={name:a.name,email:a.email,phone:a.phone||"",address:a.address||"",company:a.company||"",profile_image_url:s};await c(b)}catch(a){console.error("Error saving profile:",a)}};return o?(0,e.jsx)("div",{className:"min-h-screen bg-background",children:(0,e.jsxs)("div",{className:"p-4 px-6 space-y-6",children:[(0,e.jsx)("div",{className:"border-b border-border pb-4 pt-4",children:(0,e.jsxs)("div",{children:[(0,e.jsx)("h1",{className:"text-2xl font-semibold text-foreground",children:"Profile Settings"}),(0,e.jsx)("p",{className:"text-muted-foreground",children:"Manage your account information and preferences"})]})}),(0,e.jsxs)("div",{className:"grid gap-6 lg:grid-cols-3",children:[(0,e.jsxs)(g.Zp,{children:[(0,e.jsxs)(g.aR,{children:[(0,e.jsxs)(g.ZB,{className:"flex items-center gap-2",children:[(0,e.jsx)(p.i7d,{className:"h-5 w-5"}),"Profile Picture"]}),(0,e.jsx)(g.BT,{children:"Update your profile picture"})]}),(0,e.jsx)(g.Wu,{className:"space-y-4",children:(0,e.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,e.jsxs)(j.eu,{className:"h-24 w-24",children:[(0,e.jsx)(j.BK,{src:s||"/placeholder.svg",alt:"Profile"}),(0,e.jsx)(j.q5,{className:"text-lg",children:a?.name?.split(" ").map(a=>a[0]).join("").toUpperCase()||"AD"})]}),(0,e.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,e.jsx)(i.p,{type:"file",accept:"image/*",onChange:w,className:"hidden",id:"profile-upload"}),(0,e.jsxs)("label",{htmlFor:"profile-upload",className:"flex items-center justify-center space-x-2 px-4 py-2 border rounded-md cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[(0,e.jsx)(p.i7d,{className:"h-4 w-4"}),(0,e.jsx)("span",{children:"Change Photo"})]}),s&&(0,e.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>t(null),children:"Remove Photo"})]})]})})]}),(0,e.jsx)("div",{className:"lg:col-span-2",children:(0,e.jsxs)(g.Zp,{children:[(0,e.jsxs)(g.aR,{children:[(0,e.jsxs)(g.ZB,{className:"flex items-center gap-2",children:[(0,e.jsx)(p.KJW,{className:"h-5 w-5"}),"Personal Information"]}),(0,e.jsx)(g.BT,{children:"Update your personal details and contact information"})]}),(0,e.jsx)(g.Wu,{children:(0,e.jsx)(l.lV,{...v,children:(0,e.jsxs)("form",{onSubmit:v.handleSubmit(x),className:"space-y-6",children:[(0,e.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,e.jsx)(l.zB,{control:v.control,name:"name",render:({field:a})=>(0,e.jsxs)(l.eI,{children:[(0,e.jsxs)(l.lR,{className:"flex items-center gap-2",children:[(0,e.jsx)(p.KJW,{className:"h-4 w-4"}),"Full Name"]}),(0,e.jsx)(l.MJ,{children:(0,e.jsx)(i.p,{placeholder:"Enter your full name",...a})}),(0,e.jsx)(l.C5,{})]})}),(0,e.jsx)(l.zB,{control:v.control,name:"email",render:({field:a})=>(0,e.jsxs)(l.eI,{children:[(0,e.jsxs)(l.lR,{className:"flex items-center gap-2",children:[(0,e.jsx)(p.gE4,{className:"h-4 w-4"}),"Email Address"]}),(0,e.jsx)(l.MJ,{children:(0,e.jsx)(i.p,{placeholder:"Enter your email",type:"email",...a})}),(0,e.jsx)(l.C5,{})]})})]}),(0,e.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,e.jsx)(l.zB,{control:v.control,name:"phone",render:({field:a})=>(0,e.jsxs)(l.eI,{children:[(0,e.jsxs)(l.lR,{className:"flex items-center gap-2",children:[(0,e.jsx)(p.bcf,{className:"h-4 w-4"}),"Phone Number"]}),(0,e.jsx)(l.MJ,{children:(0,e.jsx)(i.p,{placeholder:"Enter your phone number",...a})}),(0,e.jsx)(l.C5,{})]})}),(0,e.jsx)(l.zB,{control:v.control,name:"company",render:({field:a})=>(0,e.jsxs)(l.eI,{children:[(0,e.jsxs)(l.lR,{className:"flex items-center gap-2",children:[(0,e.jsx)(p.tIP,{className:"h-4 w-4"}),"Company"]}),(0,e.jsx)(l.MJ,{children:(0,e.jsx)(i.p,{placeholder:"Enter your company",...a})}),(0,e.jsx)(l.C5,{})]})})]}),(0,e.jsx)(l.zB,{control:v.control,name:"address",render:({field:a})=>(0,e.jsxs)(l.eI,{children:[(0,e.jsxs)(l.lR,{className:"flex items-center gap-2",children:[(0,e.jsx)(p.sDd,{className:"h-4 w-4"}),"Address"]}),(0,e.jsx)(l.MJ,{children:(0,e.jsx)(i.p,{placeholder:"Enter your address",...a})}),(0,e.jsx)(l.C5,{})]})}),(0,e.jsx)(k.w,{}),(0,e.jsx)("div",{className:"flex justify-end",children:(0,e.jsxs)(h.$,{type:"submit",children:[(0,e.jsx)(p.eMP,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})})})]})})]})]})}):(0,e.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,e.jsxs)("div",{className:"text-center",children:[(0,e.jsx)("h2",{className:"text-2xl font-semibold mb-2",children:"Authentication Required"}),(0,e.jsx)("p",{className:"text-muted-foreground",children:"Please sign in to view your profile."})]})})}d()}catch(a){d(a)}})},38827:a=>{a.exports=import("@radix-ui/react-separator")},39655:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{BT:()=>l,Wu:()=>m,ZB:()=>k,Zp:()=>i,aR:()=>j,wL:()=>n});var e=c(8732),f=c(82015),g=c(87092),h=a([g]);g=(h.then?(await h)():h)[0];let i=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("div",{ref:c,className:(0,g.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...b}));i.displayName="Card";let j=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("div",{ref:c,className:(0,g.cn)("flex flex-col space-y-1.5 p-6",a),...b}));j.displayName="CardHeader";let k=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("h3",{ref:c,className:(0,g.cn)("text-2xl font-semibold leading-none tracking-tight",a),...b}));k.displayName="CardTitle";let l=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("p",{ref:c,className:(0,g.cn)("text-sm text-muted-foreground",a),...b}));l.displayName="CardDescription";let m=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("div",{ref:c,className:(0,g.cn)("p-6 pt-0",a),...b}));m.displayName="CardContent";let n=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("div",{ref:c,className:(0,g.cn)("flex items-center p-6 pt-0",a),...b}));n.displayName="CardFooter",d()}catch(a){d(a)}})},40273:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{J:()=>l});var e=c(8732),f=c(82015),g=c(20598),h=c(8938),i=c(87092),j=a([g,h,i]);[g,h,i]=j.then?(await j)():j;let k=(0,h.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Root,{ref:c,className:(0,i.cn)(k(),a),...b}));l.displayName=g.Root.displayName,d()}catch(a){d(a)}})},40361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},41415:a=>{a.exports=import("sonner")},42971:a=>{a.exports=import("zod")},45519:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{config:()=>r,default:()=>n,getServerSideProps:()=>q,getStaticPaths:()=>p,getStaticProps:()=>o,handler:()=>z,reportWebVitals:()=>s,routeModule:()=>y,unstable_getServerProps:()=>w,unstable_getServerSideProps:()=>x,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>u,unstable_getStaticProps:()=>t});var e=c(63885),f=c(80237),g=c(81413),h=c(65611),i=c.n(h),j=c(74780),k=c(38753),l=c(12289),m=a([j,k]);[j,k]=m.then?(await m)():m;let n=(0,g.M)(k,"default"),o=(0,g.M)(k,"getStaticProps"),p=(0,g.M)(k,"getStaticPaths"),q=(0,g.M)(k,"getServerSideProps"),r=(0,g.M)(k,"config"),s=(0,g.M)(k,"reportWebVitals"),t=(0,g.M)(k,"unstable_getStaticProps"),u=(0,g.M)(k,"unstable_getStaticPaths"),v=(0,g.M)(k,"unstable_getStaticParams"),w=(0,g.M)(k,"unstable_getServerProps"),x=(0,g.M)(k,"unstable_getServerSideProps"),y=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/Profile",pathname:"/Profile",bundlePath:"",filename:""},distDir:".next-fleet",relativeProjectDir:"",components:{App:j.default,Document:i()},userland:k}),z=(0,l.U)({srcPage:"/Profile",config:r,userland:k,routeModule:y,getStaticPaths:p,getStaticProps:o,getServerSideProps:q});d()}catch(a){d(a)}})},46060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},48303:a=>{a.exports=import("@radix-ui/react-tooltip")},50802:a=>{a.exports=import("clsx")},52307:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{C5:()=>u,MJ:()=>s,Rr:()=>t,eI:()=>q,lR:()=>r,lV:()=>l,zB:()=>n});var e=c(8732),f=c(82015),g=c(9640),h=c(56884),i=c(87092),j=c(40273),k=a([g,h,i,j]);[g,h,i,j]=k.then?(await k)():k;let l=h.FormProvider,m=f.createContext({}),n=({...a})=>(0,e.jsx)(m.Provider,{value:{name:a.name},children:(0,e.jsx)(h.Controller,{...a})}),o=()=>{let a=f.useContext(m),b=f.useContext(p),{getFieldState:c,formState:d}=(0,h.useFormContext)(),e=c(a.name,d);if(!a)throw Error("useFormField should be used within <FormField>");let{id:g}=b;return{id:g,name:a.name,formItemId:`${g}-form-item`,formDescriptionId:`${g}-form-item-description`,formMessageId:`${g}-form-item-message`,...e}},p=f.createContext({}),q=f.forwardRef(({className:a,...b},c)=>{let d=f.useId();return(0,e.jsx)(p.Provider,{value:{id:d},children:(0,e.jsx)("div",{ref:c,className:(0,i.cn)("space-y-2",a),...b})})});q.displayName="FormItem";let r=f.forwardRef(({className:a,...b},c)=>{let{error:d,formItemId:f}=o();return(0,e.jsx)(j.J,{ref:c,className:(0,i.cn)(d&&"text-destructive",a),htmlFor:f,...b})});r.displayName="FormLabel";let s=f.forwardRef(({...a},b)=>{let{error:c,formItemId:d,formDescriptionId:f,formMessageId:h}=o();return(0,e.jsx)(g.Slot,{ref:b,id:d,"aria-describedby":c?`${f} ${h}`:`${f}`,"aria-invalid":!!c,...a})});s.displayName="FormControl";let t=f.forwardRef(({className:a,...b},c)=>{let{formDescriptionId:d}=o();return(0,e.jsx)("p",{ref:c,id:d,className:(0,i.cn)("text-sm text-muted-foreground",a),...b})});t.displayName="FormDescription";let u=f.forwardRef(({className:a,children:b,...c},d)=>{let{error:f,formMessageId:g}=o(),h=f?String(f?.message):b;return h?(0,e.jsx)("p",{ref:d,id:g,className:(0,i.cn)("text-sm font-medium text-destructive",a),...c,children:h}):null});u.displayName="FormMessage",d()}catch(a){d(a)}})},56884:a=>{a.exports=import("react-hook-form")},57312:a=>{a.exports=import("next-themes")},75979:a=>{a.exports=import("tailwind-merge")},78059:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{p:()=>i});var e=c(8732),f=c(82015),g=c(87092),h=a([g]);g=(h.then?(await h)():h)[0];let i=f.forwardRef(({className:a,type:b,onAddItem:c,onRemoveItem:d,showAddButton:f,showRemoveButton:h,addButtonLabel:i,removeButtonLabel:j,...k},l)=>(0,e.jsxs)("div",{className:f||h?"flex items-center gap-2":"",children:[(0,e.jsx)("input",{type:b,className:(0,g.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus:outline-none focus:ring-0 focus-visible:ring-0 focus:ring-offset-0 focus-visible:ring-offset-0 focus:border-ring focus-visible:border-ring disabled:cursor-not-allowed disabled:opacity-50 transition-colors",a),ref:l,onKeyDown:c?a=>{"Enter"===a.key&&c&&(a.preventDefault(),c())}:void 0,...k}),f&&c&&(0,e.jsx)("button",{type:"button",className:"inline-flex h-10 items-center justify-center rounded-md bg-primary px-3 py-2 text-sm font-medium text-primary-foreground hover:bg-primary/90",onClick:c,children:i||"Add"}),h&&d&&(0,e.jsx)("button",{type:"button",className:"inline-flex h-10 items-center justify-center rounded-md bg-destructive px-3 py-2 text-sm font-medium text-destructive-foreground hover:bg-destructive/90",onClick:d,children:j||"Remove"})]}));i.displayName="Input",d()}catch(a){d(a)}})},82015:a=>{a.exports=require("react")},91416:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{BK:()=>k,eu:()=>j,q5:()=>l});var e=c(8732),f=c(82015),g=c(92549),h=c(87092),i=a([g,h]);[g,h]=i.then?(await i)():i;let j=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Root,{ref:c,className:(0,h.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",a),...b}));j.displayName=g.Root.displayName;let k=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Image,{ref:c,className:(0,h.cn)("aspect-square h-full w-full",a),...b}));k.displayName=g.Image.displayName;let l=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Fallback,{ref:c,className:(0,h.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",a),...b}));l.displayName=g.Fallback.displayName,d()}catch(a){d(a)}})},92549:a=>{a.exports=import("@radix-ui/react-avatar")},93939:a=>{a.exports=require("@supabase/supabase-js")},94433:(a,b,c)=>{c.d(b,{A:()=>g});var d=c(82015),e=c(95965),f=c(88266);function g(){let[a,b]=(0,d.useState)(null),[c,g]=(0,d.useState)(!0);return{user:a,loading:c,signOut:async()=>{try{f.T.setLoggingOut(!0),await e.N.auth.signOut({scope:"local"}),f.T.clearCache();try{localStorage.removeItem("supabase.auth.token")}catch{}try{sessionStorage.removeItem("supabase.auth.token")}catch{}}catch(a){console.error("Error signing out:",a)}finally{f.T.setLoggingOut(!1)}},isAuthenticated:!!a}}c(51577)},95148:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{w:()=>j});var e=c(8732),f=c(82015),g=c(38827),h=c(87092),i=a([g,h]);[g,h]=i.then?(await i)():i;let j=f.forwardRef(({className:a,orientation:b="horizontal",decorative:c=!0,...d},f)=>(0,e.jsx)(g.Root,{ref:f,decorative:c,orientation:b,className:(0,h.cn)("shrink-0 bg-border","horizontal"===b?"h-[1px] w-full":"h-full w-[1px]",a),...d}));j.displayName=g.Root.displayName,d()}catch(a){d(a)}})},98825:a=>{a.exports=import("@hookform/resolvers/zod")}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[4952,5611,5781,4780],()=>b(b.s=45519));module.exports=c})();