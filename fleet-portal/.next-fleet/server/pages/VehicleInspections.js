"use strict";(()=>{var a={};a.id=4073,a.ids=[636,3220,4073],a.modules={8732:a=>{a.exports=require("react/jsx-runtime")},8938:a=>{a.exports=import("class-variance-authority")},9611:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{N:()=>y});var e=c(8732),f=c(82015),g=c(56884),h=c(98825),i=c(42971),j=c(66345),k=c(52307),l=c(78059),m=c(87967),n=c(57049),o=c(85072),p=c(39655),q=c(52670),r=c(76569),s=c(95965),t=c(28462),u=c(81575),v=c(71913),w=c(74952),x=a([g,h,i,j,k,l,m,n,o,p,q,t]);[g,h,i,j,k,l,m,n,o,p,q,t]=x.then?(await x)():x;let z=i.z.object({vehicle_id:i.z.string().min(1,"Vehicle is required"),inspector_name:i.z.string().min(1,"Inspector name is required"),inspection_date:i.z.string().min(1,"Inspection date is required"),pre_trip:i.z.boolean(),post_trip:i.z.boolean(),overall_status:i.z.enum(["pass","fail","conditional"]),mileage:i.z.number().min(0,"Mileage must be positive"),fuel_level:i.z.number().min(0).max(100,"Fuel level must be between 0-100%"),engine_oil:i.z.enum(["good","low","needs_change"]),coolant:i.z.enum(["good","low","needs_refill"]),brake_fluid:i.z.enum(["good","low","needs_refill"]),tires_condition:i.z.enum(["good","fair","poor"]),lights_working:i.z.boolean(),brakes_working:i.z.boolean(),steering_working:i.z.boolean(),horn_working:i.z.boolean(),wipers_working:i.z.boolean(),mirrors_clean:i.z.boolean(),seatbelts_working:i.z.boolean(),first_aid_kit:i.z.boolean(),fire_extinguisher:i.z.boolean(),warning_triangle:i.z.boolean(),jack_spare_tire:i.z.boolean(),documents_present:i.z.boolean(),interior_clean:i.z.boolean(),exterior_clean:i.z.boolean(),defects_noted:i.z.string().optional(),corrective_actions:i.z.string().optional(),notes:i.z.string().optional()});function y({inspection:a,onSuccess:b,onCancel:c}){let{toast:d}=(0,r.dj)(),[i,x]=(0,f.useState)(!1),{data:y}=(0,t.useQuery)({queryKey:["vehicles-for-inspection"],queryFn:async()=>{let{data:a,error:b}=await s.N.from("vehicles").select("id, make, model, registration").order("make");if(b)throw b;return a}}),A=(0,g.useForm)({resolver:(0,h.zodResolver)(z),defaultValues:a?{vehicle_id:a.vehicle_id,inspector_name:a.inspector_name,inspection_date:a.inspection_date,pre_trip:a.pre_trip,post_trip:a.post_trip,overall_status:a.overall_status,mileage:a.mileage,fuel_level:a.fuel_level,engine_oil:a.engine_oil,coolant:a.coolant,brake_fluid:a.brake_fluid,tires_condition:a.tires_condition,lights_working:a.lights_working,brakes_working:a.brakes_working,steering_working:a.steering_working,horn_working:a.horn_working,wipers_working:a.wipers_working,mirrors_clean:a.mirrors_clean,seatbelts_working:a.seatbelts_working,first_aid_kit:a.first_aid_kit,fire_extinguisher:a.fire_extinguisher,warning_triangle:a.warning_triangle,jack_spare_tire:a.jack_spare_tire,documents_present:a.documents_present,interior_clean:a.interior_clean,exterior_clean:a.exterior_clean,defects_noted:a.defects_noted||"",corrective_actions:a.corrective_actions||"",notes:a.notes||""}:{vehicle_id:"",inspector_name:"",inspection_date:new Date().toISOString().split("T")[0],pre_trip:!0,post_trip:!1,overall_status:"pass",mileage:0,fuel_level:100,engine_oil:"good",coolant:"good",brake_fluid:"good",tires_condition:"good",lights_working:!0,brakes_working:!0,steering_working:!0,horn_working:!0,wipers_working:!0,mirrors_clean:!0,seatbelts_working:!0,first_aid_kit:!0,fire_extinguisher:!0,warning_triangle:!0,jack_spare_tire:!0,documents_present:!0,interior_clean:!0,exterior_clean:!0,defects_noted:"",corrective_actions:"",notes:""}}),B=async c=>{x(!0);try{if(a){let{error:b}=await s.N.from("vehicle_inspections").update(c).eq("id",a.id);if(b)throw b;d({title:"Inspection updated",description:"The vehicle inspection has been updated successfully."})}else{let{error:a}=await s.N.from("vehicle_inspections").insert(c);if(a)throw a;d({title:"Inspection created",description:"The vehicle inspection has been created successfully."})}b()}catch(a){console.error("Error saving inspection:",a),d({title:"Error",description:"Failed to save inspection. Please try again.",variant:"destructive"})}finally{x(!1)}};return(0,e.jsx)(k.lV,{...A,children:(0,e.jsxs)("form",{onSubmit:A.handleSubmit(B),className:"space-y-6",children:[(0,e.jsxs)(p.Zp,{children:[(0,e.jsx)(p.aR,{className:"pb-4",children:(0,e.jsxs)(p.ZB,{className:"flex items-center gap-2",children:[(0,e.jsx)(w.THT,{className:"h-5 w-5"}),"Basic Information"]})}),(0,e.jsxs)(p.Wu,{className:"space-y-4",children:[(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,e.jsx)(k.zB,{control:A.control,name:"vehicle_id",render:({field:a})=>(0,e.jsxs)(k.eI,{children:[(0,e.jsx)(k.lR,{children:"Vehicle"}),(0,e.jsxs)(n.l6,{onValueChange:a.onChange,value:a.value,children:[(0,e.jsx)(k.MJ,{children:(0,e.jsx)(n.bq,{children:(0,e.jsx)(n.yv,{placeholder:"Select vehicle"})})}),(0,e.jsx)(n.gC,{children:y?.map(a=>(0,e.jsxs)(n.eb,{value:a.id,children:[a.make," ",a.model," (",a.registration,")"]},a.id))})]}),(0,e.jsx)(k.C5,{})]})}),(0,e.jsx)(k.zB,{control:A.control,name:"inspector_name",render:({field:a})=>(0,e.jsxs)(k.eI,{children:[(0,e.jsx)(k.lR,{children:"Inspector Name"}),(0,e.jsx)(k.MJ,{children:(0,e.jsx)(l.p,{placeholder:"Enter inspector name",...a})}),(0,e.jsx)(k.C5,{})]})}),(0,e.jsx)(k.zB,{control:A.control,name:"inspection_date",render:({field:a})=>(0,e.jsxs)(k.eI,{children:[(0,e.jsx)(k.lR,{children:"Inspection Date"}),(0,e.jsx)(k.MJ,{children:(0,e.jsx)(q.l,{date:a.value?(0,u.H)(a.value):void 0,onDateChange:b=>a.onChange(b?(0,v.GP)(b,"yyyy-MM-dd"):""),className:"w-full"})}),(0,e.jsx)(k.C5,{})]})}),(0,e.jsx)(k.zB,{control:A.control,name:"overall_status",render:({field:a})=>(0,e.jsxs)(k.eI,{children:[(0,e.jsxs)(k.lR,{className:"flex items-center gap-2",children:["Overall Status",(a=>{switch(a){case"pass":return(0,e.jsx)(w.rAV,{className:"h-5 w-5 text-green-600"});case"fail":return(0,e.jsx)(w.Jpz,{className:"h-5 w-5 text-red-600"});case"conditional":return(0,e.jsx)(w.hcu,{className:"h-5 w-5 text-yellow-600"});default:return null}})(a.value)]}),(0,e.jsxs)(n.l6,{onValueChange:a.onChange,value:a.value,children:[(0,e.jsx)(k.MJ,{children:(0,e.jsx)(n.bq,{children:(0,e.jsx)(n.yv,{})})}),(0,e.jsxs)(n.gC,{children:[(0,e.jsx)(n.eb,{value:"pass",children:"Pass"}),(0,e.jsx)(n.eb,{value:"conditional",children:"Conditional"}),(0,e.jsx)(n.eb,{value:"fail",children:"Fail"})]})]}),(0,e.jsx)(k.Rr,{children:"Status is auto-calculated based on critical checks"}),(0,e.jsx)(k.C5,{})]})})]}),(0,e.jsxs)("div",{className:"flex gap-6",children:[(0,e.jsx)(k.zB,{control:A.control,name:"pre_trip",render:({field:a})=>(0,e.jsxs)(k.eI,{className:"flex flex-row items-start space-x-3 space-y-0",children:[(0,e.jsx)(k.MJ,{children:(0,e.jsx)(o.S,{checked:a.value,onCheckedChange:a.onChange})}),(0,e.jsx)("div",{className:"space-y-1 leading-none",children:(0,e.jsx)(k.lR,{children:"Pre-Trip Inspection"})})]})}),(0,e.jsx)(k.zB,{control:A.control,name:"post_trip",render:({field:a})=>(0,e.jsxs)(k.eI,{className:"flex flex-row items-start space-x-3 space-y-0",children:[(0,e.jsx)(k.MJ,{children:(0,e.jsx)(o.S,{checked:a.value,onCheckedChange:a.onChange})}),(0,e.jsx)("div",{className:"space-y-1 leading-none",children:(0,e.jsx)(k.lR,{children:"Post-Trip Inspection"})})]})})]})]})]}),(0,e.jsxs)(p.Zp,{children:[(0,e.jsx)(p.aR,{className:"pb-4",children:(0,e.jsxs)(p.ZB,{className:"flex items-center gap-2",children:[(0,e.jsx)(w._I2,{className:"h-5 w-5"}),"Vehicle Readings"]})}),(0,e.jsx)(p.Wu,{className:"space-y-4",children:(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,e.jsx)(k.zB,{control:A.control,name:"mileage",render:({field:a})=>(0,e.jsxs)(k.eI,{children:[(0,e.jsx)(k.lR,{children:"Current Mileage (km)"}),(0,e.jsx)(k.MJ,{children:(0,e.jsx)(l.p,{type:"number",placeholder:"Enter current mileage",...a,onChange:b=>a.onChange(Number(b.target.value))})}),(0,e.jsx)(k.C5,{})]})}),(0,e.jsx)(k.zB,{control:A.control,name:"fuel_level",render:({field:a})=>(0,e.jsxs)(k.eI,{children:[(0,e.jsx)(k.lR,{children:"Fuel Level (%)"}),(0,e.jsx)(k.MJ,{children:(0,e.jsx)(l.p,{type:"number",min:"0",max:"100",placeholder:"Enter fuel level percentage",...a,onChange:b=>a.onChange(Number(b.target.value))})}),(0,e.jsx)(k.C5,{})]})})]})})]}),(0,e.jsxs)(p.Zp,{children:[(0,e.jsx)(p.aR,{className:"pb-4",children:(0,e.jsxs)(p.ZB,{className:"flex items-center gap-2",children:[(0,e.jsx)(w.XHo,{className:"h-5 w-5"}),"Fluid Levels"]})}),(0,e.jsx)(p.Wu,{className:"space-y-4",children:(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,e.jsx)(k.zB,{control:A.control,name:"engine_oil",render:({field:a})=>(0,e.jsxs)(k.eI,{children:[(0,e.jsx)(k.lR,{children:"Engine Oil"}),(0,e.jsxs)(n.l6,{onValueChange:a.onChange,value:a.value,children:[(0,e.jsx)(k.MJ,{children:(0,e.jsx)(n.bq,{children:(0,e.jsx)(n.yv,{})})}),(0,e.jsxs)(n.gC,{children:[(0,e.jsx)(n.eb,{value:"good",children:"Good"}),(0,e.jsx)(n.eb,{value:"low",children:"Low"}),(0,e.jsx)(n.eb,{value:"needs_change",children:"Needs Change"})]})]}),(0,e.jsx)(k.C5,{})]})}),(0,e.jsx)(k.zB,{control:A.control,name:"coolant",render:({field:a})=>(0,e.jsxs)(k.eI,{children:[(0,e.jsx)(k.lR,{children:"Coolant"}),(0,e.jsxs)(n.l6,{onValueChange:a.onChange,value:a.value,children:[(0,e.jsx)(k.MJ,{children:(0,e.jsx)(n.bq,{children:(0,e.jsx)(n.yv,{})})}),(0,e.jsxs)(n.gC,{children:[(0,e.jsx)(n.eb,{value:"good",children:"Good"}),(0,e.jsx)(n.eb,{value:"low",children:"Low"}),(0,e.jsx)(n.eb,{value:"needs_refill",children:"Needs Refill"})]})]}),(0,e.jsx)(k.C5,{})]})}),(0,e.jsx)(k.zB,{control:A.control,name:"brake_fluid",render:({field:a})=>(0,e.jsxs)(k.eI,{children:[(0,e.jsx)(k.lR,{children:"Brake Fluid"}),(0,e.jsxs)(n.l6,{onValueChange:a.onChange,value:a.value,children:[(0,e.jsx)(k.MJ,{children:(0,e.jsx)(n.bq,{children:(0,e.jsx)(n.yv,{})})}),(0,e.jsxs)(n.gC,{children:[(0,e.jsx)(n.eb,{value:"good",children:"Good"}),(0,e.jsx)(n.eb,{value:"low",children:"Low"}),(0,e.jsx)(n.eb,{value:"needs_refill",children:"Needs Refill"})]})]}),(0,e.jsx)(k.C5,{})]})})]})})]}),(0,e.jsxs)(p.Zp,{children:[(0,e.jsx)(p.aR,{className:"pb-4",children:(0,e.jsxs)(p.ZB,{className:"flex items-center gap-2",children:[(0,e.jsx)(w.IFY,{className:"h-5 w-5"}),"Vehicle Condition"]})}),(0,e.jsx)(p.Wu,{className:"space-y-4",children:(0,e.jsx)(k.zB,{control:A.control,name:"tires_condition",render:({field:a})=>(0,e.jsxs)(k.eI,{children:[(0,e.jsx)(k.lR,{children:"Tires Condition"}),(0,e.jsxs)(n.l6,{onValueChange:a.onChange,value:a.value,children:[(0,e.jsx)(k.MJ,{children:(0,e.jsx)(n.bq,{className:"w-[200px]",children:(0,e.jsx)(n.yv,{})})}),(0,e.jsxs)(n.gC,{children:[(0,e.jsx)(n.eb,{value:"good",children:"Good"}),(0,e.jsx)(n.eb,{value:"fair",children:"Fair"}),(0,e.jsx)(n.eb,{value:"poor",children:"Poor"})]})]}),(0,e.jsx)(k.C5,{})]})})})]}),(0,e.jsxs)(p.Zp,{children:[(0,e.jsx)(p.aR,{className:"pb-4",children:(0,e.jsxs)(p.ZB,{className:"flex items-center gap-2",children:[(0,e.jsx)(w.ekZ,{className:"h-5 w-5"}),"Safety Systems Check"]})}),(0,e.jsx)(p.Wu,{className:"space-y-4",children:(0,e.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{name:"lights_working",label:"Lights Working"},{name:"brakes_working",label:"Brakes Working"},{name:"steering_working",label:"Steering Working"},{name:"horn_working",label:"Horn Working"},{name:"wipers_working",label:"Wipers Working"},{name:"mirrors_clean",label:"Mirrors Clean"},{name:"seatbelts_working",label:"Seatbelts Working"}].map(a=>(0,e.jsx)(k.zB,{control:A.control,name:a.name,render:({field:b})=>(0,e.jsxs)(k.eI,{className:"flex flex-row items-start space-x-3 space-y-0",children:[(0,e.jsx)(k.MJ,{children:(0,e.jsx)(o.S,{checked:b.value,onCheckedChange:b.onChange})}),(0,e.jsx)("div",{className:"space-y-1 leading-none",children:(0,e.jsx)(k.lR,{className:"text-sm font-normal",children:a.label})})]})},a.name))})})]}),(0,e.jsxs)(p.Zp,{children:[(0,e.jsx)(p.aR,{className:"pb-4",children:(0,e.jsxs)(p.ZB,{className:"flex items-center gap-2",children:[(0,e.jsx)(w.hcu,{className:"h-5 w-5"}),"Safety Equipment Check"]})}),(0,e.jsx)(p.Wu,{className:"space-y-4",children:(0,e.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{name:"first_aid_kit",label:"First Aid Kit Present"},{name:"fire_extinguisher",label:"Fire Extinguisher Present"},{name:"warning_triangle",label:"Warning Triangle Present"},{name:"jack_spare_tire",label:"Jack & Spare Tire Present"},{name:"documents_present",label:"Vehicle Documents Present"}].map(a=>(0,e.jsx)(k.zB,{control:A.control,name:a.name,render:({field:b})=>(0,e.jsxs)(k.eI,{className:"flex flex-row items-start space-x-3 space-y-0",children:[(0,e.jsx)(k.MJ,{children:(0,e.jsx)(o.S,{checked:b.value,onCheckedChange:b.onChange})}),(0,e.jsx)("div",{className:"space-y-1 leading-none",children:(0,e.jsx)(k.lR,{className:"text-sm font-normal",children:a.label})})]})},a.name))})})]}),(0,e.jsxs)(p.Zp,{children:[(0,e.jsx)(p.aR,{className:"pb-4",children:(0,e.jsx)(p.ZB,{children:"Vehicle Cleanliness"})}),(0,e.jsx)(p.Wu,{className:"space-y-4",children:(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,e.jsx)(k.zB,{control:A.control,name:"interior_clean",render:({field:a})=>(0,e.jsxs)(k.eI,{className:"flex flex-row items-start space-x-3 space-y-0",children:[(0,e.jsx)(k.MJ,{children:(0,e.jsx)(o.S,{checked:a.value,onCheckedChange:a.onChange})}),(0,e.jsx)("div",{className:"space-y-1 leading-none",children:(0,e.jsx)(k.lR,{children:"Interior Clean"})})]})}),(0,e.jsx)(k.zB,{control:A.control,name:"exterior_clean",render:({field:a})=>(0,e.jsxs)(k.eI,{className:"flex flex-row items-start space-x-3 space-y-0",children:[(0,e.jsx)(k.MJ,{children:(0,e.jsx)(o.S,{checked:a.value,onCheckedChange:a.onChange})}),(0,e.jsx)("div",{className:"space-y-1 leading-none",children:(0,e.jsx)(k.lR,{children:"Exterior Clean"})})]})})]})})]}),(0,e.jsxs)(p.Zp,{children:[(0,e.jsx)(p.aR,{className:"pb-4",children:(0,e.jsx)(p.ZB,{children:"Notes and Actions"})}),(0,e.jsxs)(p.Wu,{className:"space-y-4",children:[(0,e.jsx)(k.zB,{control:A.control,name:"defects_noted",render:({field:a})=>(0,e.jsxs)(k.eI,{children:[(0,e.jsx)(k.lR,{children:"Defects Noted"}),(0,e.jsx)(k.MJ,{children:(0,e.jsx)(m.T,{placeholder:"List any defects or issues found during inspection...",className:"min-h-[80px]",...a})}),(0,e.jsx)(k.C5,{})]})}),(0,e.jsx)(k.zB,{control:A.control,name:"corrective_actions",render:({field:a})=>(0,e.jsxs)(k.eI,{children:[(0,e.jsx)(k.lR,{children:"Corrective Actions Required"}),(0,e.jsx)(k.MJ,{children:(0,e.jsx)(m.T,{placeholder:"Describe any corrective actions needed...",className:"min-h-[80px]",...a})}),(0,e.jsx)(k.C5,{})]})}),(0,e.jsx)(k.zB,{control:A.control,name:"notes",render:({field:a})=>(0,e.jsxs)(k.eI,{children:[(0,e.jsx)(k.lR,{children:"Additional Notes"}),(0,e.jsx)(k.MJ,{children:(0,e.jsx)(m.T,{placeholder:"Any additional observations or comments...",className:"min-h-[60px]",...a})}),(0,e.jsx)(k.C5,{})]})})]})]}),(0,e.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,e.jsx)(j.$,{type:"button",variant:"outline",onClick:c,children:"Cancel"}),(0,e.jsx)(j.$,{type:"submit",disabled:i,children:i?"Saving...":a?"Update Inspection":"Create Inspection"})]})]})})}d()}catch(a){d(a)}})},9640:a=>{a.exports=import("@radix-ui/react-slot")},13020:a=>{a.exports=import("@radix-ui/react-dialog")},16235:a=>{a.exports=import("@radix-ui/react-toast")},20598:a=>{a.exports=import("@radix-ui/react-label")},25665:a=>{a.exports=import("@radix-ui/react-checkbox")},28462:a=>{a.exports=import("@tanstack/react-query")},33873:a=>{a.exports=require("path")},36307:a=>{a.exports=import("@radix-ui/react-dropdown-menu")},40361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},41415:a=>{a.exports=import("sonner")},42971:a=>{a.exports=import("zod")},46060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},47860:a=>{a.exports=import("@radix-ui/react-select")},48303:a=>{a.exports=import("@radix-ui/react-tooltip")},50802:a=>{a.exports=import("clsx")},56691:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>B});var e=c(8732),f=c(82015),g=c(28462),h=c(66345),i=c(48383),j=c(74952),k=c(39655),l=c(4720),m=c(78059),n=c(57049),o=c(38661),p=c(90192),q=c(76569),r=c(95965),s=c(81575),t=c(72737),u=c(71913),v=c(11178),w=c(9611),x=c(93063),y=c(11003),z=c(71590),A=a([g,h,i,k,l,m,n,o,p,v,w,x,z]);function B(){let{toast:a}=(0,q.dj)(),b=(0,g.useQueryClient)(),[c,d]=(0,f.useState)(!1),[A,B]=(0,f.useState)(!1),[C,D]=(0,f.useState)(null),[E,F]=(0,f.useState)(""),[G,H]=(0,f.useState)("all"),[I,J]=(0,f.useState)("all"),[K,L]=(0,f.useState)("all"),[M,N]=(0,f.useState)(),{data:O,isLoading:P}=(0,g.useQuery)({queryKey:["vehicle-inspections"],queryFn:async()=>{let{data:a,error:b}=await r.N.from("vehicle_inspections").select(`
          *,
          vehicle:vehicles (
            make,
            model,
            registration
          )
        `).order("inspection_date",{ascending:!1});if(b)throw b;return a}}),{data:Q}=(0,g.useQuery)({queryKey:["vehicles-for-inspection"],queryFn:async()=>{let{data:a,error:b}=await r.N.from("vehicles").select("id, make, model, registration").order("make");if(b)throw b;return a}}),R=(0,f.useMemo)(()=>{if(!O)return[];let a=new Set(O.map(a=>a.inspector_name));return Array.from(a)},[O]),S=(0,f.useMemo)(()=>O?O.filter(a=>{if(E){let b=E.toLowerCase(),c=a.vehicle?`${a.vehicle.make} ${a.vehicle.model}`.toLowerCase():"",d=a.vehicle?.registration?.toLowerCase()||"",e=a.inspector_name.toLowerCase();if(!c.includes(b)&&!d.includes(b)&&!e.includes(b))return!1}if("all"!==G&&a.vehicle_id!==G||"all"!==I&&a.overall_status!==I||"all"!==K&&a.inspector_name!==K)return!1;if(M?.from||M?.to){let b=(0,s.H)(a.inspection_date);if(M.from&&b<M.from||M.to&&b>M.to)return!1}return!0}):[],[O,E,G,I,K,M]),[T,U]=(0,f.useState)(1),V=Math.ceil((S?.length||0)/20),W=(T-1)*20,X=W+20,Y=S?.slice(W,X)||[],Z=(0,g.useMutation)({mutationFn:async a=>{let{error:b}=await r.N.from("vehicle_inspections").delete().eq("id",a);if(b)throw b},onSuccess:()=>{b.invalidateQueries({queryKey:["vehicle-inspections"]}),a({title:"Inspection deleted",description:"The vehicle inspection has been deleted successfully."})},onError:b=>{a({title:"Error",description:"Failed to delete inspection",variant:"destructive"})}}),$=async b=>{try{await (0,z.C)(b,{logoUrl:window.location.origin+"/images/Koormatics-logo.png"})}catch(b){console.error(b),a({title:"PDF generation failed",description:"Please try again.",variant:"destructive"})}},_=E||"all"!==G||"all"!==I||"all"!==K||M?.from||M?.to;return(0,e.jsx)("div",{className:"min-h-screen bg-background",children:(0,e.jsxs)("div",{className:"p-4 px-6 space-y-6",children:[(0,e.jsx)("div",{className:"border-b border-border pb-4 pt-4",children:(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsx)("div",{children:(0,e.jsx)("h1",{className:"text-2xl font-semibold text-foreground",children:"Vehicle Inspections"})}),(0,e.jsx)("div",{className:"flex gap-2",children:(0,e.jsxs)(h.$,{onClick:()=>{D(null),d(!0)},variant:"outline",size:"sm",className:"gap-2",children:[(0,e.jsx)(j.FWt,{className:"h-4 w-4"}),"New Inspection"]})})]})}),(0,e.jsx)("div",{className:"space-y-4",children:(0,e.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center",children:[(0,e.jsx)("div",{className:"flex-1",children:(0,e.jsxs)("div",{className:"relative",children:[(0,e.jsx)(j.vji,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),(0,e.jsx)(m.p,{placeholder:"Search by vehicle, registration, or inspector...",value:E,onChange:a=>F(a.target.value),className:"pl-8"})]})}),(0,e.jsxs)(n.l6,{value:G,onValueChange:H,children:[(0,e.jsx)(n.bq,{className:"w-[200px]",children:(0,e.jsx)(n.yv,{placeholder:"All Vehicles"})}),(0,e.jsxs)(n.gC,{children:[(0,e.jsx)(n.eb,{value:"all",children:"All Vehicles"}),Q?.map(a=>(0,e.jsxs)(n.eb,{value:a.id,children:[a.make," ",a.model," (",a.registration,")"]},a.id))]})]}),(0,e.jsxs)(n.l6,{value:I,onValueChange:J,children:[(0,e.jsx)(n.bq,{className:"w-[150px]",children:(0,e.jsx)(n.yv,{placeholder:"All Status"})}),(0,e.jsxs)(n.gC,{children:[(0,e.jsx)(n.eb,{value:"all",children:"All Status"}),(0,e.jsx)(n.eb,{value:"pass",children:"Pass"}),(0,e.jsx)(n.eb,{value:"fail",children:"Fail"}),(0,e.jsx)(n.eb,{value:"conditional",children:"Conditional"})]})]}),(0,e.jsxs)(n.l6,{value:K,onValueChange:L,children:[(0,e.jsx)(n.bq,{className:"w-[150px]",children:(0,e.jsx)(n.yv,{placeholder:"All Inspectors"})}),(0,e.jsxs)(n.gC,{children:[(0,e.jsx)(n.eb,{value:"all",children:"All Inspectors"}),R.map(a=>(0,e.jsx)(n.eb,{value:a,children:a},a))]})]}),(0,e.jsx)(v.U,{value:M,onChange:N,className:"w-[240px]"}),_&&(0,e.jsxs)(h.$,{variant:"outline",size:"sm",onClick:()=>{F(""),H("all"),J("all"),L("all"),N(void 0)},children:[(0,e.jsx)(j.dJT,{className:"h-4 w-4 mr-2"}),"Clear"]})]})}),_&&(0,e.jsxs)("div",{className:"flex flex-wrap gap-2",children:[E&&(0,e.jsxs)(l.E,{variant:"secondary",className:"gap-1",children:["Search: ",E,(0,e.jsx)(h.$,{variant:"ghost",size:"icon",className:"h-5 w-5 ml-1 p-0",onClick:()=>F(""),children:"\xd7"})]}),"all"!==G&&(0,e.jsxs)(l.E,{variant:"secondary",className:"gap-1",children:["Vehicle:"," ",(()=>{let a=Q?.find(a=>a&&"object"==typeof a&&"id"in a&&a.id===G);return a&&"object"==typeof a&&"make"in a&&"model"in a?`${a.make} ${a.model}`:"Unknown Vehicle"})(),(0,e.jsx)(h.$,{variant:"ghost",size:"icon",className:"h-5 w-5 ml-1 p-0",onClick:()=>H("all"),children:"\xd7"})]}),"all"!==I&&(0,e.jsxs)(l.E,{variant:"secondary",className:"gap-1",children:["Status: ",I,(0,e.jsx)(h.$,{variant:"ghost",size:"icon",className:"h-5 w-5 ml-1 p-0",onClick:()=>J("all"),children:"\xd7"})]}),"all"!==K&&(0,e.jsxs)(l.E,{variant:"secondary",className:"gap-1",children:["Inspector: ",K,(0,e.jsx)(h.$,{variant:"ghost",size:"icon",className:"h-5 w-5 ml-1 p-0",onClick:()=>L("all"),children:"\xd7"})]}),(M?.from||M?.to)&&(0,e.jsxs)(l.E,{variant:"secondary",className:"gap-1",children:["Date Range:"," ",M?.from?(0,u.GP)(M.from,"MMM dd"):""," -"," ",M?.to?(0,u.GP)(M.to,"MMM dd"):"",(0,e.jsx)(h.$,{variant:"ghost",size:"icon",className:"h-5 w-5 ml-1 p-0",onClick:()=>N(void 0),children:"\xd7"})]})]}),(0,e.jsx)(k.Zp,{children:(0,e.jsx)(k.Wu,{className:"p-0",children:(0,e.jsx)("div",{className:"overflow-x-auto",children:(0,e.jsxs)(i.XI,{children:[(0,e.jsx)(i.A0,{children:(0,e.jsxs)(i.Hj,{children:[(0,e.jsx)(i.nd,{children:"Date"}),(0,e.jsx)(i.nd,{children:"Inspection ID"}),(0,e.jsx)(i.nd,{children:"Vehicle"}),(0,e.jsx)(i.nd,{children:"Inspector"}),(0,e.jsx)(i.nd,{children:"Status"}),(0,e.jsx)(i.nd,{children:"Mileage"}),(0,e.jsx)(i.nd,{children:"Fuel Level"}),(0,e.jsx)(i.nd,{children:"Type"}),(0,e.jsx)(i.nd,{children:"Actions"})]})}),(0,e.jsx)(i.BF,{children:P?(0,e.jsx)(i.Hj,{children:(0,e.jsx)(i.nA,{colSpan:9,className:"text-center py-8",children:"Loading inspections..."})}):S?.length===0?(0,e.jsx)(i.Hj,{children:(0,e.jsx)(i.nA,{colSpan:9,className:"text-center py-8",children:"No inspections found"})}):Y?.map(a=>(0,e.jsxs)(i.Hj,{children:[(0,e.jsx)(i.nA,{children:(a=>{let b=(0,s.H)(a);return(0,t.f)(b)?(0,u.GP)(b,"dd/MM/yyyy"):"Invalid Date"})(a.inspection_date)}),(0,e.jsx)(i.nA,{children:(0,e.jsx)("span",{className:"font-mono text-xs text-muted-foreground",children:(0,y.p)(a.id,8)})}),(0,e.jsx)(i.nA,{children:(0,e.jsxs)("div",{children:[(0,e.jsx)("div",{className:"font-medium",children:a.vehicle?`${a.vehicle.make} ${a.vehicle.model}`:"Unknown Vehicle"}),(0,e.jsx)("div",{className:"text-sm text-muted-foreground",children:a.vehicle?.registration})]})}),(0,e.jsx)(i.nA,{children:(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(j.KJW,{className:"h-4 w-4 text-muted-foreground"}),a.inspector_name]})}),(0,e.jsx)(i.nA,{children:(a=>{switch(a){case"pass":return(0,e.jsx)(l.E,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:"Pass"});case"fail":return(0,e.jsx)(l.E,{className:"bg-red-100 text-red-800 hover:bg-red-100",children:"Fail"});case"conditional":return(0,e.jsx)(l.E,{className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-100",children:"Conditional"});default:return(0,e.jsx)(l.E,{variant:"secondary",children:a})}})(a.overall_status)}),(0,e.jsxs)(i.nA,{children:[a.mileage?.toLocaleString()," km"]}),(0,e.jsxs)(i.nA,{children:[a.fuel_level,"%"]}),(0,e.jsx)(i.nA,{children:(0,e.jsxs)("div",{className:"flex gap-1",children:[a.pre_trip&&(0,e.jsx)(l.E,{variant:"outline",className:"text-xs",children:"Pre"}),a.post_trip&&(0,e.jsx)(l.E,{variant:"outline",className:"text-xs",children:"Post"})]})}),(0,e.jsx)(i.nA,{children:(0,e.jsxs)(p.rI,{children:[(0,e.jsx)(p.ty,{asChild:!0,children:(0,e.jsx)(h.$,{variant:"ghost",className:"h-8 w-8 p-0",children:(0,e.jsx)(j.GvN,{className:"h-4 w-4"})})}),(0,e.jsxs)(p.SQ,{align:"end",children:[(0,e.jsxs)(p._2,{onClick:()=>{D(a),B(!0)},children:[(0,e.jsx)(j.kU3,{className:"mr-2 h-4 w-4"}),"View Details"]}),(0,e.jsxs)(p._2,{onClick:()=>{D(a),d(!0)},children:[(0,e.jsx)(j.ffu,{className:"mr-2 h-4 w-4"}),"Edit"]}),(0,e.jsxs)(p._2,{onClick:()=>$(a),children:[(0,e.jsx)(j.ni1,{className:"mr-2 h-4 w-4"}),"Download PDF"]}),(0,e.jsxs)(p._2,{onClick:()=>{var b;return b=a.id,void(confirm("Are you sure you want to delete this inspection?")&&Z.mutate(b))},className:"text-red-600",children:[(0,e.jsx)(j.TBR,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},a.id))})]})})})}),(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsx)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:(0,e.jsxs)("span",{children:["Showing ",W+1,"-",Math.min(X,S?.length||0)," of"," ",S?.length||0," inspections"]})}),(0,e.jsx)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:(0,e.jsxs)("span",{children:["Page ",T," of ",V]})})]}),V>1&&(0,e.jsxs)("div",{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>U(Math.max(1,T-1)),disabled:1===T,className:"h-8 px-3",children:"Previous"}),(0,e.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,V)},(a,b)=>{let c=b+1;return V<=5||1===c||c===V||c>=T-1&&c<=T+1?(0,e.jsx)(h.$,{variant:T===c?"default":"outline",size:"sm",onClick:()=>U(c),className:"h-8 w-8 p-0",children:c},c):c===T-2||c===T+2?(0,e.jsx)("span",{className:"px-2 text-muted-foreground",children:"..."},c):null})}),(0,e.jsx)(h.$,{variant:"outline",size:"sm",onClick:()=>U(Math.min(V,T+1)),disabled:T===V,className:"h-8 px-3",children:"Next"})]}),(0,e.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,e.jsx)("span",{children:"•"}),(0,e.jsxs)("span",{children:["Last updated: ",new Date().toLocaleTimeString()]})]})]}),(0,e.jsx)(o.lG,{open:c,onOpenChange:d,children:(0,e.jsxs)(o.Cf,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,e.jsxs)(o.c7,{children:[(0,e.jsx)(o.L3,{children:C?"Edit Vehicle Inspection":"New Vehicle Inspection"}),(0,e.jsx)(o.rr,{children:C?"Update the vehicle inspection details and safety checklist.":"Complete the daily vehicle inspection checklist for safety compliance."})]}),(0,e.jsx)(w.N,{inspection:C,onSuccess:()=>{d(!1),D(null),b.invalidateQueries({queryKey:["vehicle-inspections"]})},onCancel:()=>{d(!1),D(null)}})]})}),(0,e.jsx)(x.p,{inspection:C,open:A,onOpenChange:B})]})})}[g,h,i,k,l,m,n,o,p,v,w,x,z]=A.then?(await A)():A,d()}catch(a){d(a)}})},56884:a=>{a.exports=import("react-hook-form")},57312:a=>{a.exports=import("next-themes")},60461:a=>{a.exports=import("@radix-ui/react-popover")},65515:a=>{a.exports=require("jspdf")},71590:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{C:()=>p});var e=c(65515),f=c.n(e),g=c(83501),h=c(11003),i=c(75634),j=c.n(i),k=a([g]);async function l(a){try{let b=await fetch(a,{cache:"no-store"});if(!b.ok)return null;let c=await b.blob();return await new Promise(a=>{let b=new FileReader;b.onloadend=()=>a(b.result),b.readAsDataURL(c)})}catch{return null}}async function m(a){try{await new Promise(a=>setTimeout(a,0));let b=new Image;b.crossOrigin="anonymous",b.src=a,await b.decode();let c=document.createElement("canvas");c.width=b.naturalWidth,c.height=b.naturalHeight;let d=c.getContext("2d");if(!d)return null;return d.drawImage(b,0,0),c.toDataURL("image/png")}catch{return null}}function n(a){return a?"Yes":!1===a?"No":"-"}function o(a){if(!a)return"-";try{let b=new Date(a);if(isNaN(b.getTime()))return a;return b.toISOString().slice(0,10)}catch{return a}}async function p(a,b){let c,d=new(f())({unit:"pt",format:"a4"}),e="#2E4A87",i="#7AC943";d.setProperties({title:`Vehicle Inspection ${(0,h.p)(a.id,8)}`,subject:"Vehicle Inspection Report",author:b?.companyName||"Koormatics",keywords:"Vehicle, Inspection, Report, Koormatics",creator:"Koormatics System"});let k=d.internal.pageSize.getWidth(),p=d.internal.pageSize.getHeight(),q=null;if(b?.logoUrl&&(q=await m(b.logoUrl)||await l(b.logoUrl)),d.setFillColor(255,255,255),d.rect(0,0,k,80,"F"),q)try{d.addImage(q,"PNG",40,22,160,42)}catch{try{d.addImage(q,"JPEG",40,22,160,42)}catch{}}d.setTextColor(e),d.setFont("helvetica","bold"),d.setFontSize(18),d.text("Vehicle Inspection Report",k-40,30,{align:"right"}),d.setFont("helvetica","normal"),d.setFontSize(10),d.text(b?.companyName||"Koormatics Fleet Management",k-40,48,{align:"right"}),b?.companyAddress&&d.text(b.companyAddress,k-40,64,{align:"right"}),d.setDrawColor(i),d.setFillColor(i),d.rect(40,76,k-80,2,"F");let r=100;(0,g.default)(d,{startY:r,styles:{fontSize:10,cellPadding:6},margin:{left:40,right:40},body:[["Inspection ID",(0,h.p)(a.id,8),"Status",(a.overall_status||"-").toString().toUpperCase()],["Date",o(a.inspection_date),"Inspector",a.inspector_name||"-"],["Vehicle",`${a.vehicle?.make||""} ${a.vehicle?.model||""}`.trim()||"-","Registration",a.vehicle?.registration||"-"],["Mileage",null!=a.mileage?`${a.mileage.toLocaleString()} km`:"-","Fuel Level",null!=a.fuel_level?`${a.fuel_level}%`:"-"]],showHead:"never",theme:"grid",columnStyles:{0:{fontStyle:"bold",cellWidth:120},1:{cellWidth:(k-80)/2-120},2:{fontStyle:"bold",cellWidth:120},3:{cellWidth:(k-80)/2-120}},didParseCell:b=>{if("body"===b.section&&1===b.column.index){let c=b.row.raw?.[0];if("Status"===c){let[c,d,e]=function(a){let b=a.replace("#",""),c=parseInt(b.substring(0,2),16)||0,d=parseInt(b.substring(2,4),16)||0,e=parseInt(b.substring(4,6),16)||0;return[c,d,e]}(function(a){switch((a||"").toLowerCase()){case"pass":return"#28A745";case"fail":return"#DC3545";case"conditional":return"#FFC107";default:return"#6C757D"}}(a.overall_status||""));b.cell.styles.fillColor=[c,d,e],b.cell.styles.textColor=[255,255,255],b.cell.styles.fontStyle="bold"}}}}),r=d.lastAutoTable.finalY+16,(0,g.default)(d,{startY:r,head:[["Checklist Item","Result"]],body:[["Pre-trip",n(a.pre_trip)],["Post-trip",n(a.post_trip)],["Lights working",n(a.lights_working)],["Brakes working",n(a.brakes_working)],["Steering working",n(a.steering_working)],["Horn working",n(a.horn_working)],["Wipers working",n(a.wipers_working)],["Mirrors clean",n(a.mirrors_clean)],["Seatbelts working",n(a.seatbelts_working)],["First aid kit",n(a.first_aid_kit)],["Fire extinguisher",n(a.fire_extinguisher)],["Warning triangle",n(a.warning_triangle)],["Jack & spare tire",n(a.jack_spare_tire)],["Documents present",n(a.documents_present)],["Interior clean",n(a.interior_clean)],["Exterior clean",n(a.exterior_clean)]],styles:{fontSize:9,cellPadding:6},headStyles:{fillColor:e,textColor:255},theme:"striped",margin:{left:40,right:40}}),r=d.lastAutoTable.finalY+16,(0,g.default)(d,{startY:r,head:[["Fluids / Levels","Status"]],body:[["Engine oil",a.engine_oil||"-"],["Coolant",a.coolant||"-"],["Brake fluid",a.brake_fluid||"-"],["Tires condition",a.tires_condition||"-"]],styles:{fontSize:9,cellPadding:6},headStyles:{fillColor:e,textColor:255},theme:"grid",margin:{left:40,right:40}}),r=d.lastAutoTable.finalY+16;let s=[a.defects_noted?`Defects noted: ${a.defects_noted}`:"",a.corrective_actions?`Corrective actions: ${a.corrective_actions}`:"",a.notes?`Additional notes: ${a.notes}`:""].filter(Boolean).join("\n\n");if((0,g.default)(d,{startY:r,head:[["Notes & Actions"]],body:[[s||"No additional notes."]],styles:{fontSize:10,cellPadding:8,valign:"top"},headStyles:{fillColor:e,textColor:255,halign:"left"},columnStyles:{0:{cellWidth:k-80}},theme:"grid",margin:{left:40,right:40}}),r=d.lastAutoTable.finalY+20,d.lastAutoTable&&d.lastAutoTable.finalY+140>p&&(d.addPage(),r=36),b?.reportUrl)try{c=await j().toDataURL(b.reportUrl,{margin:0,width:96})}catch{}let t=d.internal.pageSize.getHeight()-96;if(c)try{d.addImage(c,"PNG",40,t-8,80,80),d.setFontSize(8),d.setTextColor(100),d.text("Scan for digital record",42,t+78)}catch{}let u=112*!!c,v=40+u,w=d.internal.pageSize.getWidth()-40-220;d.setDrawColor(e),d.line(v,t,v+220,t),d.line(w,t,w+220,t),d.setFontSize(9),d.setTextColor(40),d.text("Inspector Signature",v+110,t+14,{align:"center"}),d.text("Manager Approval",w+110,t+14,{align:"center"}),b?.preparedBy&&d.text(`Prepared by: ${b.preparedBy}`,v,t+28);let x=d.getNumberOfPages();for(let a=1;a<=x;a++){d.setPage(a);let b=d.internal.pageSize.getHeight()-24;d.setFontSize(8),d.setTextColor(120),d.text(`Page ${a} of ${x} • Generated ${new Date().toISOString().slice(0,19).replace("T"," ")}`,d.internal.pageSize.getWidth()/2,b,{align:"center"})}let y=["inspection",a.vehicle?.registration||"vehicle",o(a.inspection_date)||"date",(0,h.p)(a.id,8)].filter(Boolean).join("-")+".pdf";d.save(y)}g=(k.then?(await k)():k)[0],d()}catch(a){d(a)}})},75634:a=>{a.exports=require("qrcode")},75979:a=>{a.exports=import("tailwind-merge")},82015:a=>{a.exports=require("react")},83501:a=>{a.exports=import("jspdf-autotable")},86093:a=>{a.exports=require("react-day-picker")},93063:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{p:()=>n});var e=c(8732);c(82015);var f=c(38661),g=c(39655),h=c(4720),i=c(74952),j=c(81575),k=c(72737),l=c(71913),m=a([f,g,h]);function n({inspection:a,open:b,onOpenChange:c}){if(!a)return null;let d=a=>{switch(a){case"good":return(0,e.jsx)(h.E,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:"Good"});case"low":return(0,e.jsx)(h.E,{className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-100",children:"Low"});case"needs_change":case"needs_refill":return(0,e.jsx)(h.E,{className:"bg-red-100 text-red-800 hover:bg-red-100",children:"Needs Attention"});default:return(0,e.jsx)(h.E,{variant:"secondary",children:a})}},m=({checked:a})=>a?(0,e.jsx)(i.rAV,{className:"h-4 w-4 text-green-600"}):(0,e.jsx)(i.Jpz,{className:"h-4 w-4 text-red-600"});return(0,e.jsx)(f.lG,{open:b,onOpenChange:c,children:(0,e.jsxs)(f.Cf,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,e.jsx)(f.c7,{children:(0,e.jsxs)(f.L3,{className:"flex items-center gap-2",children:[(0,e.jsx)(i.iUU,{className:"h-5 w-5"}),"Vehicle Inspection Details"]})}),(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsxs)(g.Zp,{children:[(0,e.jsx)(g.aR,{className:"pb-4",children:(0,e.jsxs)(g.ZB,{className:"flex items-center justify-between",children:[(0,e.jsxs)("div",{className:"flex items-center gap-2",children:[(0,e.jsx)(i.THT,{className:"h-5 w-5"}),"Inspection Overview"]}),(a=>{switch(a){case"pass":return(0,e.jsxs)(h.E,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:[(0,e.jsx)(i.rAV,{className:"h-3 w-3 mr-1"}),"Pass"]});case"fail":return(0,e.jsxs)(h.E,{className:"bg-red-100 text-red-800 hover:bg-red-100",children:[(0,e.jsx)(i.Jpz,{className:"h-3 w-3 mr-1"}),"Fail"]});case"conditional":return(0,e.jsxs)(h.E,{className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-100",children:[(0,e.jsx)(i.hcu,{className:"h-3 w-3 mr-1"}),"Conditional"]});default:return(0,e.jsx)(h.E,{variant:"secondary",children:a})}})(a.overall_status)]})}),(0,e.jsx)(g.Wu,{className:"space-y-4",children:(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,e.jsxs)("div",{className:"space-y-1",children:[(0,e.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Vehicle"}),(0,e.jsx)("p",{className:"font-medium",children:a.vehicle?`${a.vehicle.make} ${a.vehicle.model}`:"Unknown Vehicle"}),(0,e.jsx)("p",{className:"text-sm text-muted-foreground",children:a.vehicle?.registration})]}),(0,e.jsxs)("div",{className:"space-y-1",children:[(0,e.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,e.jsx)(i.KJW,{className:"h-3 w-3"}),"Inspector"]}),(0,e.jsx)("p",{className:"font-medium",children:a.inspector_name})]}),(0,e.jsxs)("div",{className:"space-y-1",children:[(0,e.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,e.jsx)(i.VvS,{className:"h-3 w-3"}),"Inspection Date"]}),(0,e.jsx)("p",{className:"font-medium",children:(a=>{let b=(0,j.H)(a);return(0,k.f)(b)?(0,l.GP)(b,"EEEE, MMMM do, yyyy"):"Invalid Date"})(a.inspection_date)})]}),(0,e.jsxs)("div",{className:"space-y-1",children:[(0,e.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Inspection Type"}),(0,e.jsxs)("div",{className:"flex gap-2",children:[a.pre_trip&&(0,e.jsx)(h.E,{variant:"outline",children:"Pre-Trip"}),a.post_trip&&(0,e.jsx)(h.E,{variant:"outline",children:"Post-Trip"})]})]}),(0,e.jsxs)("div",{className:"space-y-1",children:[(0,e.jsxs)("p",{className:"text-sm font-medium text-muted-foreground flex items-center gap-1",children:[(0,e.jsx)(i.zD7,{className:"h-3 w-3"}),"Created"]}),(0,e.jsx)("p",{className:"text-sm",children:(a=>{let b=(0,j.H)(a);return(0,k.f)(b)?(0,l.GP)(b,"MMM dd, yyyy 'at' HH:mm"):"Invalid Date"})(a.created_at)})]})]})})]}),(0,e.jsxs)(g.Zp,{children:[(0,e.jsx)(g.aR,{className:"pb-4",children:(0,e.jsxs)(g.ZB,{className:"flex items-center gap-2",children:[(0,e.jsx)(i._I2,{className:"h-5 w-5"}),"Vehicle Readings"]})}),(0,e.jsx)(g.Wu,{children:(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,e.jsxs)("div",{className:"space-y-1",children:[(0,e.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Mileage"}),(0,e.jsxs)("p",{className:"text-2xl font-bold",children:[a.mileage?.toLocaleString()," km"]})]}),(0,e.jsxs)("div",{className:"space-y-1",children:[(0,e.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Fuel Level"}),(0,e.jsxs)("p",{className:"text-2xl font-bold",children:[a.fuel_level,"%"]})]})]})})]}),(0,e.jsxs)(g.Zp,{children:[(0,e.jsx)(g.aR,{className:"pb-4",children:(0,e.jsxs)(g.ZB,{className:"flex items-center gap-2",children:[(0,e.jsx)(i.XHo,{className:"h-5 w-5"}),"Fluid Levels"]})}),(0,e.jsx)(g.Wu,{children:(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,e.jsx)("span",{className:"font-medium",children:"Engine Oil"}),d(a.engine_oil)]}),(0,e.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,e.jsx)("span",{className:"font-medium",children:"Coolant"}),d(a.coolant)]}),(0,e.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,e.jsx)("span",{className:"font-medium",children:"Brake Fluid"}),d(a.brake_fluid)]})]})})]}),(0,e.jsxs)(g.Zp,{children:[(0,e.jsx)(g.aR,{className:"pb-4",children:(0,e.jsxs)(g.ZB,{className:"flex items-center gap-2",children:[(0,e.jsx)(i.IFY,{className:"h-5 w-5"}),"Vehicle Condition"]})}),(0,e.jsx)(g.Wu,{children:(0,e.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,e.jsx)("span",{className:"font-medium",children:"Tires Condition"}),(a=>{switch(a){case"good":return(0,e.jsx)(h.E,{className:"bg-green-100 text-green-800 hover:bg-green-100",children:"Good"});case"fair":return(0,e.jsx)(h.E,{className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-100",children:"Fair"});case"poor":return(0,e.jsx)(h.E,{className:"bg-red-100 text-red-800 hover:bg-red-100",children:"Poor"});default:return(0,e.jsx)(h.E,{variant:"secondary",children:a})}})(a.tires_condition)]})})]}),(0,e.jsxs)(g.Zp,{children:[(0,e.jsx)(g.aR,{className:"pb-4",children:(0,e.jsxs)(g.ZB,{className:"flex items-center gap-2",children:[(0,e.jsx)(i.ekZ,{className:"h-5 w-5"}),"Safety Systems"]})}),(0,e.jsx)(g.Wu,{children:(0,e.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{key:"lights_working",label:"Lights Working"},{key:"brakes_working",label:"Brakes Working"},{key:"steering_working",label:"Steering Working"},{key:"horn_working",label:"Horn Working"},{key:"wipers_working",label:"Wipers Working"},{key:"mirrors_clean",label:"Mirrors Clean"},{key:"seatbelts_working",label:"Seatbelts Working"}].map(b=>(0,e.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,e.jsx)("span",{className:"font-medium",children:b.label}),(0,e.jsx)(m,{checked:a[b.key]})]},b.key))})})]}),(0,e.jsxs)(g.Zp,{children:[(0,e.jsx)(g.aR,{className:"pb-4",children:(0,e.jsxs)(g.ZB,{className:"flex items-center gap-2",children:[(0,e.jsx)(i.hcu,{className:"h-5 w-5"}),"Safety Equipment"]})}),(0,e.jsx)(g.Wu,{children:(0,e.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{key:"first_aid_kit",label:"First Aid Kit"},{key:"fire_extinguisher",label:"Fire Extinguisher"},{key:"warning_triangle",label:"Warning Triangle"},{key:"jack_spare_tire",label:"Jack & Spare Tire"},{key:"documents_present",label:"Vehicle Documents"}].map(b=>(0,e.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,e.jsx)("span",{className:"font-medium",children:b.label}),(0,e.jsx)(m,{checked:a[b.key]})]},b.key))})})]}),(0,e.jsxs)(g.Zp,{children:[(0,e.jsx)(g.aR,{className:"pb-4",children:(0,e.jsx)(g.ZB,{children:"Vehicle Cleanliness"})}),(0,e.jsx)(g.Wu,{children:(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,e.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,e.jsx)("span",{className:"font-medium",children:"Interior Clean"}),(0,e.jsx)(m,{checked:a.interior_clean})]}),(0,e.jsxs)("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[(0,e.jsx)("span",{className:"font-medium",children:"Exterior Clean"}),(0,e.jsx)(m,{checked:a.exterior_clean})]})]})})]}),(a.defects_noted||a.corrective_actions||a.notes)&&(0,e.jsxs)(g.Zp,{children:[(0,e.jsx)(g.aR,{className:"pb-4",children:(0,e.jsx)(g.ZB,{children:"Notes and Actions"})}),(0,e.jsxs)(g.Wu,{className:"space-y-4",children:[a.defects_noted&&(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)("h4",{className:"font-medium text-red-700",children:"Defects Noted"}),(0,e.jsx)("p",{className:"text-sm p-3 bg-red-50 border border-red-200 rounded-lg",children:a.defects_noted})]}),a.corrective_actions&&(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)("h4",{className:"font-medium text-yellow-700",children:"Corrective Actions Required"}),(0,e.jsx)("p",{className:"text-sm p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:a.corrective_actions})]}),a.notes&&(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsx)("h4",{className:"font-medium text-blue-700",children:"Additional Notes"}),(0,e.jsx)("p",{className:"text-sm p-3 bg-blue-50 border border-blue-200 rounded-lg",children:a.notes})]})]})]})]})]})})}[f,g,h]=m.then?(await m)():m,d()}catch(a){d(a)}})},93939:a=>{a.exports=require("@supabase/supabase-js")},98825:a=>{a.exports=import("@hookform/resolvers/zod")},99391:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{config:()=>r,default:()=>n,getServerSideProps:()=>q,getStaticPaths:()=>p,getStaticProps:()=>o,handler:()=>z,reportWebVitals:()=>s,routeModule:()=>y,unstable_getServerProps:()=>w,unstable_getServerSideProps:()=>x,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>u,unstable_getStaticProps:()=>t});var e=c(63885),f=c(80237),g=c(81413),h=c(65611),i=c.n(h),j=c(74780),k=c(56691),l=c(12289),m=a([j,k]);[j,k]=m.then?(await m)():m;let n=(0,g.M)(k,"default"),o=(0,g.M)(k,"getStaticProps"),p=(0,g.M)(k,"getStaticPaths"),q=(0,g.M)(k,"getServerSideProps"),r=(0,g.M)(k,"config"),s=(0,g.M)(k,"reportWebVitals"),t=(0,g.M)(k,"unstable_getStaticProps"),u=(0,g.M)(k,"unstable_getStaticPaths"),v=(0,g.M)(k,"unstable_getStaticParams"),w=(0,g.M)(k,"unstable_getServerProps"),x=(0,g.M)(k,"unstable_getServerSideProps"),y=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/VehicleInspections",pathname:"/VehicleInspections",bundlePath:"",filename:""},distDir:".next-fleet",relativeProjectDir:"",components:{App:j.default,Document:i()},userland:k}),z=(0,l.U)({srcPage:"/VehicleInspections",config:r,userland:k,routeModule:y,getStaticPaths:p,getStaticProps:o,getServerSideProps:q});d()}catch(a){d(a)}})}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[4952,5611,5781,1913,4780,5833,8224],()=>b(b.s=99391));module.exports=c})();