"use strict";(()=>{var a={};a.id=6079,a.ids=[636,3220,6079],a.modules={6516:a=>{a.exports=require("react-smooth")},6729:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{d:()=>i});var e=c(8732),f=c(39655),g=c(74952),h=a([f]);function i({data:a,selectedYear:b}){let c=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(a);return(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,e.jsxs)(f.Zp,{children:[(0,e.jsxs)(f.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(f.ZB,{className:"text-lg",children:"Revenue"}),(0,e.jsxs)(f.BT,{children:["Total income for ",b]})]}),(0,e.jsx)(g.G9t,{className:"h-5 w-5 text-green-500"})]}),(0,e.jsxs)(f.Wu,{children:[(0,e.jsx)("div",{className:"text-2xl font-bold text-green-600",children:c(a.revenueAnalytics.totalRevenue)}),(0,e.jsxs)("p",{className:"text-xs text-muted-foreground",children:["From ",a.revenueAnalytics.tripCount," trips"]})]})]}),(0,e.jsxs)(f.Zp,{children:[(0,e.jsxs)(f.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(f.ZB,{className:"text-lg",children:"Expenses"}),(0,e.jsxs)(f.BT,{children:["Total costs for ",b]})]}),(0,e.jsx)(g.klo,{className:"h-5 w-5 text-red-500"})]}),(0,e.jsxs)(f.Wu,{children:[(0,e.jsx)("div",{className:"text-2xl font-bold text-red-600",children:c(a.costAnalytics.summaryCosts.total)}),(0,e.jsx)("p",{className:"text-xs text-muted-foreground",children:"Maintenance & fuel expenses"})]})]}),(0,e.jsxs)(f.Zp,{children:[(0,e.jsxs)(f.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(f.ZB,{className:"text-lg",children:"Profit"}),(0,e.jsx)(f.BT,{children:"Revenue minus expenses"})]}),(0,e.jsx)(g.TxX,{className:"h-5 w-5 text-blue-500"})]}),(0,e.jsxs)(f.Wu,{children:[(0,e.jsx)("div",{className:`text-2xl font-bold ${a.profitAnalytics.totalProfit>=0?"text-blue-600":"text-red-600"}`,children:c(a.profitAnalytics.totalProfit)}),(0,e.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Margin: ",a.profitAnalytics.profitMargin.toFixed(1),"%"]})]})]}),(0,e.jsxs)(f.Zp,{children:[(0,e.jsxs)(f.aR,{className:"flex flex-row items-center justify-between pb-2",children:[(0,e.jsxs)("div",{children:[(0,e.jsx)(f.ZB,{className:"text-lg",children:"Cost Breakdown"}),(0,e.jsx)(f.BT,{children:"Maintenance vs fuel costs"})]}),(0,e.jsx)(g.ntg,{className:"h-5 w-5 text-orange-500"})]}),(0,e.jsxs)(f.Wu,{children:[(0,e.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:c(a.costAnalytics.summaryCosts.maintenance)}),(0,e.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Maintenance: ",(a.costAnalytics.summaryCosts.maintenance/a.costAnalytics.summaryCosts.total*100).toFixed(1),"%"," | ","Fuel: ",(a.costAnalytics.summaryCosts.fuel/a.costAnalytics.summaryCosts.total*100).toFixed(1),"%"]})]})]})]})}f=(h.then?(await h)():h)[0],d()}catch(a){d(a)}})},8732:a=>{a.exports=require("react/jsx-runtime")},8921:a=>{a.exports=require("lodash/maxBy")},8938:a=>{a.exports=import("class-variance-authority")},9640:a=>{a.exports=import("@radix-ui/react-slot")},9888:a=>{a.exports=require("lodash/first")},9948:a=>{a.exports=require("lodash/upperFirst")},11570:a=>{a.exports=require("lodash/isBoolean")},13261:a=>{a.exports=require("victory-vendor/d3-shape")},14014:a=>{a.exports=require("lodash/isFunction")},14505:a=>{a.exports=import("@radix-ui/react-scroll-area")},16235:a=>{a.exports=import("@radix-ui/react-toast")},16490:a=>{a.exports=require("lodash/mapValues")},18725:a=>{a.exports=require("lodash/every")},18785:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{default:()=>s});var e=c(8732),f=c(82015),g=c(68953),h=c(57049),i=c(45876),j=c(6729),k=c(67676),l=c(39988),m=c(88058),n=c(90333),o=c(90882),p=c(74952),q=c(54269),r=a([g,h,i,j,k,l,m,n,o,q]);[g,h,i,j,k,l,m,n,o,q]=r.then?(await r)():r;let s=()=>{let{combinedData:a,isLoading:b,selectedYear:c,setSelectedYear:d,activeTab:r,setActiveTab:s,yearOptions:t,comparisonYear:u,setComparisonYear:v}=(0,i.S)();return(0,f.useEffect)(()=>{"comparison"!==r||u||s("overview")},[r,u]),(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsxs)("div",{className:"flex justify-between items-center",children:[(0,e.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Financial Analytics"}),(0,e.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,e.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,e.jsx)("span",{className:"text-sm font-medium",children:"Compare with:"}),(0,e.jsxs)(h.l6,{value:u||"none",onValueChange:a=>{v("none"===a?null:a)},children:[(0,e.jsx)(h.bq,{className:"w-[120px]",children:(0,e.jsx)(h.yv,{placeholder:"Select year"})}),(0,e.jsxs)(h.gC,{children:[(0,e.jsx)(h.eb,{value:"none",children:"None"}),t.filter(a=>a!==c).map(a=>(0,e.jsx)(h.eb,{value:a,children:a},a))]})]})]}),(0,e.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,e.jsx)("span",{className:"text-sm font-medium",children:"Year:"}),(0,e.jsxs)(h.l6,{value:c,onValueChange:d,children:[(0,e.jsx)(h.bq,{className:"w-[120px]",children:(0,e.jsx)(h.yv,{placeholder:"Select year"})}),(0,e.jsx)(h.gC,{children:t.map(a=>(0,e.jsx)(h.eb,{value:a,children:a},a))})]})]})]})]}),b&&(0,e.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,e.jsx)(p.aHM,{className:"h-8 w-8 animate-spin text-primary"}),(0,e.jsx)("span",{className:"ml-2 text-lg",children:"Loading financial data..."})]}),!b&&(!a.profitAnalytics.vehicleProfits||0===a.profitAnalytics.vehicleProfits.length)&&(0,e.jsxs)(q.Fc,{variant:"destructive",children:[(0,e.jsx)(p.RIJ,{className:"h-4 w-4"}),(0,e.jsx)(q.XL,{children:"No data available"}),(0,e.jsx)(q.TN,{children:"There is no financial data available for the selected year. Please try selecting a different year or add some data."})]}),!b&&a.profitAnalytics.vehicleProfits&&a.profitAnalytics.vehicleProfits.length>0&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(j.d,{data:a,selectedYear:c}),(0,e.jsxs)(g.tU,{value:r,onValueChange:a=>{s(a)},className:"space-y-4",children:[(0,e.jsxs)(g.j7,{children:[(0,e.jsx)(g.Xi,{value:"overview",children:"Overview"}),(0,e.jsx)(g.Xi,{value:"vehicles",children:"Vehicle Profit"}),(0,e.jsx)(g.Xi,{value:"categories",children:"Cost Categories"}),(0,e.jsx)(g.Xi,{value:"details",children:"Detailed Records"}),u&&(0,e.jsx)(g.Xi,{value:"comparison",children:"Year Comparison"})]}),(0,e.jsx)(g.av,{value:"overview",children:(0,e.jsx)(k.c,{data:a})}),(0,e.jsx)(g.av,{value:"vehicles",children:(0,e.jsx)(l.C,{data:a})}),(0,e.jsx)(g.av,{value:"categories",children:(0,e.jsx)(o.U,{maintenanceCategories:a.costAnalytics.maintenanceCategories,fuelTypes:a.costAnalytics.fuelTypes})}),(0,e.jsx)(g.av,{value:"details",children:(0,e.jsx)(m.q,{vehicleCosts:a.costAnalytics.vehicleCosts})}),u&&(0,e.jsx)(g.av,{value:"comparison",children:(0,e.jsx)(n.T,{comparisonData:a.costAnalytics.yearComparison})})]})]})]})};d()}catch(a){d(a)}})},19640:a=>{a.exports=import("@radix-ui/react-tabs")},26703:a=>{a.exports=require("lodash/sortBy")},28395:a=>{a.exports=require("lodash/range")},28462:a=>{a.exports=import("@tanstack/react-query")},28648:a=>{a.exports=require("lodash/max")},33873:a=>{a.exports=require("path")},35503:a=>{a.exports=require("recharts-scale")},37503:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.r(b),c.d(b,{config:()=>r,default:()=>n,getServerSideProps:()=>q,getStaticPaths:()=>p,getStaticProps:()=>o,handler:()=>z,reportWebVitals:()=>s,routeModule:()=>y,unstable_getServerProps:()=>w,unstable_getServerSideProps:()=>x,unstable_getStaticParams:()=>v,unstable_getStaticPaths:()=>u,unstable_getStaticProps:()=>t});var e=c(63885),f=c(80237),g=c(81413),h=c(65611),i=c.n(h),j=c(74780),k=c(18785),l=c(12289),m=a([j,k]);[j,k]=m.then?(await m)():m;let n=(0,g.M)(k,"default"),o=(0,g.M)(k,"getStaticProps"),p=(0,g.M)(k,"getStaticPaths"),q=(0,g.M)(k,"getServerSideProps"),r=(0,g.M)(k,"config"),s=(0,g.M)(k,"reportWebVitals"),t=(0,g.M)(k,"unstable_getStaticProps"),u=(0,g.M)(k,"unstable_getStaticPaths"),v=(0,g.M)(k,"unstable_getStaticParams"),w=(0,g.M)(k,"unstable_getServerProps"),x=(0,g.M)(k,"unstable_getServerSideProps"),y=new e.PagesRouteModule({definition:{kind:f.RouteKind.PAGES,page:"/CombinedAnalytics",pathname:"/CombinedAnalytics",bundlePath:"",filename:""},distDir:".next-fleet",relativeProjectDir:"",components:{App:j.default,Document:i()},userland:k}),z=(0,l.U)({srcPage:"/CombinedAnalytics",config:r,userland:k,routeModule:y,getStaticPaths:p,getStaticProps:o,getServerSideProps:q});d()}catch(a){d(a)}})},39315:a=>{a.exports=require("lodash/isNaN")},39988:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{C:()=>k});var e=c(8732),f=c(39655),g=c(48383),h=c(94142),i=c(90029),j=a([f,g,h]);function k({data:a}){let b=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(a),c=a.profitAnalytics.vehicleProfits.slice(0,5).map(a=>({name:a.vehicle_name.split(" ")[0]+" "+a.vehicle_name.split(" ")[1],revenue:a.revenue,costs:a.costs,profit:a.profit}));return(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsxs)(f.Zp,{children:[(0,e.jsxs)(f.aR,{children:[(0,e.jsx)(f.ZB,{children:"Vehicle Profit Analysis"}),(0,e.jsx)(f.BT,{children:"Revenue, costs, and profit by vehicle (top 5)"})]}),(0,e.jsx)(f.Wu,{className:"h-[400px]",children:(0,e.jsx)(i.uf,{width:"100%",height:"100%",children:(0,e.jsxs)(i.Es,{data:c,margin:{top:20,right:30,left:20,bottom:5},children:[(0,e.jsx)(i.WX,{dataKey:"name"}),(0,e.jsx)(i.h8,{}),(0,e.jsx)(i.m_,{formatter:a=>[b(a),""],contentStyle:{backgroundColor:"hsl(var(--background))",borderColor:"hsl(var(--border))",borderRadius:"6px"}}),(0,e.jsx)(i.s$,{}),(0,e.jsx)(i.yP,{name:"Revenue",dataKey:"revenue",fill:"#22c55e"}),(0,e.jsx)(i.yP,{name:"Costs",dataKey:"costs",fill:"#ef4444"}),(0,e.jsx)(i.yP,{name:"Profit",dataKey:"profit",fill:"#3b82f6"})]})})})]}),(0,e.jsxs)(f.Zp,{children:[(0,e.jsxs)(f.aR,{children:[(0,e.jsx)(f.ZB,{children:"Vehicle Financial Details"}),(0,e.jsx)(f.BT,{children:"Detailed breakdown by vehicle"})]}),(0,e.jsx)(f.Wu,{children:(0,e.jsx)(h.F,{className:"h-[300px]",children:(0,e.jsxs)(g.XI,{children:[(0,e.jsx)(g.A0,{children:(0,e.jsxs)(g.Hj,{children:[(0,e.jsx)(g.nd,{children:"Vehicle"}),(0,e.jsx)(g.nd,{children:"Revenue"}),(0,e.jsx)(g.nd,{children:"Costs"}),(0,e.jsx)(g.nd,{children:"Profit"}),(0,e.jsx)(g.nd,{children:"Margin"})]})}),(0,e.jsx)(g.BF,{children:a.profitAnalytics.vehicleProfits.map((a,c)=>(0,e.jsxs)(g.Hj,{children:[(0,e.jsx)(g.nA,{children:a.vehicle_name}),(0,e.jsx)(g.nA,{children:b(a.revenue)}),(0,e.jsx)(g.nA,{children:b(a.costs)}),(0,e.jsx)(g.nA,{className:a.profit>=0?"text-green-600":"text-red-600",children:b(a.profit)}),(0,e.jsx)(g.nA,{children:a.revenue>0?(a.profit/a.revenue*100).toFixed(1)+"%":"N/A"})]},c))})]})})})]})]})}[f,g,h]=j.then?(await j)():j,d()}catch(a){d(a)}})},40361:a=>{a.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},41415:a=>{a.exports=import("sonner")},44184:a=>{a.exports=require("lodash/sumBy")},45876:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{S:()=>k});var e=c(82015),f=c(15449),g=c(92077),h=c(17535),i=c(70753),j=a([f,g,h]);function k(){let[a,b]=(0,e.useState)(new Date().getFullYear().toString()),[c,d]=(0,e.useState)("overview"),{maintenanceData:j,fuelData:k,sparePartsData:l,comparisonMaintenanceData:m,comparisonFuelData:n,comparisonSparePartsData:o,isLoading:p,yearOptions:q,comparisonYear:r,setComparisonYear:s}=(0,f.j)(a),{tripsData:t,isLoadingTrips:u}=(0,g.H)(),{leaseInvoices:v,isLoading:w}=(0,h.S)(),x=t?.filter(b=>!!b.date&&new Date(b.date).getFullYear().toString()===a)||[],y=v?.filter(b=>!!b.billing_period_start&&new Date(b.billing_period_start).getFullYear().toString()===a)||[];return{combinedData:(0,i.H)(x,j,k,l||[],m,n,o||[],a,r,y),isLoading:p||u||w,selectedYear:a,setSelectedYear:b,activeTab:c,setActiveTab:d,yearOptions:q,comparisonYear:r,setComparisonYear:s}}[f,g,h]=j.then?(await j)():j,d()}catch(a){d(a)}})},46060:a=>{a.exports=require("next/dist/shared/lib/no-fallback-error.external.js")},47860:a=>{a.exports=import("@radix-ui/react-select")},48303:a=>{a.exports=import("@radix-ui/react-tooltip")},49673:a=>{a.exports=require("lodash/flatMap")},50802:a=>{a.exports=import("clsx")},51999:a=>{a.exports=require("lodash/isString")},57312:a=>{a.exports=import("next-themes")},58894:(a,b,c)=>{function d(a){return a&&"object"==typeof a&&"error"in a&&!0===a.error}function e(a){return Array.isArray(a)?a.filter(a=>!d(a)):[]}function f(a){return d(a)?null:a}c.d(b,{to:()=>f,wH:()=>e})},60133:a=>{a.exports=require("lodash/find")},60601:a=>{a.exports=require("lodash/isObject")},62546:a=>{a.exports=require("victory-vendor/d3-scale")},64813:a=>{a.exports=require("lodash/isPlainObject")},66770:a=>{a.exports=require("lodash/throttle")},67676:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{c:()=>i});var e=c(8732),f=c(39655),g=c(90029),h=a([f]);function i({data:a}){let b=a=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(a),c=a.costAnalytics.monthlyData.map((b,c)=>{let d=c<a.revenueAnalytics.monthlyData.length?a.revenueAnalytics.monthlyData[c].revenue:0;return{month:b.month,costs:b.total,revenue:d,profit:d-b.total}});return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(f.Zp,{children:[(0,e.jsxs)(f.aR,{children:[(0,e.jsx)(f.ZB,{children:"Monthly Financial Overview"}),(0,e.jsx)(f.BT,{children:"Revenue, costs, and profit by month"})]}),(0,e.jsx)(f.Wu,{className:"h-[400px]",children:(0,e.jsx)(g.uf,{width:"100%",height:"100%",children:(0,e.jsxs)(g.Es,{data:c,margin:{top:20,right:30,left:20,bottom:5},children:[(0,e.jsx)(g.WX,{dataKey:"month"}),(0,e.jsx)(g.h8,{}),(0,e.jsx)(g.m_,{formatter:a=>[b(a),""],contentStyle:{backgroundColor:"hsl(var(--background))",borderColor:"hsl(var(--border))",borderRadius:"6px"}}),(0,e.jsx)(g.s$,{}),(0,e.jsx)(g.yP,{name:"Revenue",dataKey:"revenue",fill:"#22c55e"}),(0,e.jsx)(g.yP,{name:"Costs",dataKey:"costs",fill:"#ef4444"}),(0,e.jsx)(g.yP,{name:"Profit",dataKey:"profit",fill:"#3b82f6"})]})})})]}),(0,e.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[(0,e.jsxs)(f.Zp,{children:[(0,e.jsxs)(f.aR,{children:[(0,e.jsx)(f.ZB,{children:"Profit Trend"}),(0,e.jsx)(f.BT,{children:"Monthly profit performance"})]}),(0,e.jsx)(f.Wu,{className:"h-[300px]",children:(0,e.jsx)(g.uf,{width:"100%",height:"100%",children:(0,e.jsxs)(g.bl,{data:c,margin:{top:20,right:30,left:20,bottom:5},children:[(0,e.jsx)(g.WX,{dataKey:"month"}),(0,e.jsx)(g.h8,{}),(0,e.jsx)(g.m_,{formatter:a=>[b(a),"Profit"],contentStyle:{backgroundColor:"hsl(var(--background))",borderColor:"hsl(var(--border))",borderRadius:"6px"}}),(0,e.jsx)(g.N1,{type:"monotone",dataKey:"profit",stroke:"#3b82f6",strokeWidth:2,dot:{r:4},activeDot:{r:6}})]})})})]}),(0,e.jsxs)(f.Zp,{children:[(0,e.jsxs)(f.aR,{children:[(0,e.jsx)(f.ZB,{children:"Revenue vs. Expenses"}),(0,e.jsx)(f.BT,{children:"Monthly comparison"})]}),(0,e.jsx)(f.Wu,{className:"h-[300px]",children:(0,e.jsx)(g.uf,{width:"100%",height:"100%",children:(0,e.jsxs)(g.bl,{data:c,margin:{top:20,right:30,left:20,bottom:5},children:[(0,e.jsx)(g.WX,{dataKey:"month"}),(0,e.jsx)(g.h8,{}),(0,e.jsx)(g.m_,{formatter:a=>[b(a),""],contentStyle:{backgroundColor:"hsl(var(--background))",borderColor:"hsl(var(--border))",borderRadius:"6px"}}),(0,e.jsx)(g.s$,{}),(0,e.jsx)(g.N1,{type:"monotone",dataKey:"revenue",stroke:"#22c55e",strokeWidth:2,dot:{r:4},activeDot:{r:6}}),(0,e.jsx)(g.N1,{type:"monotone",dataKey:"costs",stroke:"#ef4444",strokeWidth:2,dot:{r:4},activeDot:{r:6}})]})})})]})]})]})}f=(h.then?(await h)():h)[0],d()}catch(a){d(a)}})},69826:a=>{a.exports=require("lodash/memoize")},70753:(a,b,c)=>{c.d(b,{H:()=>j});var d=c(71277),e=c(97203),f=c(5146),g=c(22779),h=c(45075),i=c(55686);function j(a=[],b=[],c=[],k=[],l=[],m=[],n=[],o,p,q=[]){let r=(0,e.J)(b,c,k),s=(0,f.O)(b,c,k),t=(0,g.H)(b,c,k),u=(0,h.o)(b),v=(0,h.Y)(c),w=(0,i.l)(b,c,k,l,m,n,o,p),x=(0,d.a)(a,b,c,k,[],q),y=x.totalRevenue-r.total,z=x.totalRevenue>0?y/x.totalRevenue*100:0,A=s.map((a,b)=>{let c=b<x.monthlyData.length?x.monthlyData[b].revenue:0;return{month:a.month,profit:c-a.total}}),B=function(a,b){let c={};return b.forEach(a=>{a.vehicle_id&&(c[a.vehicle_id]||(c[a.vehicle_id]=0),c[a.vehicle_id]+=Number(a.amount||0))}),a.map(a=>{let b=c[a.vehicle_id]||0,d=b-a.total;return{vehicle_id:a.vehicle_id,vehicle_name:a.vehicle_name,revenue:b,costs:a.total,profit:d}}).sort((a,b)=>b.profit-a.profit)}(t,a);return{costAnalytics:{summaryCosts:r,monthlyData:s,vehicleCosts:t,maintenanceCategories:u,fuelTypes:v,yearComparison:w},revenueAnalytics:x,profitAnalytics:{totalProfit:y,profitMargin:z,monthlyProfit:A,vehicleProfits:B}}}},71247:a=>{a.exports=require("lodash/isNumber")},74956:a=>{a.exports=require("clsx")},75979:a=>{a.exports=import("tailwind-merge")},78894:a=>{a.exports=require("lodash/isEqual")},82015:a=>{a.exports=require("react")},84106:a=>{a.exports=require("lodash/get")},85106:a=>{a.exports=require("lodash/min")},88058:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{q:()=>k});var e=c(8732),f=c(39655),g=c(68953),h=c(48383),i=c(74952),j=a([f,g,h]);[f,g,h]=j.then?(await j)():j;let k=({vehicleCosts:a})=>{let b=[...a].sort((a,b)=>b.maintenance-a.maintenance),c=[...a].sort((a,b)=>b.fuel-a.fuel);return(0,e.jsxs)(g.av,{value:"details",className:"space-y-6",children:[(0,e.jsxs)(f.Zp,{children:[(0,e.jsxs)(f.aR,{children:[(0,e.jsx)(f.ZB,{children:"Vehicle Cost Details"}),(0,e.jsx)(f.BT,{children:"Detailed breakdown of costs per vehicle"})]}),(0,e.jsx)(f.Wu,{children:(0,e.jsx)("div",{className:"space-y-8",children:a.map(b=>(0,e.jsxs)("div",{className:"space-y-2",children:[(0,e.jsxs)("div",{className:"flex justify-between items-center",children:[(0,e.jsx)("h3",{className:"font-medium",children:b.vehicle_name}),(0,e.jsxs)("div",{className:"font-bold",children:["$",b.total.toFixed(2)]})]}),(0,e.jsx)("div",{className:"w-full h-2 bg-secondary rounded-full overflow-hidden",children:(0,e.jsx)("div",{className:"h-full bg-primary",style:{width:`${100*(b.total/a[0]?.total||1)}%`}})}),(0,e.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,e.jsxs)("div",{className:"text-muted-foreground",children:["Maintenance: ",(0,e.jsxs)("span",{className:"font-medium text-foreground",children:["$",b.maintenance.toFixed(2)]})]}),(0,e.jsxs)("div",{className:"text-muted-foreground",children:["Fuel: ",(0,e.jsxs)("span",{className:"font-medium text-foreground",children:["$",b.fuel.toFixed(2)]})]})]})]},b.vehicle_id))})})]}),(0,e.jsxs)(f.Zp,{children:[(0,e.jsxs)(f.aR,{className:"pb-2",children:[(0,e.jsxs)(f.ZB,{className:"flex items-center",children:[(0,e.jsx)(i.IFY,{className:"mr-2 h-5 w-5 text-blue-500"}),"Maintenance Cost Ranking"]}),(0,e.jsx)(f.BT,{children:"Vehicles ranked by maintenance cost (highest to lowest)"})]}),(0,e.jsx)(f.Wu,{children:b.length>0?(0,e.jsxs)(h.XI,{children:[(0,e.jsx)(h.A0,{children:(0,e.jsxs)(h.Hj,{children:[(0,e.jsx)(h.nd,{children:"Rank"}),(0,e.jsx)(h.nd,{children:"Vehicle"}),(0,e.jsx)(h.nd,{children:"Maintenance Cost"}),(0,e.jsx)(h.nd,{children:"% of Fleet Total"})]})}),(0,e.jsx)(h.BF,{children:b.map((b,c)=>{let d=a.reduce((a,b)=>a+b.maintenance,0),f=d>0?b.maintenance/d*100:0;return(0,e.jsxs)(h.Hj,{className:0===c?"bg-yellow-50 dark:bg-yellow-950/20":"",children:[(0,e.jsx)(h.nA,{className:"font-medium",children:c+1}),(0,e.jsx)(h.nA,{children:b.vehicle_name}),(0,e.jsxs)(h.nA,{children:["$",b.maintenance.toFixed(2)]}),(0,e.jsxs)(h.nA,{children:[f.toFixed(1),"%"]})]},b.vehicle_id)})})]}):(0,e.jsxs)("div",{className:"flex items-center justify-center p-4 text-muted-foreground",children:[(0,e.jsx)(i.RIJ,{className:"mr-2 h-4 w-4"}),"No maintenance data available"]})})]}),(0,e.jsxs)(f.Zp,{children:[(0,e.jsxs)(f.aR,{className:"pb-2",children:[(0,e.jsxs)(f.ZB,{className:"flex items-center",children:[(0,e.jsx)(i.XHo,{className:"mr-2 h-5 w-5 text-amber-500"}),"Fuel Consumption Ranking"]}),(0,e.jsx)(f.BT,{children:"Vehicles ranked by fuel cost (highest to lowest)"})]}),(0,e.jsx)(f.Wu,{children:c.length>0?(0,e.jsxs)(h.XI,{children:[(0,e.jsx)(h.A0,{children:(0,e.jsxs)(h.Hj,{children:[(0,e.jsx)(h.nd,{children:"Rank"}),(0,e.jsx)(h.nd,{children:"Vehicle"}),(0,e.jsx)(h.nd,{children:"Fuel Cost"}),(0,e.jsx)(h.nd,{children:"% of Fleet Total"})]})}),(0,e.jsx)(h.BF,{children:c.map((b,c)=>{let d=a.reduce((a,b)=>a+b.fuel,0),f=d>0?b.fuel/d*100:0;return(0,e.jsxs)(h.Hj,{className:0===c?"bg-yellow-50 dark:bg-yellow-950/20":"",children:[(0,e.jsx)(h.nA,{className:"font-medium",children:c+1}),(0,e.jsx)(h.nA,{children:b.vehicle_name}),(0,e.jsxs)(h.nA,{children:["$",b.fuel.toFixed(2)]}),(0,e.jsxs)(h.nA,{children:[f.toFixed(1),"%"]})]},b.vehicle_id)})})]}):(0,e.jsxs)("div",{className:"flex items-center justify-center p-4 text-muted-foreground",children:[(0,e.jsx)(i.RIJ,{className:"mr-2 h-4 w-4"}),"No fuel data available"]})})]})]})};d()}catch(a){d(a)}})},89947:a=>{a.exports=require("lodash/omit")},90030:a=>{a.exports=require("lodash/some")},90599:a=>{a.exports=require("lodash/minBy")},90882:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{U:()=>k});var e=c(8732),f=c(39655),g=c(68953),h=c(90029),i=c(38807),j=a([f,g]);[f,g]=j.then?(await j)():j;let k=({maintenanceCategories:a,fuelTypes:b})=>(0,e.jsx)(g.av,{value:"categories",className:"space-y-4",children:(0,e.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,e.jsxs)(f.Zp,{children:[(0,e.jsxs)(f.aR,{children:[(0,e.jsx)(f.ZB,{children:"Maintenance Categories"}),(0,e.jsx)(f.BT,{children:"Cost breakdown by maintenance type"})]}),(0,e.jsx)(f.Wu,{className:"h-[400px] w-full",children:(0,e.jsx)(h.uf,{width:"100%",height:"100%",children:(0,e.jsxs)(h.rW,{children:[(0,e.jsx)(h.Fq,{data:a,cx:"50%",cy:"50%",labelLine:!0,label:({name:a,percent:b})=>`${a}: ${(100*b).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:a.map((a,b)=>(0,e.jsx)(h.fh,{fill:i.l[b%i.l.length]},`cell-${b}`))}),(0,e.jsx)(h.m_,{formatter:a=>[`$${a.toFixed(2)}`,void 0],contentStyle:{backgroundColor:"hsl(var(--background))",borderColor:"hsl(var(--border))",borderRadius:"6px",fontSize:"0.875rem"}})]})})})]}),(0,e.jsxs)(f.Zp,{children:[(0,e.jsxs)(f.aR,{children:[(0,e.jsx)(f.ZB,{children:"Fuel Type Distribution"}),(0,e.jsx)(f.BT,{children:"Cost breakdown by fuel type"})]}),(0,e.jsx)(f.Wu,{className:"h-[400px] w-full",children:(0,e.jsx)(h.uf,{width:"100%",height:"100%",children:(0,e.jsxs)(h.rW,{children:[(0,e.jsx)(h.Fq,{data:b,cx:"50%",cy:"50%",labelLine:!0,label:({name:a,percent:b})=>`${a}: ${(100*b).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:b.map((a,b)=>(0,e.jsx)(h.fh,{fill:i.l[b%i.l.length]},`cell-${b}`))}),(0,e.jsx)(h.m_,{formatter:a=>[`$${a.toFixed(2)}`,void 0],contentStyle:{backgroundColor:"hsl(var(--background))",borderColor:"hsl(var(--border))",borderRadius:"6px",fontSize:"0.875rem"}})]})})})]})]})});d()}catch(a){d(a)}})},91651:a=>{a.exports=require("tiny-invariant")},92077:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{H:()=>i});var e=c(28462),f=c(95965),g=c(58894),h=a([e]);function i(){let{data:a,isLoading:b}=(0,e.useQuery)({queryKey:["vehicles"],queryFn:async()=>{let{data:a,error:b}=await f.N.from("vehicles").select("*").order("created_at",{ascending:!1});if(b)throw b;return a}}),{data:c,isLoading:d}=(0,e.useQuery)({queryKey:["fuel-logs"],queryFn:async()=>{let{data:a,error:b}=await f.N.from("fuel_logs").select("*, vehicles!fuel_logs_vehicle_id_fkey(make, model, registration)").order("date",{ascending:!1});if(b)throw b;return a}}),{data:h,isLoading:i}=(0,e.useQuery)({queryKey:["maintenance"],queryFn:async()=>{let{data:a,error:b}=await f.N.from("maintenance").select("*, vehicles!maintenance_vehicle_id_fkey(make, model, registration)").order("date",{ascending:!1});if(b)throw b;return a}}),{data:j,isLoading:k}=(0,e.useQuery)({queryKey:["trips"],queryFn:async()=>{let{data:a,error:b}=await f.N.from("trips").select("*, vehicles!trips_vehicle_id_fkey(make, model, registration), drivers!trips_driver_id_fkey(name), clients!trips_client_id_fkey(name)").order("date",{ascending:!1});if(b)throw b;return a}}),{data:l,isLoading:m}=(0,e.useQuery)({queryKey:["drivers"],queryFn:async()=>{let{data:a,error:b}=await f.N.from("drivers").select("*").order("created_at",{ascending:!1});if(b)throw b;return a}}),{data:n,isLoading:o}=(0,e.useQuery)({queryKey:["spare-parts"],queryFn:async()=>{let{data:b,error:c}=await f.N.from("spare_parts").select("*").order("created_at",{ascending:!1});if(c)throw c;let{data:d,error:e}=await f.N.from("maintenance").select("id, description, vehicle_id, vehicles!maintenance_vehicle_id_fkey(make, model, registration)");if(e)throw e;let h={};d&&Array.isArray(d)&&d.forEach(a=>{a&&a.id&&(h[a.id]=a)});let i={};return a&&Array.isArray(a)&&a.forEach(a=>{a&&a.id&&(i[a.id]=a)}),(0,g.wH)(b).map(a=>{let b=null;if(a.vehicle_id&&i[a.vehicle_id])b={make:i[a.vehicle_id].make,model:i[a.vehicle_id].model,registration:i[a.vehicle_id].registration};else if(a.maintenance_id&&h[a.maintenance_id]){let c=h[a.maintenance_id];c.vehicles&&(b=c.vehicles)}return{...a,vehicles:b}})}});return{vehicles:a||[],fuelData:c||[],maintenanceData:h||[],tripsData:j||[],driversData:l||[],sparePartsData:n||[],isLoadingVehicles:b,isLoadingFuel:d,isLoadingMaintenance:i,isLoadingTrips:k,isLoadingDrivers:m,isLoadingSpareparts:o}}e=(h.then?(await h)():h)[0],d()}catch(a){d(a)}})},92654:a=>{a.exports=require("lodash/last")},93939:a=>{a.exports=require("@supabase/supabase-js")},94142:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{F:()=>j});var e=c(8732),f=c(82015),g=c(14505),h=c(87092),i=a([g,h]);[g,h]=i.then?(await i)():i;let j=f.forwardRef(({className:a,children:b,...c},d)=>(0,e.jsxs)(g.Root,{ref:d,className:(0,h.cn)("relative overflow-hidden",a),...c,children:[(0,e.jsx)(g.Viewport,{className:"h-full w-full rounded-[inherit]",children:b}),(0,e.jsx)(k,{}),(0,e.jsx)(g.Corner,{})]}));j.displayName=g.Root.displayName;let k=f.forwardRef(({className:a,orientation:b="vertical",...c},d)=>(0,e.jsx)(g.ScrollAreaScrollbar,{ref:d,orientation:b,className:(0,h.cn)("flex touch-none select-none transition-colors","vertical"===b&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===b&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...c,children:(0,e.jsx)(g.ScrollAreaThumb,{className:"relative flex-1 rounded-full bg-border"})}));k.displayName=g.ScrollAreaScrollbar.displayName,d()}catch(a){d(a)}})},95009:a=>{a.exports=require("lodash/isNil")},96186:a=>{a.exports=require("lodash/uniqBy")}};var b=require("../webpack-runtime.js");b.C(a);var c=b.X(0,[4952,5611,5781,1913,2410,4780,8747,5255],()=>b(b.s=37503));module.exports=c})();