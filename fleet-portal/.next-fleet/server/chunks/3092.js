"use strict";exports.id=3092,exports.ids=[3092],exports.modules={16904:(a,b,c)=>{c.d(b,{s:()=>f});var d=c(8732),e=c(90029);function f({trips:a}){let b=Object.entries(a.reduce((a,b)=>{let c=b.client_name||"Unknown Client";return a[c]=(a[c]||0)+1,a},{})).map(([a,b])=>({name:a,trips:b})).sort((a,b)=>b.trips-a.trips).slice(0,10);return(0,d.jsx)("div",{className:"w-full h-[300px]",children:b.length>0?(0,d.jsx)(e.uf,{width:"100%",height:"100%",children:(0,d.jsxs)(e.Es,{data:b,margin:{top:5,right:30,left:20,bottom:5},children:[(0,d.jsx)(e.WX,{dataKey:"name",angle:-45,textAnchor:"end",height:100,interval:0}),(0,d.jsx)(e.h8,{}),(0,d.jsx)(e.m_,{}),(0,d.jsx)(e.s$,{}),(0,d.jsx)(e.yP,{dataKey:"trips",fill:"#8884d8",name:"Number of Trips"})]})}):(0,d.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,d.jsx)("p",{className:"text-muted-foreground",children:"No client data available"})})})}},30046:(a,b,c)=>{c.d(b,{i:()=>e});var d=c(21638);function e(a,b){let c=(0,d.a)(a.start),e=(0,d.a)(a.end),f=+c>+e,g=f?+c:+e,h=f?e:c;h.setHours(0,0,0,0),h.setDate(1);let i=b?.step??1;if(!i)return[];i<0&&(i=-i,f=!f);let j=[];for(;+h<=g;)j.push((0,d.a)(h)),h.setMonth(h.getMonth()+i);return f?j.reverse():j}},39655:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{BT:()=>l,Wu:()=>m,ZB:()=>k,Zp:()=>i,aR:()=>j,wL:()=>n});var e=c(8732),f=c(82015),g=c(87092),h=a([g]);g=(h.then?(await h)():h)[0];let i=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("div",{ref:c,className:(0,g.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...b}));i.displayName="Card";let j=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("div",{ref:c,className:(0,g.cn)("flex flex-col space-y-1.5 p-6",a),...b}));j.displayName="CardHeader";let k=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("h3",{ref:c,className:(0,g.cn)("text-2xl font-semibold leading-none tracking-tight",a),...b}));k.displayName="CardTitle";let l=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("p",{ref:c,className:(0,g.cn)("text-sm text-muted-foreground",a),...b}));l.displayName="CardDescription";let m=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("div",{ref:c,className:(0,g.cn)("p-6 pt-0",a),...b}));m.displayName="CardContent";let n=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)("div",{ref:c,className:(0,g.cn)("flex items-center p-6 pt-0",a),...b}));n.displayName="CardFooter",d()}catch(a){d(a)}})},39751:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{r:()=>o});var e=c(8732),f=c(90029),g=c(81575),h=c(30046),i=c(8218),j=c(10493),k=c(71913),l=c(72945),m=c(68953),n=a([m]);function o({trips:a}){let b=a.map(a=>(0,g.H)(a.date)),c=new Date(Math.min(...b.map(a=>a.getTime()))),d=new Date(Math.max(...b.map(a=>a.getTime()))),n=(0,h.i)({start:(0,i.w)(c),end:(0,j.p)(d)}).map(b=>{let c=(0,j.p)(b),d=(0,k.GP)(b,"MMM yyyy"),e=a.filter(a=>{let d=(0,g.H)(a.date);return(0,l.v)(d,{start:b,end:c})}),f=e.reduce((a,b)=>a+(b.amount||0),0);return{month:d,trips:e.length,revenue:f}});return(0,e.jsx)("div",{className:"w-full",children:(0,e.jsxs)(m.tU,{defaultValue:"volume",children:[(0,e.jsxs)(m.j7,{className:"mb-4",children:[(0,e.jsx)(m.Xi,{value:"volume",children:"Trip Volume"}),(0,e.jsx)(m.Xi,{value:"revenue",children:"Trip Revenue"})]}),(0,e.jsx)(m.av,{value:"volume",className:"h-[350px]",children:(0,e.jsx)(f.uf,{width:"100%",height:"100%",children:(0,e.jsxs)(f.bl,{data:n,margin:{top:5,right:30,left:20,bottom:5},children:[(0,e.jsx)(f.WX,{dataKey:"month"}),(0,e.jsx)(f.h8,{}),(0,e.jsx)(f.m_,{formatter:a=>[`${a} trips`,"Count"]}),(0,e.jsx)(f.s$,{}),(0,e.jsx)(f.N1,{type:"monotone",dataKey:"trips",stroke:"#8884d8",activeDot:{r:8},name:"Trip Count"})]})})}),(0,e.jsx)(m.av,{value:"revenue",className:"h-[350px]",children:(0,e.jsx)(f.uf,{width:"100%",height:"100%",children:(0,e.jsxs)(f.Es,{data:n,margin:{top:5,right:30,left:20,bottom:5},children:[(0,e.jsx)(f.WX,{dataKey:"month"}),(0,e.jsx)(f.h8,{}),(0,e.jsx)(f.m_,{formatter:a=>[`$${a.toLocaleString()}`,"Revenue"]}),(0,e.jsx)(f.s$,{}),(0,e.jsx)(f.yP,{dataKey:"revenue",fill:"#82ca9d",name:"Revenue"})]})})})]})})}m=(n.then?(await n)():n)[0],d()}catch(a){d(a)}})},59176:(a,b,c)=>{function d(a){var b;let{clients:c,vehicles:d,drivers:e,...f}=a,g=c?.name||"Unknown Client",h=c?.type,i=d?`${d.make} ${d.model} (${d.registration})`:"No Vehicle",j=e?.name||"No Driver",k=e?.avatar_url,l=e?.contact,m=["scheduled","in_progress","completed","cancelled"].includes(b=f.status||"scheduled")?b:"scheduled",n=f.service_type||"Other Service";return{...f,status:m,client_name:g,client_type:h,vehicle_details:i,driver_name:j,driver_avatar:k,driver_contact:l,display_type:n,type:f.service_type||"one_way_transfer",special_notes:f.notes,passengers:f.passengers||[],has_security_escort:f.has_security_escort||!1,escort_count:f.escort_count||0,escort_vehicle_ids:f.escort_vehicle_ids||[],escort_status:f.escort_status||"not_assigned",escort_assigned_at:f.escort_assigned_at,stops:f.stops||[],soft_skin_count:f.soft_skin_count||0,armoured_count:f.armoured_count||0,assigned_vehicle_ids:f.assigned_vehicle_ids||[]}}function e(a){let b=(a.soft_skin_count||0)+(a.armoured_count||0),c=a.assigned_vehicle_ids?.length||0;return 0===c?{state:"none",totalNeeded:b,totalAssigned:c}:c<b?{state:"partial",totalNeeded:b,totalAssigned:c}:{state:"full",totalNeeded:b,totalAssigned:c}}c.d(b,{PW:()=>d,Uh:()=>e})},68953:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{Xi:()=>l,av:()=>m,j7:()=>k,tU:()=>j});var e=c(8732),f=c(82015),g=c(19640),h=c(87092),i=a([g,h]);[g,h]=i.then?(await i)():i;let j=g.Root,k=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.List,{ref:c,className:(0,h.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...b}));k.displayName=g.List.displayName;let l=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Trigger,{ref:c,className:(0,h.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...b}));l.displayName=g.Trigger.displayName;let m=f.forwardRef(({className:a,...b},c)=>(0,e.jsx)(g.Content,{ref:c,className:(0,h.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...b}));m.displayName=g.Content.displayName,d()}catch(a){d(a)}})},72945:(a,b,c)=>{c.d(b,{v:()=>e});var d=c(21638);function e(a,b){let c=+(0,d.a)(a),[e,f]=[+(0,d.a)(b.start),+(0,d.a)(b.end)].sort((a,b)=>a-b);return c>=e&&c<=f}},76331:(a,b,c)=>{c.a(a,async(a,d)=>{try{c.d(b,{B:()=>i});var e=c(8732),f=c(39655),g=c(90029),h=a([f]);function i({trips:a}){let b={};a.forEach(a=>{let c=a.driver_id||"",d=a.driver_name||"Unknown Driver";b[c]||(b[c]={trips:0,revenue:0,name:d}),b[c].trips+=1,b[c].revenue+=a.amount||0});let c=Object.entries(b).map(([a,b])=>({id:a,name:b.name,trips:b.trips,revenue:b.revenue})).sort((a,b)=>b.trips-a.trips).slice(0,10);return(0,e.jsxs)("div",{className:"space-y-6",children:[(0,e.jsxs)(f.Zp,{children:[(0,e.jsxs)(f.aR,{children:[(0,e.jsx)(f.ZB,{children:"Top Drivers by Trip Count"}),(0,e.jsx)(f.BT,{children:"Number of trips completed by each driver"})]}),(0,e.jsx)(f.Wu,{className:"h-[400px]",children:c.length>0?(0,e.jsx)(g.uf,{width:"100%",height:"100%",children:(0,e.jsxs)(g.Es,{data:c,layout:"vertical",margin:{top:5,right:30,left:100,bottom:5},children:[(0,e.jsx)(g.WX,{type:"number"}),(0,e.jsx)(g.h8,{dataKey:"name",type:"category"}),(0,e.jsx)(g.m_,{}),(0,e.jsx)(g.s$,{}),(0,e.jsx)(g.yP,{dataKey:"trips",fill:"#8884d8",name:"Trip Count"})]})}):(0,e.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,e.jsx)("p",{className:"text-muted-foreground",children:"No driver performance data available"})})})]}),(0,e.jsxs)(f.Zp,{children:[(0,e.jsxs)(f.aR,{children:[(0,e.jsx)(f.ZB,{children:"Top Drivers by Revenue"}),(0,e.jsx)(f.BT,{children:"Total revenue generated by each driver"})]}),(0,e.jsx)(f.Wu,{className:"h-[400px]",children:c.length>0?(0,e.jsx)(g.uf,{width:"100%",height:"100%",children:(0,e.jsxs)(g.Es,{data:c,layout:"vertical",margin:{top:5,right:30,left:100,bottom:5},children:[(0,e.jsx)(g.WX,{type:"number"}),(0,e.jsx)(g.h8,{dataKey:"name",type:"category"}),(0,e.jsx)(g.m_,{formatter:a=>[`$${a.toLocaleString()}`,"Revenue"]}),(0,e.jsx)(g.s$,{}),(0,e.jsx)(g.yP,{dataKey:"revenue",fill:"#82ca9d",name:"Revenue ($)"})]})}):(0,e.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,e.jsx)("p",{className:"text-muted-foreground",children:"No driver revenue data available"})})})]})]})}f=(h.then?(await h)():h)[0],d()}catch(a){d(a)}})},86342:(a,b,c)=>{c.d(b,{PW:()=>d.PW}),c(91202);var d=c(59176)},91202:(a,b,c)=>{c.d(b,{I:()=>d});let d={airport_pickup:"Airport Pickup",airport_dropoff:"Airport Dropoff",half_day:"Half Day",full_day:"Full Day",one_way_transfer:"One Way Transfer",round_trip:"Round Trip",security_escort:"Security Escort"}},91230:(a,b,c)=>{c.d(b,{s:()=>f});var d=c(8732),e=c(90029);function f({trips:a}){let b=Object.entries((Array.isArray(a)?a.filter(a=>a&&"object"==typeof a):[]).reduce((a,b)=>{try{let c="other";b.display_type&&"string"==typeof b.display_type?c=b.display_type:b.service_type&&"string"==typeof b.service_type?c=b.service_type:b.type&&"string"==typeof b.type&&(c=b.type);let d=String(c||"unknown");return a[d]=(a[d]||0)+1,a}catch(c){return console.error("Error processing trip for type counting:",c,b),a.unknown=(a.unknown||0)+1,a}},{})).map(([a,b])=>{try{return{name:function(a){if(!a)return"Unknown";let b=String(a);if(!b||"undefined"===b||"null"===b)return"Unknown";try{return b.replace(/_/g," ").split(" ").map(a=>a&&"string"==typeof a?a.charAt(0).toUpperCase()+a.slice(1):"").filter(a=>a.length>0).join(" ")||"Unknown"}catch(b){return console.error("Error formatting type name:",b,a),"Unknown"}}(a),trips:Number(b)||0}}catch(c){return console.error("Error formatting chart data:",c,a,b),{name:"Unknown",trips:0}}});return b.sort((a,b)=>(b.trips||0)-(a.trips||0)),(0,d.jsx)("div",{className:"w-full h-[300px]",children:b.length>0?(0,d.jsx)(e.uf,{width:"100%",height:"100%",children:(0,d.jsxs)(e.Es,{data:b,margin:{top:5,right:30,left:20,bottom:5},children:[(0,d.jsx)(e.WX,{dataKey:"name"}),(0,d.jsx)(e.h8,{}),(0,d.jsx)(e.m_,{}),(0,d.jsx)(e.s$,{}),(0,d.jsx)(e.yP,{dataKey:"trips",fill:"#8884d8",name:"Number of Trips"})]})}):(0,d.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,d.jsx)("p",{className:"text-muted-foreground",children:"No trip type data available"})})})}}};