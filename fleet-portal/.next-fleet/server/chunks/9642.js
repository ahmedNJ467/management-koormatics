exports.id=9642,exports.ids=[9642],exports.modules={3624:(a,b,c)=>{Promise.resolve().then(c.bind(c,31694))},10910:(a,b,c)=>{"use strict";c.d(b,{default:()=>C});var d=c(21124),e=c(38301),f=c(37448),g=c(76608),h=c(26691),i=c(47089),j=c(44943);let k=g.Kq,l=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(g.LM,{ref:c,className:(0,j.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",a),...b}));l.displayName=g.LM.displayName;let m=(0,h.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),n=e.forwardRef(({className:a,variant:b,...c},e)=>(0,d.jsx)(g.bL,{ref:e,className:(0,j.cn)(m({variant:b}),a),...c}));n.displayName=g.bL.displayName,e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(g.rc,{ref:c,className:(0,j.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",a),...b})).displayName=g.rc.displayName;let o=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(g.bm,{ref:c,className:(0,j.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",a),"toast-close":"",...b,children:(0,d.jsx)(i.A,{className:"h-4 w-4"})}));o.displayName=g.bm.displayName;let p=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(g.hE,{ref:c,className:(0,j.cn)("text-sm font-semibold",a),...b}));p.displayName=g.hE.displayName;let q=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(g.VY,{ref:c,className:(0,j.cn)("text-sm opacity-90",a),...b}));function r(){let{toasts:a}=(0,f.dj)();return(0,d.jsxs)(k,{children:[a.map(function({id:a,title:b,description:c,action:e,...f}){return(0,d.jsxs)(n,{...f,children:[(0,d.jsxs)("div",{className:"grid gap-1",children:[b&&(0,d.jsx)(p,{children:b}),c&&(0,d.jsx)(q,{children:c})]}),e,(0,d.jsx)(o,{})]},a)}),(0,d.jsx)(l,{})]})}q.displayName=g.VY.displayName;var s=c(45523),t=c(42830);let u=({...a})=>{let{theme:b="system"}=(0,s.D)();return(0,d.jsx)(t.l$,{theme:b,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...a})};var v=c(16992);let w=v.Kq;v.bL,v.l9,e.forwardRef(({className:a,sideOffset:b=4,...c},e)=>(0,d.jsx)(v.UC,{ref:e,sideOffset:b,className:(0,j.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...c})).displayName=v.UC.displayName;var x=c(60799),y=c(96610),z=c(25780),A=c(58249);class B{constructor(){this.queryClient=null}static getInstance(){return B.instance||(B.instance=new B),B.instance}setQueryClient(a){this.queryClient=a}async clearAllCaches(){if(this.queryClient)try{A.T.clearCache(),this.queryClient.clear(),console.log("All caches cleared successfully")}catch(a){console.error("Error clearing caches:",a)}}async invalidateAndRefetch(a){if(this.queryClient)try{await Promise.all(a.map(a=>this.queryClient.invalidateQueries({queryKey:a}))),await Promise.all(a.map(a=>this.queryClient.refetchQueries({queryKey:a}))),console.log("Queries invalidated and refetched:",a)}catch(a){console.error("Error invalidating queries:",a)}}async refreshAuthData(){await this.invalidateAndRefetch([["page_access"],["user_roles"],["user_profile"],["auth_session"]])}async refreshCoreData(){await this.invalidateAndRefetch([["trips"],["vehicles"],["drivers"],["clients"],["maintenance"],["fuel_logs"]])}setupAutoClearOnUnload(){}markRecentUpdates(){}forcePageRefresh(){}}function C({children:a}){let[b]=(0,e.useState)(()=>new x.E({defaultOptions:{queries:{staleTime:5e3,gcTime:3e5,retry:1,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchOnReconnect:!0,placeholderData:a=>a,retryOnMount:!0,retryDelay:1e3},mutations:{retry:1,retryDelay:1e3}}}));return(0,d.jsx)(y.Ht,{client:b,children:(0,d.jsx)(s.N,{attribute:"class",defaultTheme:"system",enableSystem:!0,disableTransitionOnChange:!0,storageKey:"koormatics-theme",children:(0,d.jsxs)(w,{children:[(0,d.jsx)("meta",{name:"x-next-build-id",content:"1.0.0"}),(0,d.jsx)(r,{}),(0,d.jsx)(u,{}),(0,d.jsx)(z.A,{children:a})]})})})}B.getInstance()},14772:(a,b,c)=>{"use strict";c.d(b,{handleAuthError:()=>h});var d=c(62007),e=c(58249);class f{static getInstance(){return f.instance||(f.instance=new f),f.instance}isRefreshTokenError(a){return!!a?.message&&["Invalid Refresh Token","Refresh Token Not Found","refresh_token_not_found","invalid_grant","Token has expired","JWT expired"].some(b=>a.message.includes(b))}async handleRefreshTokenError(a){if(!this.isHandling){this.isHandling=!0,console.warn("Handling refresh token error:",a.message);try{e.T.clearCache(),await this.clearAuthStorage(),await d.N.auth.signOut({scope:"local"})}catch(a){console.error("Error during auth cleanup:",a)}finally{this.isHandling=!1}}}async clearAuthStorage(){}async handleAuthError(a){this.isRefreshTokenError(a)?await this.handleRefreshTokenError(a):console.error("Authentication error:",a)}reset(){this.isHandling=!1}constructor(){this.isHandling=!1}}let g=f.getInstance();async function h(a){return g.handleAuthError(a)}},25780:(a,b,c)=>{"use strict";c.d(b,{A:()=>l});var d=c(21124),e=c(38301),f=c(35284),g=c(64772),h=c(16945);function i(){return null}class j extends e.Component{constructor(a){super(a),this.state={hasError:!1}}static getDerivedStateFromError(a){return console.error("React Error Boundary caught error:",a),{hasError:!0,error:a}}componentDidCatch(a,b){console.error("React Error Boundary componentDidCatch:",a,b),this.setState({hasError:!0,error:a,errorInfo:b})}render(){return this.state.hasError?(0,d.jsx)(k,{error:this.state.error,errorInfo:this.state.errorInfo}):this.props.children}}function k({error:a,errorInfo:b}){return(0,d.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:(0,d.jsxs)(g.Fc,{className:"max-w-md",children:[(0,d.jsx)(h.A,{className:"h-4 w-4"}),(0,d.jsx)(g.XL,{children:"Something went wrong"}),(0,d.jsxs)(g.TN,{className:"mt-2",children:[(0,d.jsx)("p",{className:"text-sm text-muted-foreground mb-4",children:"An unexpected error occurred. Please try refreshing the page or contact support if the problem persists."}),a&&(0,d.jsxs)("details",{className:"text-xs text-muted-foreground",children:[(0,d.jsx)("summary",{className:"cursor-pointer mb-2",children:"Error details"}),(0,d.jsx)("pre",{className:"bg-muted p-2 rounded overflow-auto",children:a.toString()})]}),(0,d.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,d.jsx)(f.$,{onClick:()=>window.location.reload(),variant:"default",size:"sm",children:"Refresh Page"}),(0,d.jsx)(f.$,{onClick:()=>window.location.reload(),variant:"outline",size:"sm",children:"Try Again"})]})]})]})})}function l({children:a}){let[b,c]=(0,e.useState)({hasError:!1});return b.hasError?(0,d.jsx)(k,{error:b.error,errorInfo:b.errorInfo}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(i,{}),(0,d.jsx)(j,{children:a})]})}},31694:(a,b,c)=>{"use strict";c.d(b,{default:()=>d});let d=(0,c(97954).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\medyy\\\\OneDrive\\\\Desktop\\\\management-koormatics\\\\fleet-portal\\\\src\\\\components\\\\ClientProviders.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\medyy\\OneDrive\\Desktop\\management-koormatics\\fleet-portal\\src\\components\\ClientProviders.tsx","default")},35284:(a,b,c)=>{"use strict";c.d(b,{$:()=>j,r:()=>i});var d=c(21124),e=c(38301),f=c(96425),g=c(26691),h=c(44943);let i=(0,g.F)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),j=e.forwardRef(({className:a,variant:b,size:c,asChild:e=!1,...g},j)=>{let k=e?f.DX:"button";return(0,d.jsx)(k,{className:(0,h.cn)(i({variant:b,size:c,className:a})),ref:j,...g})});j.displayName="Button"},37448:(a,b,c)=>{"use strict";c.d(b,{dj:()=>l});var d=c(38301);let e=0,f=new Map,g=a=>{if(f.has(a))return;let b=setTimeout(()=>{f.delete(a),j({type:"REMOVE_TOAST",toastId:a})},1e6);f.set(a,b)},h=[],i={toasts:[]};function j(a){i=((a,b)=>{switch(b.type){case"ADD_TOAST":return{...a,toasts:[b.toast,...a.toasts].slice(0,1)};case"UPDATE_TOAST":return{...a,toasts:a.toasts.map(a=>a.id===b.toast.id?{...a,...b.toast}:a)};case"DISMISS_TOAST":{let{toastId:c}=b;return c?g(c):a.toasts.forEach(a=>{g(a.id)}),{...a,toasts:a.toasts.map(a=>a.id===c||void 0===c?{...a,open:!1}:a)}}case"REMOVE_TOAST":if(void 0===b.toastId)return{...a,toasts:[]};return{...a,toasts:a.toasts.filter(a=>a.id!==b.toastId)}}})(i,a),h.forEach(a=>{a(i)})}function k({...a}){let b=(e=(e+1)%Number.MAX_SAFE_INTEGER).toString(),c=()=>j({type:"DISMISS_TOAST",toastId:b});return j({type:"ADD_TOAST",toast:{...a,id:b,open:!0,onOpenChange:a=>{a||c()}}}),{id:b,dismiss:c,update:a=>j({type:"UPDATE_TOAST",toast:{...a,id:b}})}}function l(){let[a,b]=d.useState(i);return d.useEffect(()=>(h.push(b),()=>{let a=h.indexOf(b);a>-1&&h.splice(a,1)}),[]),{...a,toast:k,dismiss:a=>j({type:"DISMISS_TOAST",toastId:a})}}},44943:(a,b,c)=>{"use strict";c.d(b,{cn:()=>f,r:()=>g});var d=c(43249),e=c(58829);function f(...a){return(0,e.QP)((0,d.$)(a))}function g(a){let b=parseInt(a.slice(0,3),16)%1e3;return`V${b.toString().padStart(3,"0")}`}},51472:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>i,metadata:()=>h});var d=c(75338),e=c(18039),f=c.n(e);c(61135);var g=c(31694);let h={title:"Fleet Portal - Koormatics",description:"Fleet management system for Koormatics",metadataBase:new URL(process.env.NEXT_PUBLIC_SITE_URL||"http://localhost:3000"),icons:{icon:"/images/Koormatics-logo.png",shortcut:"/images/Koormatics-logo.png",apple:"/images/Koormatics-logo.png"},openGraph:{title:"Fleet Portal - Koormatics",description:"Fleet management system for Koormatics",images:["/images/Koormatics-logo.png"]}};function i({children:a}){return(0,d.jsx)("html",{lang:"en",suppressHydrationWarning:!0,children:(0,d.jsx)("body",{className:f().className,children:(0,d.jsx)(g.default,{children:a})})})}},55039:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,81170,23)),Promise.resolve().then(c.t.bind(c,23597,23)),Promise.resolve().then(c.t.bind(c,36893,23)),Promise.resolve().then(c.t.bind(c,89748,23)),Promise.resolve().then(c.t.bind(c,6060,23)),Promise.resolve().then(c.t.bind(c,7184,23)),Promise.resolve().then(c.t.bind(c,69576,23)),Promise.resolve().then(c.t.bind(c,73041,23)),Promise.resolve().then(c.t.bind(c,51384,23))},58249:(a,b,c)=>{"use strict";c.d(b,{H:()=>g,T:()=>f});var d=c(14772);class e{getCachedSession(){if(this.isLoggingOut||!this.cache)return null;let a=Date.now(),b=a-this.cache.timestamp>this.MAX_AGE,c=a-this.cache.timestamp>this.CACHE_DURATION;return b||this.cache.session?.expires_at&&a>1e3*this.cache.session.expires_at?(this.cache=null,null):{...this.cache.session,isStale:c}}setCachedSession(a){if(!a){this.cache=null;return}this.cache={session:a,timestamp:Date.now(),expiresAt:a.expires_at?1e3*a.expires_at:Date.now()+this.MAX_AGE}}clearCache(){this.cache=null}setLoggingOut(a){this.isLoggingOut=a,a&&(this.cache=null)}isSessionValid(){return!!this.cache&&Date.now()<this.cache.expiresAt}constructor(){this.cache=null,this.CACHE_DURATION=1e4,this.MAX_AGE=12e4,this.isLoggingOut=!1}}let f=new e;async function g(a){let b=f.getCachedSession();if(b&&!b.isStale)return{data:{session:b}};if(b&&b.isStale)return a.auth.getSession().then(({data:a})=>{a.session&&f.setCachedSession(a.session)}),{data:{session:b}};try{let b=await a.auth.getSession();return b.data.session&&f.setCachedSession(b.data.session),b}catch(a){return console.error("Error fetching session:",a),await (0,d.handleAuthError)(a),{data:{session:null}}}}},61135:()=>{},62007:(a,b,c)=>{"use strict";c.d(b,{N:()=>h});var d=c(36134);let e={GOOGLE_MAPS:async()=>process.env.NEXT_PUBLIC_GOOGLE_MAPS_KEY||"AIzaSyB6wCOi9B8kcTLiwrE7KjV93882exWNKAY",SUPABASE:{URL:process.env.NEXT_PUBLIC_SUPABASE_URL||"https://kgmjttamzppmypwzargk.supabase.co",ANON_KEY:process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtnbWp0dGFtenBwbXlwd3phcmdrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk4MjY2MjYsImV4cCI6MjA1NTQwMjYyNn0.HMfRqxeKQSjRY2ydzyxuJoTqr06nTVjOmGp0TpXtYpk"}},f=e.SUPABASE.URL,g=e.SUPABASE.ANON_KEY;(()=>{if(!process.env.NEXT_PUBLIC_SUPABASE_FUNCTIONS_URL)try{let a=new URL(f);return`${a.protocol}//${a.host}`}catch{return}})();let h=(0,d.UU)(f,g,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"},global:{headers:{"X-Client-Info":"supabase-js/2.x"}},db:{schema:"public"},realtime:{params:{eventsPerSecond:10}}})},64772:(a,b,c)=>{"use strict";c.d(b,{Fc:()=>i,TN:()=>k,XL:()=>j});var d=c(21124),e=c(38301),f=c(26691),g=c(44943);let h=(0,f.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",warning:"border-amber-200 text-amber-800 dark:border-amber-600 bg-amber-50 dark:bg-amber-900/20 [&>svg]:text-amber-600 dark:[&>svg]:text-amber-500"}},defaultVariants:{variant:"default"}}),i=e.forwardRef(({className:a,variant:b,...c},e)=>(0,d.jsx)("div",{ref:e,role:"alert",className:(0,g.cn)(h({variant:b}),a),...c}));i.displayName="Alert";let j=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("h5",{ref:c,className:(0,g.cn)("mb-1 font-medium leading-none tracking-tight",a),...b}));j.displayName="AlertTitle";let k=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,g.cn)("text-sm [&_p]:leading-relaxed",a),...b}));k.displayName="AlertDescription"},90472:(a,b,c)=>{Promise.resolve().then(c.bind(c,10910))},91991:(a,b,c)=>{Promise.resolve().then(c.t.bind(c,54160,23)),Promise.resolve().then(c.t.bind(c,31603,23)),Promise.resolve().then(c.t.bind(c,68495,23)),Promise.resolve().then(c.t.bind(c,75170,23)),Promise.resolve().then(c.t.bind(c,77526,23)),Promise.resolve().then(c.t.bind(c,78922,23)),Promise.resolve().then(c.t.bind(c,29234,23)),Promise.resolve().then(c.t.bind(c,12263,23)),Promise.resolve().then(c.bind(c,82146))}};